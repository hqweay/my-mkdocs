<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Thinking Drafts"><link href=https://wiki.leay.net/tech/code/spring/2019-03-29-Spring-init/ rel=canonical><meta name=author content=hqweay><meta name=lang:clipboard.copy content=复制><meta name=lang:clipboard.copied content=已复制><meta name=lang:search.language content="en, ja"><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content=没有找到符合条件的结果><meta name=lang:search.result.one content="找到 1 个符合条件的结果"><meta name=lang:search.result.other content="# 个符合条件的结果"><meta name=lang:search.tokenizer content=[\uff0c\u3002]+><link rel="shortcut icon" href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>Spring 启动流程与简单源码分析</title><link rel=stylesheet href=../../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#3f51b5><script src=../../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Noto Serif SC","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../../assets/fonts/material-icons.css><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105976066-3", "wiki.leay.net")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=indigo data-md-color-accent=indigo> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#_1 tabindex=0 class=md-skip> 跳转至 </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" aria-label="Hqweay's Wiki" class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Hqweay's Wiki </span> <span class=md-header-nav__topic> Spring 启动流程与简单源码分析 </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> 键入以开始搜索 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../../docs/ class=md-tabs__link> Docs </a> </li> <li class=md-tabs__item> <a href=../../../../life/reading/ class=md-tabs__link> Life </a> </li> <li class=md-tabs__item> <a href=../../../../study/draft/try-wiki/ class=md-tabs__link> Study </a> </li> <li class=md-tabs__item> <a href=../../frontend/2017-09-14-easy-web-test/ class=md-tabs__link> Tech </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" class="md-nav__button md-logo"> <i class=md-icon></i> </a> Hqweay's Wiki </label> <div class=md-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../../test/ title=特殊语法 class=md-nav__link> 特殊语法 </a> </li> <li class=md-nav__item> <a href=../../../../web-page/ title=静态文档导航 class=md-nav__link> 静态文档导航 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/ title=About class=md-nav__link> About </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class=md-nav__link for=nav-4-2> English </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-2> English </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1 type=checkbox id=nav-4-2-1> <label class=md-nav__link for=nav-4-2-1> A Programmers Guide to English </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-2-1> A Programmers Guide to English </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/ title="A Programmer's Guide to English" class=md-nav__link> A Programmer's Guide to English </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-3 type=checkbox id=nav-4-2-1-3> <label class=md-nav__link for=nav-4-2-1-3> Essence </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-3> Essence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/essence/ title=语言学习的本质浅析 class=md-nav__link> 语言学习的本质浅析 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-4 type=checkbox id=nav-4-2-1-4> <label class=md-nav__link for=nav-4-2-1-4> Make a program </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-4> Make a program </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/make-a-program/ title=如何构建一个识别英语的程序 class=md-nav__link> 如何构建一个识别英语的程序 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-5 type=checkbox id=nav-4-2-1-5> <label class=md-nav__link for=nav-4-2-1-5> Qa </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-5> Qa </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/qa/ title="常见问题 QA" class=md-nav__link> 常见问题 QA </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/qa/WhyPTE/ title="为什么我选择 PTE 考试" class=md-nav__link> 为什么我选择 PTE 考试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-6 type=checkbox id=nav-4-2-1-6> <label class=md-nav__link for=nav-4-2-1-6> Resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-6> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/resources/ title=资料、工具推荐和扩展阅读 class=md-nav__link> 资料、工具推荐和扩展阅读 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-7 type=checkbox id=nav-4-2-1-7> <label class=md-nav__link for=nav-4-2-1-7> Training </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-7> Training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/training/ title=我的训练方法 class=md-nav__link> 我的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/training/KnowledgeBase/ title=扩充语料库的训练方法 class=md-nav__link> 扩充语料库的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/training/ListeningandSpeaking/ title=发音和听力训练方法 class=md-nav__link> 发音和听力训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/A-Programmers-Guide-to-English/training/Thinking/ title=英语思维训练 class=md-nav__link> 英语思维训练 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-2 type=checkbox id=nav-4-2-2> <label class=md-nav__link for=nav-4-2-2> English level up tips for Chinese </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-2-2> English level up tips for Chinese </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/ title=English-level-up-tips-for-Chinese class=md-nav__link> English-level-up-tips-for-Chinese </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-2-3 type=checkbox id=nav-4-2-2-3> <label class=md-nav__link for=nav-4-2-2-3> Part 1 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-2-3> Part 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-1/1-understanding/ title=认知篇 class=md-nav__link> 认知篇 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-1/2-vocabulary/ title=单词篇 class=md-nav__link> 单词篇 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-1/3-listening/ title=听力篇 class=md-nav__link> 听力篇 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-1/4-reading/ title=阅读篇 class=md-nav__link> 阅读篇 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-1/5-speaking/ title="5 speaking" class=md-nav__link> 5 speaking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-2-4 type=checkbox id=nav-4-2-2-4> <label class=md-nav__link for=nav-4-2-2-4> Part 2 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-2-4> Part 2 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/part-2/x-misc/ title=扯淡篇 class=md-nav__link> 扯淡篇 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-2-5 type=checkbox id=nav-4-2-2-5> <label class=md-nav__link for=nav-4-2-2-5> Word list </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-2-5> Word list </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/Go/ title=Go class=md-nav__link> Go </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/Java/ title=Java class=md-nav__link> Java </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/JavaScript/ title=JavaScript class=md-nav__link> JavaScript </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/PHP/ title=PHP class=md-nav__link> PHP </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/Python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/English-level-up-tips-for-Chinese/word-list/Swift/ title=Swift class=md-nav__link> Swift </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-3 type=checkbox id=nav-4-2-3> <label class=md-nav__link for=nav-4-2-3> Everyone can use english </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-2-3> Everyone can use english </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/ title=人人都能用英语 class=md-nav__link> 人人都能用英语 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter1/ title="第一章 起点" class=md-nav__link> 第一章 起点 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter2/ title="第二章 口语" class=md-nav__link> 第二章 口语 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter3/ title="第三章 语音" class=md-nav__link> 第三章 语音 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter4/ title="第四章 朗读" class=md-nav__link> 第四章 朗读 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter5/ title="第五章 词典" class=md-nav__link> 第五章 词典 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter6/ title="第六章 语法" class=md-nav__link> 第六章 语法 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter7/ title="第七章 精读" class=md-nav__link> 第七章 精读 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/chapter8/ title="第八章 叮嘱" class=md-nav__link> 第八章 叮嘱 </a> </li> <li class=md-nav__item> <a href=../../../../docs/english/everyone-can-use-english/end/ title=后记 class=md-nav__link> 后记 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3> <label class=md-nav__link for=nav-4-3> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-3> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3-1 type=checkbox id=nav-4-3-1> <label class=md-nav__link for=nav-4-3-1> Chinese copywriting guidelines </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-3-1> Chinese copywriting guidelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/writing/chinese-copywriting-guidelines/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/chinese-copywriting-guidelines/CHANGELOG/ title=CHANGELOG class=md-nav__link> CHANGELOG </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/chinese-copywriting-guidelines/README.en-US/ title="Chinese Copywriting Guidelines" class=md-nav__link> Chinese Copywriting Guidelines </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/chinese-copywriting-guidelines/README.zh-CN/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/chinese-copywriting-guidelines/README.zh-HK/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3-2 type=checkbox id=nav-4-3-2> <label class=md-nav__link for=nav-4-3-2> Document style guide </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-3-2> Document style guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/ title=Index class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3-2-2 type=checkbox id=nav-4-3-2-2> <label class=md-nav__link for=nav-4-3-2-2> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-3-2-2> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/marks/ title=标点符号 class=md-nav__link> 标点符号 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/number/ title=数值 class=md-nav__link> 数值 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/paragraph/ title=段落 class=md-nav__link> 段落 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/reference/ title=参考链接 class=md-nav__link> 参考链接 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/structure/ title=文档体系 class=md-nav__link> 文档体系 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/text/ title=文本 class=md-nav__link> 文本 </a> </li> <li class=md-nav__item> <a href=../../../../docs/writing/document-style-guide/docs/title/ title=标题 class=md-nav__link> 标题 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Life </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Life </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> Reading </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-1> Reading </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../life/reading/ title=阅读 class=md-nav__link> 阅读 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1-2 type=checkbox id=nav-5-1-2> <label class=md-nav__link for=nav-5-1-2> Mark </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-1-2> Mark </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../life/reading/mark/back-up/ title="2019 暑假备份" class=md-nav__link> 2019 暑假备份 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/back/ title=例行收集 class=md-nav__link> 例行收集 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/efficiency-time/ title=效率、时间、鸡汤 class=md-nav__link> 效率、时间、鸡汤 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/fiction/ title=小说 class=md-nav__link> 小说 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/films-remark/ title=影评、电影 class=md-nav__link> 影评、电影 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/fo/ title=佛 class=md-nav__link> 佛 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/hackers-others/ title=互联网、思维方式 class=md-nav__link> 互联网、思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/hooked-media/ title=媒介反思 class=md-nav__link> 媒介反思 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/isaka-kotaro/ title=伊坂幸太郎 class=md-nav__link> 伊坂幸太郎 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/knote/ title=整理 class=md-nav__link> 整理 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/mark-knote/ title=浪费时间 class=md-nav__link> 浪费时间 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/meaning/ title=思维方式 class=md-nav__link> 思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/morimi-tomihiko/ title=森见登美彦的文字好有趣啊! class=md-nav__link> 森见登美彦的文字好有趣啊! </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/murakamo-haruki/ title=村上春树 class=md-nav__link> 村上春树 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/no-fiction/ title=非虚构类 class=md-nav__link> 非虚构类 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/paper/ title=论文式总结 class=md-nav__link> 论文式总结 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/poem/ title=诗歌 class=md-nav__link> 诗歌 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/sence/ title=哲学相关通俗读物 class=md-nav__link> 哲学相关通俗读物 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/the-little-prince/ title="The Little Prince" class=md-nav__link> The Little Prince </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/universe/ title=物理科普读物 class=md-nav__link> 物理科普读物 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/utopia/ title=乌托邦小说世界关于书籍的冷幽默 class=md-nav__link> 乌托邦小说世界关于书籍的冷幽默 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/western-politics/ title=政哲 class=md-nav__link> 政哲 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/what-we-talk-about/ title=日本文学 class=md-nav__link> 日本文学 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/wuxia/ title=武侠 class=md-nav__link> 武侠 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/mark/xiao-bo/ title=王小波 class=md-nav__link> 王小波 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1-3 type=checkbox id=nav-5-1-3> <label class=md-nav__link for=nav-5-1-3> Note </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-1-3> Note </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../life/reading/note/2017-09-02-book-JavaScript-DOM/ title="《JavaScript DOM 编程艺术》" class=md-nav__link> 《JavaScript DOM 编程艺术》 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/note/2017-09-09-coding-javascript-down/ title="尽量把 JavaScript 代码放到 HTML 网页底部" class=md-nav__link> 尽量把 JavaScript 代码放到 HTML 网页底部 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/note/2018-05-23-HTTP/ title="《HTTP 图解》" class=md-nav__link> 《HTTP 图解》 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/note/2018-06-07-computer/ title=计算机系统基础 class=md-nav__link> 计算机系统基础 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/note/2018-10-09-JVM/ title="JVM 笔记" class=md-nav__link> JVM 笔记 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/note/2018-11-25-computer/ title=计算机系统概论 class=md-nav__link> 计算机系统概论 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1-4 type=checkbox id=nav-5-1-4> <label class=md-nav__link for=nav-5-1-4> Review </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-1-4> Review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../life/reading/review/2017-09-28-say-something/ title=听你吹牛的闲暇时光 class=md-nav__link> 听你吹牛的闲暇时光 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/review/2017-09-29-wuxia/ title="《流星 蝴蝶 剑》简记" class=md-nav__link> 《流星 蝴蝶 剑》简记 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/review/2017-12-30-xiao-bo/ title=波波老师 class=md-nav__link> 波波老师 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/review/2018-01-17-lai-zi-xin-shi-jie/ title=《来自新世界》 class=md-nav__link> 《来自新世界》 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/review/2018-10-06-October/ title=科普谈起 class=md-nav__link> 科普谈起 </a> </li> <li class=md-nav__item> <a href=../../../../life/reading/review/2019-09-07-story/ title=从网络小说谈起。 class=md-nav__link> 从网络小说谈起。 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Watching </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> Watching </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../life/watching/2017-08-29-watch-movies-rencently/ title=最近看的几部电影 class=md-nav__link> 最近看的几部电影 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2017-10-13-september-movies-record/ title=九月观影记录 class=md-nav__link> 九月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2017-11-01-October-summary/ title=十月看片与非专业类阅读 class=md-nav__link> 十月看片与非专业类阅读 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2017-12-01-1112/ title=观影与阅读记录 class=md-nav__link> 观影与阅读记录 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2018-01-10-12/ title=最近看片与阅读 class=md-nav__link> 最近看片与阅读 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2018-02-06-january/ title=一月观影记录 class=md-nav__link> 一月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2018-03-08-February/ title=二月至今观影记录 class=md-nav__link> 二月至今观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2018-03-31-March/ title=三月观影记录 class=md-nav__link> 三月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2018-12-26-Smultronst%C3%A4llet/ title=野草莓 class=md-nav__link> 野草莓 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2019-10-10-October/ title=克服本能就是善良吗？（从十月新番胡扯……） class=md-nav__link> 克服本能就是善良吗？（从十月新番胡扯……） </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2019-11-04-bgm/ title=无人声环 class=md-nav__link> 无人声环 </a> </li> <li class=md-nav__item> <a href=../../../../life/watching/2019-11-13-the-end-of-the-world/ title="The End of the Fucking World" class=md-nav__link> The End of the Fucking World </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Study </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Study </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Draft </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-1> Draft </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../study/draft/try-wiki/ title="一些 Wiki 工具的尝试" class=md-nav__link> 一些 Wiki 工具的尝试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Language </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-2> Language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../study/language/%E6%97%A5%E8%AF%AD%E5%85%A5%E9%97%A8/ title=日语入门 class=md-nav__link> 日语入门 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7 checked> <label class=md-nav__link for=nav-7> Tech </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Tech </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1 type=checkbox id=nav-7-1 checked> <label class=md-nav__link for=nav-7-1> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-1> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1-1 type=checkbox id=nav-7-1-1> <label class=md-nav__link for=nav-7-1-1> Frontend </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-1-1> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../frontend/2017-09-14-easy-web-test/ title=大表哥的电商网页实战体验 class=md-nav__link> 大表哥的电商网页实战体验 </a> </li> <li class=md-nav__item> <a href=../../frontend/2017-09-23-know-nothing/ title=知其然不知其所以然 class=md-nav__link> 知其然不知其所以然 </a> </li> <li class=md-nav__item> <a href=../../frontend/2018-06-08-responsive/ title=大表哥的响应式设计 class=md-nav__link> 大表哥的响应式设计 </a> </li> <li class=md-nav__item> <a href=../../frontend/zh-javascript-info/ title="现代 JavaScript 教程摘录" class=md-nav__link> 现代 JavaScript 教程摘录 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1-2 type=checkbox id=nav-7-1-2> <label class=md-nav__link for=nav-7-1-2> Go </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-1-2> Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../go/01/ title=01 class=md-nav__link> 01 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1-3 type=checkbox id=nav-7-1-3> <label class=md-nav__link for=nav-7-1-3> Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-1-3> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../java/2017-12-30-Java%20Web/ title="从 url 访问服务器资源讨论 Java Web 中的 Servlet" class=md-nav__link> 从 url 访问服务器资源讨论 Java Web 中的 Servlet </a> </li> <li class=md-nav__item> <a href=../../java/2018-11-23-ArrayList/ title=ArrayList class=md-nav__link> ArrayList </a> </li> <li class=md-nav__item> <a href=../../java/2019-01-31-HashMap/ title=HashMap class=md-nav__link> HashMap </a> </li> <li class=md-nav__item> <a href=../../java/2019-02-01-String/ title="String 分析(栈,堆,字符串常量池)" class=md-nav__link> String 分析(栈,堆,字符串常量池) </a> </li> <li class=md-nav__item> <a href=../../java/2019-02-03-String/ title=String、StringBuffer、StingBuilder class=md-nav__link> String、StringBuffer、StingBuilder </a> </li> <li class=md-nav__item> <a href=../../java/2019-02-06-Hashtable/ title=Hashtable class=md-nav__link> Hashtable </a> </li> <li class=md-nav__item> <a href=../../java/2019-03-22-string-pool/ title=字符串常量池到底保存的是字符串对象还是字符串对象的引用? class=md-nav__link> 字符串常量池到底保存的是字符串对象还是字符串对象的引用? </a> </li> <li class=md-nav__item> <a href=../../java/2019-03-23-Java-Thread-pool/ title="Java 线程池" class=md-nav__link> Java 线程池 </a> </li> <li class=md-nav__item> <a href=../../java/2019-03-29-Java%20Web/ title="Java Web 启动流程" class=md-nav__link> Java Web 启动流程 </a> </li> <li class=md-nav__item> <a href=../../java/2019-04-05-AQS-lock/ title="AQS 与 Java 锁的具体实现" class=md-nav__link> AQS 与 Java 锁的具体实现 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1-4 type=checkbox id=nav-7-1-4> <label class=md-nav__link for=nav-7-1-4> Projects </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-1-4> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projects/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1-5 type=checkbox id=nav-7-1-5 checked> <label class=md-nav__link for=nav-7-1-5> Spring </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-1-5> Spring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../2018-09-01-Spring%20Security/ title="Spring Boot 与 Spring Security" class=md-nav__link> Spring Boot 与 Spring Security </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Spring 启动流程与简单源码分析 </label> <a href=./ title="Spring 启动流程与简单源码分析" class="md-nav__link md-nav__link--active"> Spring 启动流程与简单源码分析 </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 前言 </a> </li> <li class=md-nav__item> <a href=#spring class=md-nav__link> Spring 启动 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 原文 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 正文 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spring-ioc class=md-nav__link> Spring IOC </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 原文 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 正文 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 容器启动 </a> </li> <li class=md-nav__item> <a href=#getbean class=md-nav__link> getBean </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../2019-04-06-Spring-MVC/ title="Spring MVC 简单源码分析" class=md-nav__link> Spring MVC 简单源码分析 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2 type=checkbox id=nav-7-2> <label class=md-nav__link for=nav-7-2> Config </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-2> Config </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2-1 type=checkbox id=nav-7-2-1> <label class=md-nav__link for=nav-7-2-1> Git </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-2-1> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/git/2018-02-01-git/ title="从 Git 管理项目浅谈" class=md-nav__link> 从 Git 管理项目浅谈 </a> </li> <li class=md-nav__item> <a href=../../../config/git/2019-08-10-git-merge/ title="Git 协作管理项目时不可避免的 merge 操作" class=md-nav__link> Git 协作管理项目时不可避免的 merge 操作 </a> </li> <li class=md-nav__item> <a href=../../../config/git/submodule/ title=submodule class=md-nav__link> submodule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2-2 type=checkbox id=nav-7-2-2> <label class=md-nav__link for=nav-7-2-2> Linux </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-2-2> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/linux/2019-12-18-manjaro/ title="Manjaro 个人新装配置" class=md-nav__link> Manjaro 个人新装配置 </a> </li> <li class=md-nav__item> <a href=../../../config/linux/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../config/linux/fontconfig/ title="Arch Emoji fontconfig" class=md-nav__link> Arch Emoji fontconfig </a> </li> <li class=md-nav__item> <a href=../../../config/linux/softwares/ title=各种工具 class=md-nav__link> 各种工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2-3 type=checkbox id=nav-7-2-3> <label class=md-nav__link for=nav-7-2-3> Tools </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-2-3> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/tools/cz-conventional-changelog/ title=cz-conventional-changelog class=md-nav__link> cz-conventional-changelog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2-4 type=checkbox id=nav-7-2-4> <label class=md-nav__link for=nav-7-2-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-2-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/undefined/2018-03-31-Generator-SpringBoot-Gradle/ title="MyBatis Generator + Spring Boot + Gradle 配置" class=md-nav__link> MyBatis Generator + Spring Boot + Gradle 配置 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2018-06-25-VS-Code-Python/ title="VS Code 写 Python" class=md-nav__link> VS Code 写 Python </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2018-06-26-linux-kawa/ title="在 Linux 上使用 kawa" class=md-nav__link> 在 Linux 上使用 kawa </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2018-11-25-mysql/ title="【转】在 CentOS 上部署 MySQL 解压版" class=md-nav__link> 【转】在 CentOS 上部署 MySQL 解压版 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2019-04-03-Redis-lock/ title="Redis 的分布式锁实现" class=md-nav__link> Redis 的分布式锁实现 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2019-07-28-picGo/ title="Github + picGo ——有图床了" class=md-nav__link> Github + picGo ——有图床了 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2019-11-18-linux-mount/ title="Linux 挂载分区/磁盘" class=md-nav__link> Linux 挂载分区/磁盘 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-02-03-terminal-wifi/ title=把显卡驱动删了后在终端连热点 class=md-nav__link> 把显卡驱动删了后在终端连热点 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-02-12-css/ title=一个引号引发的惨案 class=md-nav__link> 一个引号引发的惨案 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-03-12-electron-vue/ title="用 Vue 写 Electron 的一次问题解决" class=md-nav__link> 用 Vue 写 Electron 的一次问题解决 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-03-12-ttrss/ title="部署 TTRSS 遇到的一些有趣的东西" class=md-nav__link> 部署 TTRSS 遇到的一些有趣的东西 </a> </li> <li class=md-nav__item> <a href=../../../config/undefined/2020-04-02-hexo-asset-image/ title="hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了" class=md-nav__link> hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-3 type=checkbox id=nav-7-3> <label class=md-nav__link for=nav-7-3> Project </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-3> Project </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../project/2017-12-21-xiao-zong-jie/ title=做个小小的总结 class=md-nav__link> 做个小小的总结 </a> </li> <li class=md-nav__item> <a href=../../../project/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> <li class=md-nav__item> <a href=../../../project/2018-06-25-tencent-news-spider-py/ title=腾讯新闻爬虫 class=md-nav__link> 腾讯新闻爬虫 </a> </li> <li class=md-nav__item> <a href=../../../project/2018-09-13-lite-terminal-home-page/ title=简单的仿终端主页 class=md-nav__link> 简单的仿终端主页 </a> </li> <li class=md-nav__item> <a href=../../../project/2019-01-11-tank/ title=花里胡哨的坦克大战 class=md-nav__link> 花里胡哨的坦克大战 </a> </li> <li class=md-nav__item> <a href=../../../project/2019-02-05-new-year/ title=大年初一（爬取豆瓣条目及吐槽） class=md-nav__link> 大年初一（爬取豆瓣条目及吐槽） </a> </li> <li class=md-nav__item> <a href=../../../project/2019-04-03-blog-project/ title=写博客 class=md-nav__link> 写博客 </a> </li> <li class=md-nav__item> <a href=../../../project/2019-06-17-nodejs/ title="MarkAll 导入豆瓣数据 —— NodeJS 写爬虫" class=md-nav__link> MarkAll 导入豆瓣数据 —— NodeJS 写爬虫 </a> </li> <li class=md-nav__item> <a href=../../../project/2019-11-15-Autumn-Json/ title="Autumn-From-Spring 自定义 BeanDefinitionReader" class=md-nav__link> Autumn-From-Spring 自定义 BeanDefinitionReader </a> </li> <li class=md-nav__item> <a href=../../../project/2019-11-15-bookmarkdown/ title="Chrome 插件——书签转 MarkDown" class=md-nav__link> Chrome 插件——书签转 MarkDown </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-4 type=checkbox id=nav-7-4> <label class=md-nav__link for=nav-7-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../undefined/2017-08-10-then-start/ title=那就开始吧 class=md-nav__link> 那就开始吧 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2017-08-16-Writing-is%20the-reward-of-writing-itself/ title=写就是写本身的报酬 class=md-nav__link> 写就是写本身的报酬 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2017-11-19-change-my-blog/ title=【过时内容】嘿，我转移博客啦！ class=md-nav__link> 【过时内容】嘿，我转移博客啦！ </a> </li> <li class=md-nav__item> <a href=../../../undefined/2017-12-08-yao-guai-ji-yu-you-ren-bo/ title=妖怪唧唧与友人波波 class=md-nav__link> 妖怪唧唧与友人波波 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-01-01-ubuntu/ title="折腾 ubuntu 与 win10 共存" class=md-nav__link> 折腾 ubuntu 与 win10 共存 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-02-09-pc-system/ title="黑苹果与 Ubuntu 及 PC 折腾系统" class=md-nav__link> 黑苹果与 Ubuntu 及 PC 折腾系统 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-03-12-install-Vmware-on-linux/ title="deepin 安装 VMware" class=md-nav__link> deepin 安装 VMware </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-03-31-SQL/ title="Spring Boot 开发遇到一些 SQL 问题" class=md-nav__link> Spring Boot 开发遇到一些 SQL 问题 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-04-06-jquery-confrim/ title="JQuery-Confrim 的一点问题" class=md-nav__link> JQuery-Confrim 的一点问题 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-04-06-some-plugins/ title="ECharts + PageHelper + Bootstrap Table" class=md-nav__link> ECharts + PageHelper + Bootstrap Table </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-04-09-js-in-thymeleaf/ title="Thymeleaf 里使用 JavaScript 时的注意事项" class=md-nav__link> Thymeleaf 里使用 JavaScript 时的注意事项 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-04-09-spring-boot-gradle-yml-log4j2/ title="Spring Boot + Gradle + yml 配置 log4j2" class=md-nav__link> Spring Boot + Gradle + yml 配置 log4j2 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-05-09-softwares/ title="Linux 常用软件" class=md-nav__link> Linux 常用软件 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-05-30-hexo-image/ title="【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径）" class=md-nav__link> 【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径） </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-05-30-show/ title=如果给文章提供多种渲染方式 class=md-nav__link> 如果给文章提供多种渲染方式 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-08-30-vue-music/ title="简单的单页应用(Vue CLI2 的简单使用)" class=md-nav__link> 简单的单页应用(Vue CLI2 的简单使用) </a> </li> <li class=md-nav__item> <a href=../../../undefined/2018-09-23-word-count/ title="WordCount 项目总结" class=md-nav__link> WordCount 项目总结 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2020-02-06-markall-douban-backup/ title=豆瓣标记数据备份插件 class=md-nav__link> 豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2020-02-07-markall-douban-backup-yes/ title=【过时】又一个——豆瓣标记数据备份插件 class=md-nav__link> 【过时】又一个——豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../undefined/2020-02-13-blog/ title=从分析本网站的网络请求谈起 class=md-nav__link> 从分析本网站的网络请求谈起 </a> </li> <li class=md-nav__item> <a href=../../../undefined/draft/ title=Draft class=md-nav__link> Draft </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 前言 </a> </li> <li class=md-nav__item> <a href=#spring class=md-nav__link> Spring 启动 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 原文 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 正文 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spring-ioc class=md-nav__link> Spring IOC </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 原文 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 正文 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 容器启动 </a> </li> <li class=md-nav__item> <a href=#getbean class=md-nav__link> getBean </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/hqweay/my-mkdocs/edit/master/docs/tech/code/spring/2019-03-29-Spring-init.md title=编辑此页 class="md-icon md-content__icon">&#xE3C9;</a> <h1>Spring 启动流程与简单源码分析</h1> <h2 id=_1>前言<a class=headerlink href=#_1 title="Permanent link">#</a></h2> <p>基于 spring version = 5.2.0.BUILD-SNAPSHOT</p> <p>请求从浏览器到 Web 服务器,不提,具体查看 Java Web 启动流程...</p> <p>抠字眼地提一下,说起来 Spring 是一个 简化 Java 开发的框架,不应该直接放到服务端开发来讨论.所以这里讨论 Spring 的启动流程,应当是 Spring 用于服务端开发时的启动流程.而 Spring 用于服务端开发,自然离不开 Spring MVC.</p> <p>Spring MVC 是基于 Spring 的 Web 框架,其作用相当于对 servlet 做一层封装,在 Web 服务器和 servlet 间利用 Spring IOC 来管理 Bean 的生命周期与依赖关系.</p> <p>事实上,Spring 启动流程,其实就是 Spring 环境(上下文之类的) + Spring IOC 容器的启动.</p> <p><strong>以下讨论 Web 服务器以 Tomcat 为例...</strong></p> <h2 id=spring>Spring 启动<a class=headerlink href=#spring title="Permanent link">#</a></h2> <h3 id=_2>原文<a class=headerlink href=#_2 title="Permanent link">#</a></h3> <p>基本 copy 自这</p> <p><a href=https://blog.csdn.net/lovejj1994/article/details/79164317>https://blog.csdn.net/lovejj1994/article/details/79164317</a></p> <h3 id=_3>正文<a class=headerlink href=#_3 title="Permanent link">#</a></h3> <blockquote> <p>在 web.xml 中提供一个 contextLoaderListener,当 Web 容器启动,触发容器初始化事件,contextLoaderListener 会监听到这个事件,其 contextLnitialized() 方法被调用,在这个方法中,Spring 初始化一个 根上下文 WebApplicationContext.这是一个接口类,其实际实现类是 XmlWebApplicationContext.</p> <p>这个就是 Spring 的 IOC 容器.其对应的 Bean 定义的配置由 web.xml 中的 context-param 标签指定.在这个 IOC 容器初始化完毕后,Spring 以 WebApplicationContext.ROOT<em>WEB</em>APPLICATION<em>CONTEXT</em>ATTRIBUTE 为 属性 key,将其存储到 ServletContext 中,以便获取.</p> <p>contextLoaderListener 监听器初始化完毕后,开始初始化 web.xml 中配置的 Servlet,这里是 DispatcherServlet....这属于 Spring MVC 部分了...</p> </blockquote> <ol> <li>Web 容器提供上下文环境.</li> <li>Spring IOC 容器初始化.</li> </ol> <p>Web 容器(Tomcat)在启动时加载 Web 应用,并为每个 Web 应用创建唯一的 ServletContext 对象.此 ServletContext 对象中可以存放共享数据,可以看作一个 Web 应用的服务器端组建的共享内存.也称为 一个 <strong>全局的上下文环境</strong>,为后面的 Spring IOC 容器提供宿主环境.</p> <p>不严谨地说,有一个监听者监听着 ServletContext 的创建,一旦发现 ServletContext 创建了,就开始创建 Spring 容器.</p> <p>这个过程是怎么实现的呢?</p> <p>在 Spring MVC 项目中,其 web.xml 定义了一个 contextLoaderListener.</p> <div class=highlight><pre><span></span><code>...
    <span class=nt>&lt;listener&gt;</span>
        <span class=nt>&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class=nt>&lt;/listener-class&gt;</span>
    <span class=nt>&lt;/listener&gt;</span>
...
</code></pre></div> <p>ContextLoaderListener（spring 中的类）继承自 ContextLoader（spring 中的类），并实现<strong>ServletContextListener</strong>（servlet 中的接口），ServletContextListener是容器里的类，如果用的是 tomcat，这个类就在 tomcat 的 lib 里.</p> <p>注意!!!这里的 ServletContextListener 便是 ServletContext 的监听者,监视着 ServletContext 的创建.ServletContext 一旦创建,就调用该接口的回调方法来启动 Spring 容器.</p> <p>(真正的实现是在 spring 里的 ContextLoaderListener)</p> <p>查看一下 ServletContextListener.</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>ServletContextListener</span> <span class=kd>extends</span> <span class=n>EventListener</span> <span class=p>{</span>
    <span class=cm>/**</span>
<span class=cm>    * 通知在web程序初始化的时候开始，所有的ServletContextListeners都会在</span>
<span class=cm>    * web应用中任何的filter和servlet初始化之前接收到context初始化的时候通知</span>
<span class=cm>     ** Notification that the web application initialization process is starting.</span>
<span class=cm>     * All ServletContextListeners are notified of context initialization before</span>
<span class=cm>     * any filter or servlet in the web application is initialized.</span>
<span class=cm>     * @param sce Information about the ServletContext that was initialized</span>
<span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>contextInitialized</span><span class=p>(</span><span class=n>ServletContextEvent</span> <span class=n>sce</span><span class=p>);</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>contextDestroyed</span><span class=p>(</span><span class=n>ServletContextEvent</span> <span class=n>sce</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>启动 Spring 容器便是通过回调 contextLoaderListener 的 contextInitialized() 方法.</p> <p>再查看一下 contextInitialized() 的实现..</p> <div class=highlight><pre><span></span><code>   <span class=cm>/**</span>
<span class=cm>     * Initialize the root web application context.</span>
<span class=cm>     */</span>
    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>contextInitialized</span><span class=p>(</span><span class=n>ServletContextEvent</span> <span class=n>event</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>initWebApplicationContext</span><span class=p>(</span><span class=n>event</span><span class=p>.</span><span class=na>getServletContext</span><span class=p>());</span>
    <span class=p>}</span>
</code></pre></div> <p>能看到,这里传入了 ServletContext 对象.</p> <p>我们继续深入...</p> <div class=highlight><pre><span></span><code>    <span class=cm>/**</span>
<span class=cm>     * 为给定的 ServletContext 初始化 Spring 容器</span>
<span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>WebApplicationContext</span> <span class=nf>initWebApplicationContext</span><span class=p>(</span><span class=n>ServletContext</span> <span class=n>servletContext</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// ...</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>context</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>this</span><span class=p>.</span><span class=na>context</span> <span class=o>=</span> <span class=n>createWebApplicationContext</span><span class=p>(</span><span class=n>servletContext</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>context</span> <span class=k>instanceof</span> <span class=n>ConfigurableWebApplicationContext</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>ConfigurableWebApplicationContext</span> <span class=n>cwac</span> <span class=o>=</span> <span class=p>(</span><span class=n>ConfigurableWebApplicationContext</span><span class=p>)</span> <span class=k>this</span><span class=p>.</span><span class=na>context</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>cwac</span><span class=p>.</span><span class=na>isActive</span><span class=p>())</span> <span class=p>{</span>
                    <span class=c1>// The context has not yet been refreshed -&gt; provide services such as</span>
                    <span class=c1>// setting the parent context, setting the application context id, etc</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>cwac</span><span class=p>.</span><span class=na>getParent</span><span class=p>()</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
                        <span class=c1>// The context instance was injected without an explicit parent -&gt;</span>
                        <span class=c1>// determine parent for root web application context, if any.</span>
                        <span class=n>ApplicationContext</span> <span class=n>parent</span> <span class=o>=</span> <span class=n>loadParentContext</span><span class=p>(</span><span class=n>servletContext</span><span class=p>);</span>
                        <span class=n>cwac</span><span class=p>.</span><span class=na>setParent</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
                    <span class=p>}</span>
                    <span class=n>configureAndRefreshWebApplicationContext</span><span class=p>(</span><span class=n>cwac</span><span class=p>,</span> <span class=n>servletContext</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>}</span>
            <span class=n>servletContext</span><span class=p>.</span><span class=na>setAttribute</span><span class=p>(</span><span class=n>WebApplicationContext</span><span class=p>.</span><span class=na>ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=na>context</span><span class=p>);</span>

            <span class=n>ClassLoader</span> <span class=n>ccl</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>.</span><span class=na>currentThread</span><span class=p>().</span><span class=na>getContextClassLoader</span><span class=p>();</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>ccl</span> <span class=o>==</span> <span class=n>ContextLoader</span><span class=p>.</span><span class=na>class</span><span class=p>.</span><span class=na>getClassLoader</span><span class=p>())</span> <span class=p>{</span>
                <span class=n>currentContext</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=na>context</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>ccl</span> <span class=o>!=</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>currentContextPerThread</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>ccl</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=na>context</span><span class=p>);</span>
            <span class=p>}</span>

        <span class=c1>//...</span>
    <span class=p>}</span>
</code></pre></div> <blockquote> <p>删除了一些不影响解释 spring 启动的代码.</p> </blockquote> <p>能看到,这个方式试图 基于 ServletContext, 创建一个 ApplicationContext.</p> <p>前面提到 ServletContext 是 <strong>全局上下文</strong> ,这里的 ApplicationContext 便是 Spring 的上下文.(根上下文)</p> <p>代码中的 WebApplicationContext 是一个接口类,其实际实现是 XmlWebApplicationContext.</p> <p>Context 被称为上下文,其实也可称为 容器.</p> <p>这个 ApplicationContext 便是 Spring 的较高级的 IOC 容器.</p> <blockquote> <p>Spring IOC 容器 : BeanFactory, ApplicationContext</p> </blockquote> <p>IOC 具体的加载与初始化这里暂且不提...</p> <blockquote> <p>简要提一下</p> <p>ApplicationContext 就是 Spring 的 IOC 容器,其对应的 Bean 定义的配置由 web.xml 中的 context-param 标签指定.在这个 IOC 容器初始化完毕后,Spring 以 WebApplicationContext.ROOT<em>WEB</em>APPLICATION<em>CONTEXT</em>ATTRIBUTE 为 属性 key,将其存储到 ServletContext 中,以便获取.</p> </blockquote> <p>contextLoaderListener 监听器初始化完毕后,开始初始化 web.xml 中配置的 Servlet,这里是 DispatcherServlet....这属于 Spring MVC 部分了...</p> <h2 id=spring-ioc>Spring IOC<a class=headerlink href=#spring-ioc title="Permanent link">#</a></h2> <h3 id=_4>原文<a class=headerlink href=#_4 title="Permanent link">#</a></h3> <p>源码解释等基本 copy 自这篇文章 : <a href=http://www.importnew.com/27469.html>Spring IOC 容器源码分析</a></p> <h3 id=_5>正文<a class=headerlink href=#_5 title="Permanent link">#</a></h3> <p>IOC 容器 : BeanFactory,ApplicationContext</p> <blockquote> <p>[Spring 揭秘]</p> </blockquote> <ul> <li>BeanFactory</li> </ul> <p>基础类型 IOC 容器,提供完整的 IOC 服务支持.默认采用 lazy-load(懒加载),当客户端对象需要访问容器中某个受管理的对象时,才对该受管理的对象进行初始化以及依赖注入操作.</p> <p>也因此,该容器启动初期速度很快,所需资源有限.适合于资源有限,功能要求不严格的场景.</p> <ul> <li>ApplicationContext</li> </ul> <p>ApplicationContext 在 BeanFactory 的基础上构建,是相对比较高级的容器实现,除了拥有 BeanFactory 的所有支持外,还提供了其他高级特性.如 时间发布,国际化支持...</p> <blockquote> <p>如何支持的呢?实际上是通过实现多个接口.</p> <p>BeanFactory &rarr; 管理,装配 bean</p> <p>RousourcePatternResolver &rarr; 加载资源文件</p> <p>MessageSource &rarr; 能够实现国际化等功能</p> <p>ApplicationEventPublisher &rarr; 注册监听器,实现监听机制</p> </blockquote> <p>ApplicationContext 管理的对象在该类型容器启动后,默认全部初始化并绑定完成.</p> <p>因此,需要更多资源,比起 BeanFactory 启动时间较长.</p> <p>Spring IOC 的启动分两步 :</p> <ol> <li>容器启动</li> <li>Bean 实例化</li> </ol> <p>首先通过 <strong>某种途径</strong> 加载 Configuration MetaData(通常也就是 xml 格式的配置信息).</p> <p>除了代码方式比较直接,大部分情况下,容器需要依赖某些工具类(BeanDefinitionReader)对加载的 Configuration MetaData 进行解析和分析,并将分析后的信息编组为相应的 BeanDefinition,最后把这些保存了 Bean 定义信息的 BeanDefinition,注册到相应的 BeanDefinitionRegistry.</p> <p>这样,容器的启动工作就完成了.</p> <p>当某个请求方通过容器的 getBean 方法明确地请求某个对象,或者因依赖关系容器需要隐式地调用 getBean 方法时,就会触发 Bean 的实例化.</p> <p>容器首先检查所请求的对象之前是否已经初始化,如没有,则根据注册的 BeanDefinition 所提供的信息实例化请求对象,并为其注入依赖.如果该对象实现了某些回调接口,也会根据回调接口的要求来装配它.当该对象装配完毕,容器立即将其返回给请求方使用.</p> <h3 id=_6>容器启动<a class=headerlink href=#_6 title="Permanent link">#</a></h3> <p>在前面提到过,Spring 是一个简化 Java 开发的框架,不过如果只是拿来用,一般都是直接上手 SSM 或者 Spring Boot.在这些更加简化的框架里,最简单的依赖注入甚至只需要一个注解...现在先忘掉这些简化后的东西.</p> <p>经过 Spring 启动的步骤后,我们已经能够获得 Spring IOC 容器了,然后通过容器提供的方法做一些事.</p> <p>举例:</p> <div class=highlight><pre><span></span><code><span class=n>ApplicationContext</span> <span class=n>appCt</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ClassPathXmlApplicationContext</span><span class=p>(</span><span class=s>&quot;app.spring.xml&quot;</span><span class=p>);</span> 
<span class=c1>// ...</span>
<span class=n>String</span><span class=o>[]</span> <span class=n>xmlCfg</span> <span class=o>=</span> <span class=k>new</span> <span class=n>String</span><span class=o>[]</span> <span class=p>{</span> <span class=s>&quot;classpath:base.spring.xml&quot;</span><span class=p>,</span><span class=s>&quot;app.spring.xml&quot;</span><span class=p>};</span> 
<span class=n>ApplicationContext</span> <span class=n>appCt</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ClassPathXmlApplicationContext</span><span class=p>(</span><span class=n>xmlCfg</span><span class=p>);</span> 
</code></pre></div> <p>能看出,获取 ApplicationContext 容器调用的是 ClassPathXmlApplicationContext 这个类的构造方法.</p> <p>那么我们就看看 ClassPathXmlApplicationContext 这个类吧.</p> <blockquote> <p>这个类在 org.springframework.context.support 包下</p> </blockquote> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ClassPathXmlApplicationContext</span> <span class=kd>extends</span> <span class=n>AbstractXmlApplicationContext</span> <span class=p>{</span>
  <span class=c1>// 将配置文件作为资源都存放到这个数组中</span>
  <span class=kd>private</span> <span class=n>Resource</span><span class=o>[]</span> <span class=n>configResources</span><span class=p>;</span>

    <span class=c1>// 如果已经有 ApplicationContext 并需要配置成父子关系，那么调用这个构造方法</span>
  <span class=kd>public</span> <span class=nf>ClassPathXmlApplicationContext</span><span class=p>(</span><span class=n>ApplicationContext</span> <span class=n>parent</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>super</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
  <span class=p>}</span>
  <span class=p>...</span>
  <span class=kd>public</span> <span class=nf>ClassPathXmlApplicationContext</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>configLocations</span><span class=p>,</span> <span class=kt>boolean</span> <span class=n>refresh</span><span class=p>,</span> <span class=n>ApplicationContext</span> <span class=n>parent</span><span class=p>)</span>
      <span class=kd>throws</span> <span class=n>BeansException</span> <span class=p>{</span>

    <span class=kd>super</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
        <span class=c1>// 解析配置文件列表，放置到上面说的那个 configResources 数组中</span>
    <span class=n>setConfigLocations</span><span class=p>(</span><span class=n>configLocations</span><span class=p>);</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>refresh</span><span class=p>)</span> <span class=p>{</span>
      <span class=n>refresh</span><span class=p>();</span> <span class=c1>// 核心方法</span>
    <span class=p>}</span>
  <span class=p>}</span>
    <span class=p>...</span>
<span class=p>}</span>
</code></pre></div> <p>这里的 refresh() 就是执行各种初始化的方法啦.</p> <p>命名为 refresh() 而不是 init() 是因为 ApplicationContext 建立后,可以通过 refresh() 方法销毁原来的 ApplicationContext 并重新执行一次初始化操作.</p> <p>refresh() 实际上是在父类 <code>AbstractXmlApplicationContext</code> 里实现的.</p> <div class=highlight><pre><span></span><code><span class=c1>// AbstractXmlApplicationContext.class</span>
<span class=nd>@Override</span>
<span class=kd>public</span> <span class=kt>void</span> <span class=nf>refresh</span><span class=p>()</span> <span class=kd>throws</span> <span class=n>BeansException</span><span class=p>,</span> <span class=n>IllegalStateException</span> <span class=p>{</span>
   <span class=c1>// 来个锁，不然 refresh() 还没结束，你又来个启动或销毁容器的操作，那不就乱套了嘛</span>
   <span class=kd>synchronized</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>startupShutdownMonitor</span><span class=p>)</span> <span class=p>{</span>

      <span class=c1>// 准备工作，记录下容器的启动时间、标记“已启动”状态、处理配置文件中的占位符</span>
      <span class=n>prepareRefresh</span><span class=p>();</span>

      <span class=c1>// 这步比较关键，这步完成后，配置文件就会解析成一个个 Bean 定义，注册到 BeanFactory 中，</span>
      <span class=c1>// 当然，这里说的 Bean 还没有初始化，只是配置信息都提取出来了，</span>
      <span class=c1>// 注册也只是将这些信息都保存到了注册中心(说到底核心是一个 beanName-&gt; beanDefinition 的 map)</span>
      <span class=n>ConfigurableListableBeanFactory</span> <span class=n>beanFactory</span> <span class=o>=</span> <span class=n>obtainFreshBeanFactory</span><span class=p>();</span>

      <span class=c1>// 设置 BeanFactory 的类加载器，添加几个 BeanPostProcessor，手动注册几个特殊的 bean</span>
      <span class=c1>// 这块待会会展开说</span>
      <span class=n>prepareBeanFactory</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

      <span class=k>try</span> <span class=p>{</span>
         <span class=c1>// 【这里需要知道 BeanFactoryPostProcessor 这个知识点，Bean 如果实现了此接口，</span>
         <span class=c1>// 那么在容器初始化以后，Spring 会负责调用里面的 postProcessBeanFactory 方法。】</span>

         <span class=c1>// 这里是提供给子类的扩展点，到这里的时候，所有的 Bean 都加载、注册完成了，但是都还没有初始化</span>
         <span class=c1>// 具体的子类可以在这步的时候添加一些特殊的 BeanFactoryPostProcessor 的实现类或做点什么事</span>
         <span class=n>postProcessBeanFactory</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>
         <span class=c1>// 调用 BeanFactoryPostProcessor 各个实现类的 postProcessBeanFactory(factory) 方法</span>
         <span class=n>invokeBeanFactoryPostProcessors</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

         <span class=c1>// 注册 BeanPostProcessor 的实现类，注意看和 BeanFactoryPostProcessor 的区别</span>
         <span class=c1>// 此接口两个方法: postProcessBeforeInitialization 和 postProcessAfterInitialization</span>
         <span class=c1>// 两个方法分别在 Bean 初始化之前和初始化之后得到执行。注意，到这里 Bean 还没初始化</span>
         <span class=n>registerBeanPostProcessors</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

         <span class=c1>// 初始化当前 ApplicationContext 的 MessageSource，国际化这里就不展开说了，不然没完没了了</span>
         <span class=n>initMessageSource</span><span class=p>();</span>

         <span class=c1>// 初始化当前 ApplicationContext 的事件广播器，这里也不展开了</span>
         <span class=n>initApplicationEventMulticaster</span><span class=p>();</span>

         <span class=c1>// 从方法名就可以知道，典型的模板方法(钩子方法)，</span>
         <span class=c1>// 具体的子类可以在这里初始化一些特殊的 Bean（在初始化 singleton beans 之前）</span>
         <span class=n>onRefresh</span><span class=p>();</span>

         <span class=c1>// 注册事件监听器，监听器需要实现 ApplicationListener 接口。这也不是我们的重点，过</span>
         <span class=n>registerListeners</span><span class=p>();</span>

         <span class=c1>// 重点，重点，重点</span>
         <span class=c1>// 初始化所有的 singleton beans</span>
         <span class=c1>//（lazy-init 的除外）</span>
         <span class=n>finishBeanFactoryInitialization</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

         <span class=c1>// 最后，广播事件，ApplicationContext 初始化完成</span>
         <span class=n>finishRefresh</span><span class=p>();</span>
      <span class=p>}</span>

      <span class=k>catch</span> <span class=p>(</span><span class=n>BeansException</span> <span class=n>ex</span><span class=p>)</span> <span class=p>{</span>
         <span class=k>if</span> <span class=p>(</span><span class=n>logger</span><span class=p>.</span><span class=na>isWarnEnabled</span><span class=p>())</span> <span class=p>{</span>
            <span class=n>logger</span><span class=p>.</span><span class=na>warn</span><span class=p>(</span><span class=s>&quot;Exception encountered during context initialization - &quot;</span> <span class=o>+</span>
                  <span class=s>&quot;cancelling refresh attempt: &quot;</span> <span class=o>+</span> <span class=n>ex</span><span class=p>);</span>
         <span class=p>}</span>

         <span class=c1>// Destroy already created singletons to avoid dangling resources.</span>
         <span class=c1>// 销毁已经初始化的 singleton 的 Beans，以免有些 bean 会一直占用资源</span>
         <span class=n>destroyBeans</span><span class=p>();</span>

         <span class=c1>// Reset &#39;active&#39; flag.</span>
         <span class=n>cancelRefresh</span><span class=p>(</span><span class=n>ex</span><span class=p>);</span>

         <span class=c1>// 把异常往外抛</span>
         <span class=k>throw</span> <span class=n>ex</span><span class=p>;</span>
      <span class=p>}</span>

      <span class=k>finally</span> <span class=p>{</span>
         <span class=c1>// Reset common introspection caches in Spring&#39;s core, since we</span>
         <span class=c1>// might not ever need metadata for singleton beans anymore...</span>
         <span class=n>resetCommonCaches</span><span class=p>();</span>
      <span class=p>}</span>
   <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>这里提及一点.</p> <p>看源码,能发现 <code>AbstractXmlApplicationContext</code> 类实际维护了一个 <code>BeanFactory</code> 对象.</p> <div class=highlight><pre><span></span><code><span class=n>ConfigurableListableBeanFactory</span> <span class=n>beanFactory</span> <span class=o>=</span> <span class=n>obtainFreshBeanFactory</span><span class=p>();</span>
</code></pre></div> <p>查看 <code>obtainFreshBeanFactory()</code> 返回的是 <code>ConfigurableListableBeanFactory</code> 的实例.</p> <div class=highlight><pre><span></span><code><span class=kd>protected</span> <span class=n>ConfigurableListableBeanFactory</span> <span class=nf>obtainFreshBeanFactory</span><span class=p>()</span> <span class=p>{</span>
        <span class=c1>//...</span>
    <span class=p>}</span>
</code></pre></div> <p>不过,<code>ConfigurableListableBeanFactory</code> 是一个接口,而它的实现类只有一个,<code>DefaultListableBeanFactory</code>.</p> <p><strong>所以我们可以说,这里维护的是 <code>DefaultListableBeanFactory</code> 的实例.</strong></p> <p>后面所有关于 BeanFactory 相关的操作其实是由这个实例来处理的.</p> <p>refresh() 的内容就不具体讲了.</p> <p><strong>我们再深入一下 <code>ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</code> .</strong></p> <p>还是回到 <code>obtainFreshBeanFactory()</code></p> <div class=highlight><pre><span></span><code><span class=c1>// AbstractApplicationContext.java</span>
<span class=kd>protected</span> <span class=n>ConfigurableListableBeanFactory</span> <span class=nf>obtainFreshBeanFactory</span><span class=p>()</span> <span class=p>{</span>
  <span class=c1>// 关闭旧的 BeanFactory (如果有)，创建新的 BeanFactory，加载 Bean 定义、注册 Bean 等等</span>
        <span class=n>refreshBeanFactory</span><span class=p>();</span>
        <span class=k>return</span> <span class=n>getBeanFactory</span><span class=p>();</span>
    <span class=p>}</span>
</code></pre></div> <p>再深入查看 refreshBeanFactory()</p> <div class=highlight><pre><span></span><code><span class=c1>// AbstractApplicationContext.java</span>
<span class=kd>protected</span> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>refreshBeanFactory</span><span class=p>()</span> <span class=kd>throws</span> <span class=n>BeansException</span><span class=p>,</span> <span class=n>IllegalStateException</span><span class=p>;</span>
</code></pre></div> <p>抽象方法啊...</p> <p>在子类中实现...</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>AbstractRefreshableApplicationContext</span> <span class=kd>extends</span> <span class=n>AbstractApplicationContext</span> <span class=p>{</span>
  <span class=nd>@Override</span>
<span class=kd>protected</span> <span class=kd>final</span> <span class=kt>void</span> <span class=nf>refreshBeanFactory</span><span class=p>()</span> <span class=kd>throws</span> <span class=n>BeansException</span> <span class=p>{</span>
   <span class=c1>// 如果 ApplicationContext 中已经加载过 BeanFactory 了，销毁所有 Bean，关闭 BeanFactory</span>
   <span class=c1>// 注意，应用中 BeanFactory 本来就是可以多个的，这里可不是说应用全局是否有 BeanFactory，而是当前</span>
   <span class=c1>// ApplicationContext 是否有 BeanFactory</span>
   <span class=k>if</span> <span class=p>(</span><span class=n>hasBeanFactory</span><span class=p>())</span> <span class=p>{</span>
      <span class=n>destroyBeans</span><span class=p>();</span>
      <span class=n>closeBeanFactory</span><span class=p>();</span>
   <span class=p>}</span>
   <span class=k>try</span> <span class=p>{</span>
      <span class=c1>// 初始化一个 DefaultListableBeanFactory，为什么用这个，我们马上说。</span>
      <span class=n>DefaultListableBeanFactory</span> <span class=n>beanFactory</span> <span class=o>=</span> <span class=n>createBeanFactory</span><span class=p>();</span>
      <span class=c1>// 用于 BeanFactory 的序列化，我想不部分人应该都用不到</span>
      <span class=n>beanFactory</span><span class=p>.</span><span class=na>setSerializationId</span><span class=p>(</span><span class=n>getId</span><span class=p>());</span>

      <span class=c1>// 下面这两个方法很重要，别跟丢了，具体细节之后说</span>
      <span class=c1>// 设置 BeanFactory 的两个配置属性：是否允许 Bean 覆盖、是否允许循环引用</span>
      <span class=n>customizeBeanFactory</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

      <span class=c1>// 加载 Bean 到 BeanFactory 中</span>
      <span class=n>loadBeanDefinitions</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>
      <span class=kd>synchronized</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>beanFactoryMonitor</span><span class=p>)</span> <span class=p>{</span>
         <span class=k>this</span><span class=p>.</span><span class=na>beanFactory</span> <span class=o>=</span> <span class=n>beanFactory</span><span class=p>;</span>
      <span class=p>}</span>
   <span class=p>}</span>
   <span class=k>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>ex</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>throw</span> <span class=k>new</span> <span class=n>ApplicationContextException</span><span class=p>(</span><span class=s>&quot;I/O error parsing bean definition source for &quot;</span> <span class=o>+</span> <span class=n>getDisplayName</span><span class=p>(),</span> <span class=n>ex</span><span class=p>);</span>
   <span class=p>}</span>
<span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>能看到,有个 <code>loadBeanDefinitions(beanFactory);</code> .</p> <p>这个方法又在 AbstractXmlApplicationContext.java 中实现...</p> <div class=highlight><pre><span></span><code><span class=c1>// AbstractXmlApplicationContext.java</span>
<span class=cm>/** 我们可以看到，此方法将通过一个 XmlBeanDefinitionReader 实例来加载各个 Bean。*/</span>
<span class=nd>@Override</span>
<span class=kd>protected</span> <span class=kt>void</span> <span class=nf>loadBeanDefinitions</span><span class=p>(</span><span class=n>DefaultListableBeanFactory</span> <span class=n>beanFactory</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>BeansException</span><span class=p>,</span> <span class=n>IOException</span> <span class=p>{</span>
   <span class=c1>// 给这个 BeanFactory 实例化一个 XmlBeanDefinitionReader</span>
   <span class=n>XmlBeanDefinitionReader</span> <span class=n>beanDefinitionReader</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XmlBeanDefinitionReader</span><span class=p>(</span><span class=n>beanFactory</span><span class=p>);</span>

   <span class=c1>// Configure the bean definition reader with this context&#39;s</span>
   <span class=c1>// resource loading environment.</span>
   <span class=n>beanDefinitionReader</span><span class=p>.</span><span class=na>setEnvironment</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>getEnvironment</span><span class=p>());</span>
   <span class=n>beanDefinitionReader</span><span class=p>.</span><span class=na>setResourceLoader</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
   <span class=n>beanDefinitionReader</span><span class=p>.</span><span class=na>setEntityResolver</span><span class=p>(</span><span class=k>new</span> <span class=n>ResourceEntityResolver</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>

   <span class=c1>// 初始化 BeanDefinitionReader，其实这个是提供给子类覆写的，</span>
   <span class=c1>// 我看了一下，没有类覆写这个方法，我们姑且当做不重要吧</span>
   <span class=n>initBeanDefinitionReader</span><span class=p>(</span><span class=n>beanDefinitionReader</span><span class=p>);</span>

  <span class=c1>// 重点来了，继续往下</span>
   <span class=n>loadBeanDefinitions</span><span class=p>(</span><span class=n>beanDefinitionReader</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>啊,总算到这啦!!</p> <p>重点在 <code>loadBeanDefinitions(beanDefinitionReader);</code> 这行代码内.</p> <p>执行了加载 Bean,解析为 BeanDefinition,以及注册到相应的 BeanDefinitionRegistry.</p> <p>先到这吧!!!这里就不继续深入了....................</p> <p>需要了解的话,看别人的分析吧.............</p> <p>比如我上面的链接..................</p> <p>这里就是上文提到的 :</p> <blockquote> <p>大部分情况下,容器需要依赖某些工具类(BeanDefinitionReader)对加载的 Configuration MetaData 进行解析和分析,并将分析后的信息编组为相应的 BeanDefinition,最后把这些保存了 Bean 定义信息的 BeanDefinition,注册到相应的 BeanDefinitionRegistry.</p> <p>Spring 会把开发者定义的 Bean 转换为 BeanDefinition 储存于 Spring 的 BeanFactory.</p> </blockquote> <p>然后了解一下 getBean 是怎么做的...</p> <h3 id=getbean>getBean<a class=headerlink href=#getbean title="Permanent link">#</a></h3> <p>前面提到,ApplicationContext 维护一个 BeanFactory 实例 <code>DefaultListableBeanFactory</code> .实际操作其实是靠 <code>DefaultListableBeanFactory</code>.</p> <p>getBean() 方法也定义在 BeanFactory 中...</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>BeanFactory</span> <span class=p>{</span>
    <span class=c1>// ...</span>
    <span class=n>Object</span> <span class=nf>getBean</span><span class=p>(</span><span class=n>String</span> <span class=n>name</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>BeansException</span><span class=p>;</span>
    <span class=c1>// ...</span>
<span class=p>}</span>
</code></pre></div> <p>在 <code>DefaultListableBeanFactory</code> 中实现</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>class</span> <span class=nc>DefaultListableBeanFactory</span> <span class=kd>extends</span> <span class=n>AbstractAutowireCapableBeanFactory</span><span class=p>{</span>
  <span class=c1>// ...</span>
  <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=nf>getBean</span><span class=p>(</span><span class=n>Class</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>requiredType</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>BeansException</span> <span class=p>{</span>
        <span class=k>return</span> <span class=n>getBean</span><span class=p>(</span><span class=n>requiredType</span><span class=p>,</span> <span class=p>(</span><span class=n>Object</span><span class=o>[]</span><span class=p>)</span> <span class=kc>null</span><span class=p>);</span>
    <span class=p>}</span>

  <span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&quot;unchecked&quot;</span><span class=p>)</span>
    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=nf>getBean</span><span class=p>(</span><span class=n>Class</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>requiredType</span><span class=p>,</span> <span class=nd>@Nullable</span> <span class=n>Object</span><span class=p>...</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>BeansException</span> <span class=p>{</span>
        <span class=n>Object</span> <span class=n>resolved</span> <span class=o>=</span> <span class=n>resolveBean</span><span class=p>(</span><span class=n>ResolvableType</span><span class=p>.</span><span class=na>forRawClass</span><span class=p>(</span><span class=n>requiredType</span><span class=p>),</span> <span class=n>args</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>resolved</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchBeanDefinitionException</span><span class=p>(</span><span class=n>requiredType</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=p>(</span><span class=n>T</span><span class=p>)</span> <span class=n>resolved</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=c1>// ...</span>
<span class=p>}</span>
</code></pre></div> <p>不深入了先...</p> <p>PS : Spring version=5.2.0.BUILD-SNAPSHOT 这里的实现有所改动,与上文链接中不一致了.</p> <p>先到此.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../2018-09-01-Spring%20Security/ title="Spring Boot 与 Spring Security" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 上一页 </span> Spring Boot 与 Spring Security </span> </div> </a> <a href=../2019-04-06-Spring-MVC/ title="Spring MVC 简单源码分析" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 下一页 </span> Spring MVC 简单源码分析 </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../../assets/fonts/font-awesome.css> <a href=https://leay.net target=_blank rel=noopener title=home class="md-footer-social__link fa fa-home"></a> <a href=https://github.com/hqweay target=_blank rel=noopener title=github class="md-footer-social__link fa fa-github"></a> </div> </div> </div> </footer> </div> <script src=../../../../assets/javascripts/application.c33a9706.js></script> <script src=../../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../../assets/javascripts/lunr/tinyseg.js></script> <script src=../../../../assets/javascripts/lunr/lunr.ja.js></script> <script src=../../../../assets/javascripts/lunr/lunr.multi.js></script> <script>app.initialize({version:"1.1",url:{base:"../../../.."}})</script> </body> </html>