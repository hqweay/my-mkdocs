<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Thinking Drafts"><link href=https://wiki.leay.net/book/OnJava8/docs/book/18-Strings/ rel=canonical><meta name=author content=hqweay><meta name=lang:clipboard.copy content=复制><meta name=lang:clipboard.copied content=已复制><meta name=lang:search.language content="en, ja"><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content=没有找到符合条件的结果><meta name=lang:search.result.one content="找到 1 个符合条件的结果"><meta name=lang:search.result.other content="# 个符合条件的结果"><meta name=lang:search.tokenizer content=[\uff0c\u3002]+><link rel="shortcut icon" href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>18 Strings - Hqweay's Wiki</title><link rel=stylesheet href=../../../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#3f51b5><script src=../../../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Noto Serif SC","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../../../assets/fonts/material-icons.css><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105976066-3", "wiki.leay.net")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=indigo data-md-color-accent=indigo> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#_1 tabindex=0 class=md-skip> 跳转至 </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" aria-label="Hqweay's Wiki" class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Hqweay's Wiki </span> <span class=md-header-nav__topic> 18 Strings </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> 键入以开始搜索 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../ class="md-tabs__link md-tabs__link--active"> Book </a> </li> <li class=md-tabs__item> <a href=../../../../../doc/ class=md-tabs__link> Doc </a> </li> <li class=md-tabs__item> <a href=../../../../../life/reading/ class=md-tabs__link> Life </a> </li> <li class=md-tabs__item> <a href=../../../../../study/draft/try-wiki/ class=md-tabs__link> Study </a> </li> <li class=md-tabs__item> <a href=../../../../../tech/code/frontend/2017-09-14-easy-web-test/ class=md-tabs__link> Tech </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" class="md-nav__button md-logo"> <i class=md-icon></i> </a> Hqweay's Wiki </label> <div class=md-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../../../test/ title=特殊语法 class=md-nav__link> 特殊语法 </a> </li> <li class=md-nav__item> <a href=../../../../../web-page/ title=静态文档导航 class=md-nav__link> 静态文档导航 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Book </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Book </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1 type=checkbox id=nav-4-1 checked> <label class=md-nav__link for=nav-4-1> OnJava8 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-1> OnJava8 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ title="《On Java 8》中文版" class=md-nav__link> 《On Java 8》中文版 </a> </li> <li class=md-nav__item> <a href=../../../CONTRIBUTING/ title=CONTRIBUTING class=md-nav__link> CONTRIBUTING </a> </li> <li class=md-nav__item> <a href=../../../SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4 type=checkbox id=nav-4-1-4 checked> <label class=md-nav__link for=nav-4-1-4> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-1-4> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ title=译者的话 class=md-nav__link> 译者的话 </a> </li> <li class=md-nav__item> <a href=../../_coverpage/ title=coverpage class=md-nav__link> coverpage </a> </li> <li class=md-nav__item> <a href=../../sidebar/ title=Sidebar class=md-nav__link> Sidebar </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-4 type=checkbox id=nav-4-1-4-4> <label class=md-nav__link for=nav-4-1-4-4> style </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-1-4-4> style </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-4-1 type=checkbox id=nav-4-1-4-4-1> <label class=md-nav__link for=nav-4-1-4-4-1> Prism master </label> <nav class=md-nav data-md-component=collapsible data-md-level=5> <label class=md-nav__title for=nav-4-1-4-4-1> Prism master </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_style/prism-master/ title=[Prism](http://prismjs.com/) class=md-nav__link> [Prism](http://prismjs.com/) </a> </li> <li class=md-nav__item> <a href=../../_style/prism-master/CHANGELOG/ title="Prism Changelog" class=md-nav__link> Prism Changelog </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-5 type=checkbox id=nav-4-1-4-5 checked> <label class=md-nav__link for=nav-4-1-4-5> Book </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-1-4-5> Book </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../00-Introduction/ title=简介 class=md-nav__link> 简介 </a> </li> <li class=md-nav__item> <a href=../00-On-Java-8/ title="00 On Java 8" class=md-nav__link> 00 On Java 8 </a> </li> <li class=md-nav__item> <a href=../00-Preface/ title=前言 class=md-nav__link> 前言 </a> </li> <li class=md-nav__item> <a href=../01-What-is-an-Object/ title="第一章 对象的概念" class=md-nav__link> 第一章 对象的概念 </a> </li> <li class=md-nav__item> <a href=../02-Installing-Java-and-the-Book-Examples/ title="02 Installing Java and the Book Examples" class=md-nav__link> 02 Installing Java and the Book Examples </a> </li> <li class=md-nav__item> <a href=../03-Objects-Everywhere/ title="03 Objects Everywhere" class=md-nav__link> 03 Objects Everywhere </a> </li> <li class=md-nav__item> <a href=../04-Operators/ title="04 Operators" class=md-nav__link> 04 Operators </a> </li> <li class=md-nav__item> <a href=../05-Control-Flow/ title="05 Control Flow" class=md-nav__link> 05 Control Flow </a> </li> <li class=md-nav__item> <a href=../06-Housekeeping/ title="06 Housekeeping" class=md-nav__link> 06 Housekeeping </a> </li> <li class=md-nav__item> <a href=../07-Implementation-Hiding/ title="07 Implementation Hiding" class=md-nav__link> 07 Implementation Hiding </a> </li> <li class=md-nav__item> <a href=../08-Reuse/ title="08 Reuse" class=md-nav__link> 08 Reuse </a> </li> <li class=md-nav__item> <a href=../09-Polymorphism/ title="09 Polymorphism" class=md-nav__link> 09 Polymorphism </a> </li> <li class=md-nav__item> <a href=../10-Interfaces/ title="10 Interfaces" class=md-nav__link> 10 Interfaces </a> </li> <li class=md-nav__item> <a href=../11-Inner-Classes/ title="11 Inner Classes" class=md-nav__link> 11 Inner Classes </a> </li> <li class=md-nav__item> <a href=../12-Collections/ title="12 Collections" class=md-nav__link> 12 Collections </a> </li> <li class=md-nav__item> <a href=../13-Functional-Programming/ title="13 Functional Programming" class=md-nav__link> 13 Functional Programming </a> </li> <li class=md-nav__item> <a href=../14-Streams/ title="14 Streams" class=md-nav__link> 14 Streams </a> </li> <li class=md-nav__item> <a href=../15-Exceptions/ title="15 Exceptions" class=md-nav__link> 15 Exceptions </a> </li> <li class=md-nav__item> <a href=../16-Validating-Your-Code/ title="16 Validating Your Code" class=md-nav__link> 16 Validating Your Code </a> </li> <li class=md-nav__item> <a href=../17-Files/ title="17 Files" class=md-nav__link> 17 Files </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 18 Strings </label> <a href=./ title="18 Strings" class="md-nav__link md-nav__link--active"> 18 Strings </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 字符串的不可变 </a> </li> <li class=md-nav__item> <a href=#stringbuilder class=md-nav__link> + 的重载与 StringBuilder </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 意外递归 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字符串操作 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 格式化输出 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#printf class=md-nav__link> printf() </a> </li> <li class=md-nav__item> <a href=#systemoutformat class=md-nav__link> System.out.format() </a> </li> <li class=md-nav__item> <a href=#formatter class=md-nav__link> Formatter 类 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 格式化修饰符 </a> </li> <li class=md-nav__item> <a href=#formatter_1 class=md-nav__link> Formatter 转换 </a> </li> <li class=md-nav__item> <a href=#stringformat class=md-nav__link> String.format() </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dump class=md-nav__link> 一个十六进制转储（dump）工具 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 正则表达式 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 基础 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 创建正则表达式 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 量词 </a> </li> <li class=md-nav__item> <a href=#charsequence class=md-nav__link> CharSequence </a> </li> <li class=md-nav__item> <a href=#pattern-matcher class=md-nav__link> Pattern 和 Matcher </a> </li> <li class=md-nav__item> <a href=#find class=md-nav__link> find() </a> </li> <li class=md-nav__item> <a href=#groups class=md-nav__link> 组（Groups） </a> </li> <li class=md-nav__item> <a href=#start-end class=md-nav__link> start() 和 end() </a> </li> <li class=md-nav__item> <a href=#pattern class=md-nav__link> Pattern 标记 </a> </li> <li class=md-nav__item> <a href=#split class=md-nav__link> split() </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 替换操作 </a> </li> <li class=md-nav__item> <a href=#reset class=md-nav__link> reset() </a> </li> <li class=md-nav__item> <a href=#java-io class=md-nav__link> 正则表达式与 Java I/O </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 扫描输入 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scanner class=md-nav__link> Scanner 分隔符 </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 用正则表达式扫描 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stringtokenizer class=md-nav__link> StringTokenizer类 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 本章小结 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../19-Type-Information/ title="19 Type Information" class=md-nav__link> 19 Type Information </a> </li> <li class=md-nav__item> <a href=../20-Generics/ title="20 Generics" class=md-nav__link> 20 Generics </a> </li> <li class=md-nav__item> <a href=../21-Arrays/ title="21 Arrays" class=md-nav__link> 21 Arrays </a> </li> <li class=md-nav__item> <a href=../22-Enumerations/ title="22 Enumerations" class=md-nav__link> 22 Enumerations </a> </li> <li class=md-nav__item> <a href=../23-Annotations/ title="23 Annotations" class=md-nav__link> 23 Annotations </a> </li> <li class=md-nav__item> <a href=../24-Concurrent-Programming/ title="24 Concurrent Programming" class=md-nav__link> 24 Concurrent Programming </a> </li> <li class=md-nav__item> <a href=../25-Patterns/ title="25 Patterns" class=md-nav__link> 25 Patterns </a> </li> <li class=md-nav__item> <a href=../Appendix-Becoming-a-Programmer/ title="Appendix Becoming a Programmer" class=md-nav__link> Appendix Becoming a Programmer </a> </li> <li class=md-nav__item> <a href=../Appendix-Benefits-and-Costs-of-Static-Type-Checking/ title="Appendix Benefits and Costs of Static Type Checking" class=md-nav__link> Appendix Benefits and Costs of Static Type Checking </a> </li> <li class=md-nav__item> <a href=../Appendix-Collection-Topics/ title="Appendix Collection Topics" class=md-nav__link> Appendix Collection Topics </a> </li> <li class=md-nav__item> <a href=../Appendix-Data-Compression/ title="Appendix Data Compression" class=md-nav__link> Appendix Data Compression </a> </li> <li class=md-nav__item> <a href=../Appendix-IO-Streams/ title="Appendix IO Streams" class=md-nav__link> Appendix IO Streams </a> </li> <li class=md-nav__item> <a href=../Appendix-Javadoc/ title="Appendix Javadoc" class=md-nav__link> Appendix Javadoc </a> </li> <li class=md-nav__item> <a href=../Appendix-Low-Level-Concurrency/ title="Appendix Low Level Concurrency" class=md-nav__link> Appendix Low Level Concurrency </a> </li> <li class=md-nav__item> <a href=../Appendix-New-IO/ title="Appendix New IO" class=md-nav__link> Appendix New IO </a> </li> <li class=md-nav__item> <a href=../Appendix-Object-Serialization/ title="Appendix Object Serialization" class=md-nav__link> Appendix Object Serialization </a> </li> <li class=md-nav__item> <a href=../Appendix-Passing-and-Returning-Objects/ title="Appendix Passing and Returning Objects" class=md-nav__link> Appendix Passing and Returning Objects </a> </li> <li class=md-nav__item> <a href=../Appendix-Programming-Guidelines/ title="Appendix Programming Guidelines" class=md-nav__link> Appendix Programming Guidelines </a> </li> <li class=md-nav__item> <a href=../Appendix-Standard-IO/ title="Appendix Standard IO" class=md-nav__link> Appendix Standard IO </a> </li> <li class=md-nav__item> <a href=../Appendix-Supplements/ title="Appendix Supplements" class=md-nav__link> Appendix Supplements </a> </li> <li class=md-nav__item> <a href=../Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java/ title="Appendix The Positive Legacy of C plus plus and Java" class=md-nav__link> Appendix The Positive Legacy of C plus plus and Java </a> </li> <li class=md-nav__item> <a href=../Appendix-Understanding-equals-and-hashCode/ title="Appendix Understanding equals and hashCode" class=md-nav__link> Appendix Understanding equals and hashCode </a> </li> <li class=md-nav__item> <a href=../GLOSSARY/ title=GLOSSARY class=md-nav__link> GLOSSARY </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Doc </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Doc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/ title=About class=md-nav__link> About </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> English </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> English </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1 type=checkbox id=nav-5-2-1> <label class=md-nav__link for=nav-5-2-1> A Programmers Guide to English </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-1> A Programmers Guide to English </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/ title="A Programmer's Guide to English" class=md-nav__link> A Programmer's Guide to English </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-3 type=checkbox id=nav-5-2-1-3> <label class=md-nav__link for=nav-5-2-1-3> Essence </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-3> Essence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/essence/ title=语言学习的本质浅析 class=md-nav__link> 语言学习的本质浅析 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-4 type=checkbox id=nav-5-2-1-4> <label class=md-nav__link for=nav-5-2-1-4> Make a program </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-4> Make a program </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/make-a-program/ title=如何构建一个识别英语的程序 class=md-nav__link> 如何构建一个识别英语的程序 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-5 type=checkbox id=nav-5-2-1-5> <label class=md-nav__link for=nav-5-2-1-5> Qa </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-5> Qa </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/qa/ title="常见问题 QA" class=md-nav__link> 常见问题 QA </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/qa/WhyPTE/ title="为什么我选择 PTE 考试" class=md-nav__link> 为什么我选择 PTE 考试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-6 type=checkbox id=nav-5-2-1-6> <label class=md-nav__link for=nav-5-2-1-6> Resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-6> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/resources/ title=资料、工具推荐和扩展阅读 class=md-nav__link> 资料、工具推荐和扩展阅读 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-7 type=checkbox id=nav-5-2-1-7> <label class=md-nav__link for=nav-5-2-1-7> Training </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-7> Training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/ title=我的训练方法 class=md-nav__link> 我的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/KnowledgeBase/ title=扩充语料库的训练方法 class=md-nav__link> 扩充语料库的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/ListeningandSpeaking/ title=发音和听力训练方法 class=md-nav__link> 发音和听力训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/Thinking/ title=英语思维训练 class=md-nav__link> 英语思维训练 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2 type=checkbox id=nav-5-2-2> <label class=md-nav__link for=nav-5-2-2> English level up tips for Chinese </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-2> English level up tips for Chinese </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/ title=English-level-up-tips-for-Chinese class=md-nav__link> English-level-up-tips-for-Chinese </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-3 type=checkbox id=nav-5-2-2-3> <label class=md-nav__link for=nav-5-2-2-3> Part 1 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-3> Part 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/1-understanding/ title=认知篇 class=md-nav__link> 认知篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/2-vocabulary/ title=单词篇 class=md-nav__link> 单词篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/3-listening/ title=听力篇 class=md-nav__link> 听力篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/4-reading/ title=阅读篇 class=md-nav__link> 阅读篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/5-speaking/ title="5 speaking" class=md-nav__link> 5 speaking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-4 type=checkbox id=nav-5-2-2-4> <label class=md-nav__link for=nav-5-2-2-4> Part 2 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-4> Part 2 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-2/x-misc/ title=扯淡篇 class=md-nav__link> 扯淡篇 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-5 type=checkbox id=nav-5-2-2-5> <label class=md-nav__link for=nav-5-2-2-5> Word list </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-5> Word list </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Go/ title=Go class=md-nav__link> Go </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Java/ title=Java class=md-nav__link> Java </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/JavaScript/ title=JavaScript class=md-nav__link> JavaScript </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/PHP/ title=PHP class=md-nav__link> PHP </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Swift/ title=Swift class=md-nav__link> Swift </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-3 type=checkbox id=nav-5-2-3> <label class=md-nav__link for=nav-5-2-3> Everyone can use english </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-3> Everyone can use english </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/ title=人人都能用英语 class=md-nav__link> 人人都能用英语 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter1/ title="第一章 起点" class=md-nav__link> 第一章 起点 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter2/ title="第二章 口语" class=md-nav__link> 第二章 口语 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter3/ title="第三章 语音" class=md-nav__link> 第三章 语音 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter4/ title="第四章 朗读" class=md-nav__link> 第四章 朗读 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter5/ title="第五章 词典" class=md-nav__link> 第五章 词典 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter6/ title="第六章 语法" class=md-nav__link> 第六章 语法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter7/ title="第七章 精读" class=md-nav__link> 第七章 精读 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter8/ title="第八章 叮嘱" class=md-nav__link> 第八章 叮嘱 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/end/ title=后记 class=md-nav__link> 后记 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-3> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-1 type=checkbox id=nav-5-3-1> <label class=md-nav__link for=nav-5-3-1> Chinese copywriting guidelines </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-3-1> Chinese copywriting guidelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/CHANGELOG/ title=CHANGELOG class=md-nav__link> CHANGELOG </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.en-US/ title="Chinese Copywriting Guidelines" class=md-nav__link> Chinese Copywriting Guidelines </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.zh-CN/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.zh-HK/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-2 type=checkbox id=nav-5-3-2> <label class=md-nav__link for=nav-5-3-2> Document style guide </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-3-2> Document style guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/ title=Index class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-2-2 type=checkbox id=nav-5-3-2-2> <label class=md-nav__link for=nav-5-3-2-2> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-3-2-2> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/marks/ title=标点符号 class=md-nav__link> 标点符号 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/number/ title=数值 class=md-nav__link> 数值 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/paragraph/ title=段落 class=md-nav__link> 段落 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/reference/ title=参考链接 class=md-nav__link> 参考链接 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/structure/ title=文档体系 class=md-nav__link> 文档体系 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/text/ title=文本 class=md-nav__link> 文本 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/title/ title=标题 class=md-nav__link> 标题 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Life </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Life </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Reading </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-1> Reading </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/ title=阅读 class=md-nav__link> 阅读 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-2 type=checkbox id=nav-6-1-2> <label class=md-nav__link for=nav-6-1-2> Mark </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-2> Mark </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/mark/back-up/ title="2019 暑假备份" class=md-nav__link> 2019 暑假备份 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/back/ title=例行收集 class=md-nav__link> 例行收集 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/efficiency-time/ title=效率、时间、鸡汤 class=md-nav__link> 效率、时间、鸡汤 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/fiction/ title=小说 class=md-nav__link> 小说 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/films-remark/ title=影评、电影 class=md-nav__link> 影评、电影 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/fo/ title=佛 class=md-nav__link> 佛 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/hackers-others/ title=互联网、思维方式 class=md-nav__link> 互联网、思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/hooked-media/ title=媒介反思 class=md-nav__link> 媒介反思 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/isaka-kotaro/ title=伊坂幸太郎 class=md-nav__link> 伊坂幸太郎 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/knote/ title=整理 class=md-nav__link> 整理 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/mark-knote/ title=浪费时间 class=md-nav__link> 浪费时间 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/meaning/ title=思维方式 class=md-nav__link> 思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/morimi-tomihiko/ title=森见登美彦的文字好有趣啊! class=md-nav__link> 森见登美彦的文字好有趣啊! </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/murakamo-haruki/ title=村上春树 class=md-nav__link> 村上春树 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/no-fiction/ title=非虚构类 class=md-nav__link> 非虚构类 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/paper/ title=论文式总结 class=md-nav__link> 论文式总结 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/poem/ title=诗歌 class=md-nav__link> 诗歌 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/sence/ title=哲学相关通俗读物 class=md-nav__link> 哲学相关通俗读物 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/the-little-prince/ title="The Little Prince" class=md-nav__link> The Little Prince </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/universe/ title=物理科普读物 class=md-nav__link> 物理科普读物 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/utopia/ title=乌托邦小说世界关于书籍的冷幽默 class=md-nav__link> 乌托邦小说世界关于书籍的冷幽默 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/western-politics/ title=政哲 class=md-nav__link> 政哲 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/what-we-talk-about/ title=日本文学 class=md-nav__link> 日本文学 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/wuxia/ title=武侠 class=md-nav__link> 武侠 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/xiao-bo/ title=王小波 class=md-nav__link> 王小波 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-3 type=checkbox id=nav-6-1-3> <label class=md-nav__link for=nav-6-1-3> Note </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-3> Note </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/note/2017-09-02-book-JavaScript-DOM/ title="《JavaScript DOM 编程艺术》" class=md-nav__link> 《JavaScript DOM 编程艺术》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2017-09-09-coding-javascript-down/ title="尽量把 JavaScript 代码放到 HTML 网页底部" class=md-nav__link> 尽量把 JavaScript 代码放到 HTML 网页底部 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-05-23-HTTP/ title="《HTTP 图解》" class=md-nav__link> 《HTTP 图解》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-06-07-computer/ title=计算机系统基础 class=md-nav__link> 计算机系统基础 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-10-09-JVM/ title="JVM 笔记" class=md-nav__link> JVM 笔记 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-11-25-computer/ title=计算机系统概论 class=md-nav__link> 计算机系统概论 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-4 type=checkbox id=nav-6-1-4> <label class=md-nav__link for=nav-6-1-4> Review </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-4> Review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-09-28-say-something/ title=听你吹牛的闲暇时光 class=md-nav__link> 听你吹牛的闲暇时光 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-09-29-wuxia/ title="《流星 蝴蝶 剑》简记" class=md-nav__link> 《流星 蝴蝶 剑》简记 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-12-30-xiao-bo/ title=波波老师 class=md-nav__link> 波波老师 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2018-01-17-lai-zi-xin-shi-jie/ title=《来自新世界》 class=md-nav__link> 《来自新世界》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2018-10-06-October/ title=科普谈起 class=md-nav__link> 科普谈起 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2019-09-07-story/ title=从网络小说谈起。 class=md-nav__link> 从网络小说谈起。 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Watching </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-2> Watching </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/watching/2017-08-29-watch-movies-rencently/ title=最近看的几部电影 class=md-nav__link> 最近看的几部电影 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-10-13-september-movies-record/ title=九月观影记录 class=md-nav__link> 九月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-11-01-October-summary/ title=十月看片与非专业类阅读 class=md-nav__link> 十月看片与非专业类阅读 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-12-01-1112/ title=观影与阅读记录 class=md-nav__link> 观影与阅读记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-01-10-12/ title=最近看片与阅读 class=md-nav__link> 最近看片与阅读 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-02-06-january/ title=一月观影记录 class=md-nav__link> 一月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-03-08-February/ title=二月至今观影记录 class=md-nav__link> 二月至今观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-03-31-March/ title=三月观影记录 class=md-nav__link> 三月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-12-26-Smultronst%C3%A4llet/ title=野草莓 class=md-nav__link> 野草莓 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-10-10-October/ title=克服本能就是善良吗？（从十月新番胡扯……） class=md-nav__link> 克服本能就是善良吗？（从十月新番胡扯……） </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-11-04-bgm/ title=无人声环 class=md-nav__link> 无人声环 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-11-13-the-end-of-the-world/ title="The End of the Fucking World" class=md-nav__link> The End of the Fucking World </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Study </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Study </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1 type=checkbox id=nav-7-1> <label class=md-nav__link for=nav-7-1> Draft </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-1> Draft </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../study/draft/try-wiki/ title="一些 Wiki 工具的尝试" class=md-nav__link> 一些 Wiki 工具的尝试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2 type=checkbox id=nav-7-2> <label class=md-nav__link for=nav-7-2> Language </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-2> Language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../study/language/%E6%97%A5%E8%AF%AD%E5%85%A5%E9%97%A8/ title=日语入门 class=md-nav__link> 日语入门 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Tech </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> Tech </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1 type=checkbox id=nav-8-1> <label class=md-nav__link for=nav-8-1> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-1> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-1 type=checkbox id=nav-8-1-1> <label class=md-nav__link for=nav-8-1-1> Frontend </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-1> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2017-09-14-easy-web-test/ title=大表哥的电商网页实战体验 class=md-nav__link> 大表哥的电商网页实战体验 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2017-09-23-know-nothing/ title=知其然不知其所以然 class=md-nav__link> 知其然不知其所以然 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2018-06-08-responsive/ title=大表哥的响应式设计 class=md-nav__link> 大表哥的响应式设计 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/zh-javascript-info/ title="现代 JavaScript 教程摘录" class=md-nav__link> 现代 JavaScript 教程摘录 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-2 type=checkbox id=nav-8-1-2> <label class=md-nav__link for=nav-8-1-2> Go </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-2> Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/go/01/ title=01 class=md-nav__link> 01 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-3 type=checkbox id=nav-8-1-3> <label class=md-nav__link for=nav-8-1-3> Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-3> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/java/2017-12-30-Java%20Web/ title="从 url 访问服务器资源讨论 Java Web 中的 Servlet" class=md-nav__link> 从 url 访问服务器资源讨论 Java Web 中的 Servlet </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2018-11-23-ArrayList/ title=ArrayList class=md-nav__link> ArrayList </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-01-31-HashMap/ title=HashMap class=md-nav__link> HashMap </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-01-String/ title="String 分析(栈,堆,字符串常量池)" class=md-nav__link> String 分析(栈,堆,字符串常量池) </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-03-String/ title=String、StringBuffer、StingBuilder class=md-nav__link> String、StringBuffer、StingBuilder </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-06-Hashtable/ title=Hashtable class=md-nav__link> Hashtable </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-22-string-pool/ title=字符串常量池到底保存的是字符串对象还是字符串对象的引用? class=md-nav__link> 字符串常量池到底保存的是字符串对象还是字符串对象的引用? </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-23-Java-Thread-pool/ title="Java 线程池" class=md-nav__link> Java 线程池 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-29-Java%20Web/ title="Java Web 启动流程" class=md-nav__link> Java Web 启动流程 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-04-05-AQS-lock/ title="AQS 与 Java 锁的具体实现" class=md-nav__link> AQS 与 Java 锁的具体实现 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-4 type=checkbox id=nav-8-1-4> <label class=md-nav__link for=nav-8-1-4> Projects </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-4> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/projects/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-5 type=checkbox id=nav-8-1-5> <label class=md-nav__link for=nav-8-1-5> Spring </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-5> Spring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2018-09-01-Spring%20Security/ title="Spring Boot 与 Spring Security" class=md-nav__link> Spring Boot 与 Spring Security </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2019-03-29-Spring-init/ title="Spring 启动流程与简单源码分析" class=md-nav__link> Spring 启动流程与简单源码分析 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2019-04-06-Spring-MVC/ title="Spring MVC 简单源码分析" class=md-nav__link> Spring MVC 简单源码分析 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2 type=checkbox id=nav-8-2> <label class=md-nav__link for=nav-8-2> Config </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-2> Config </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-1 type=checkbox id=nav-8-2-1> <label class=md-nav__link for=nav-8-2-1> Git </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-1> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/git/2018-02-01-git/ title="Git 的简单使用" class=md-nav__link> Git 的简单使用 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/git/2019-08-10-git-merge/ title="Git 协作管理项目时不可避免的 merge 操作" class=md-nav__link> Git 协作管理项目时不可避免的 merge 操作 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/git/submodule/ title=submodule class=md-nav__link> submodule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-2 type=checkbox id=nav-8-2-2> <label class=md-nav__link for=nav-8-2-2> Linux </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-2> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/linux/2019-12-18-manjaro/ title="Manjaro 个人新装配置" class=md-nav__link> Manjaro 个人新装配置 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/fontconfig/ title="Arch Emoji fontconfig" class=md-nav__link> Arch Emoji fontconfig </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/softwares/ title=各种工具 class=md-nav__link> 各种工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-3 type=checkbox id=nav-8-2-3> <label class=md-nav__link for=nav-8-2-3> Tools </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-3> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/tools/cz-conventional-changelog/ title=cz-conventional-changelog class=md-nav__link> cz-conventional-changelog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-4 type=checkbox id=nav-8-2-4> <label class=md-nav__link for=nav-8-2-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-03-31-Generator-SpringBoot-Gradle/ title="MyBatis Generator + Spring Boot + Gradle 配置" class=md-nav__link> MyBatis Generator + Spring Boot + Gradle 配置 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-06-25-VS-Code-Python/ title="VS Code 写 Python" class=md-nav__link> VS Code 写 Python </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-06-26-linux-kawa/ title="在 Linux 上使用 kawa" class=md-nav__link> 在 Linux 上使用 kawa </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-11-25-mysql/ title="【转】在 CentOS 上部署 MySQL 解压版" class=md-nav__link> 【转】在 CentOS 上部署 MySQL 解压版 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-04-03-Redis-lock/ title="Redis 的分布式锁实现" class=md-nav__link> Redis 的分布式锁实现 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-07-28-picGo/ title="Github + picGo ——有图床了" class=md-nav__link> Github + picGo ——有图床了 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-11-18-linux-mount/ title="Linux 挂载分区/磁盘" class=md-nav__link> Linux 挂载分区/磁盘 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-03-terminal-wifi/ title=把显卡驱动删了后在终端连热点 class=md-nav__link> 把显卡驱动删了后在终端连热点 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-12-css/ title=一个引号引发的惨案 class=md-nav__link> 一个引号引发的惨案 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-03-12-electron-vue/ title="用 Vue 写 Electron 的一次问题解决" class=md-nav__link> 用 Vue 写 Electron 的一次问题解决 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-03-12-ttrss/ title="部署 TTRSS 遇到的一些有趣的东西" class=md-nav__link> 部署 TTRSS 遇到的一些有趣的东西 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-04-02-hexo-asset-image/ title="hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了" class=md-nav__link> hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-3 type=checkbox id=nav-8-3> <label class=md-nav__link for=nav-8-3> Project </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-3> Project </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/project/2017-12-21-xiao-zong-jie/ title=做个小小的总结 class=md-nav__link> 做个小小的总结 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-06-25-tencent-news-spider-py/ title=腾讯新闻爬虫 class=md-nav__link> 腾讯新闻爬虫 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-09-13-lite-terminal-home-page/ title=简单的仿终端主页 class=md-nav__link> 简单的仿终端主页 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-01-11-tank/ title=花里胡哨的坦克大战 class=md-nav__link> 花里胡哨的坦克大战 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-02-05-new-year/ title=大年初一（爬取豆瓣条目及吐槽） class=md-nav__link> 大年初一（爬取豆瓣条目及吐槽） </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-04-03-blog-project/ title=写博客 class=md-nav__link> 写博客 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-06-17-nodejs/ title="MarkAll 导入豆瓣数据 —— NodeJS 写爬虫" class=md-nav__link> MarkAll 导入豆瓣数据 —— NodeJS 写爬虫 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-11-15-Autumn-Json/ title="Autumn-From-Spring 自定义 BeanDefinitionReader" class=md-nav__link> Autumn-From-Spring 自定义 BeanDefinitionReader </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-11-15-bookmarkdown/ title="Chrome 插件——书签转 MarkDown" class=md-nav__link> Chrome 插件——书签转 MarkDown </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-4 type=checkbox id=nav-8-4> <label class=md-nav__link for=nav-8-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-08-10-then-start/ title=那就开始吧 class=md-nav__link> 那就开始吧 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-08-16-Writing-is%20the-reward-of-writing-itself/ title=写就是写本身的报酬 class=md-nav__link> 写就是写本身的报酬 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-11-19-change-my-blog/ title=【过时内容】嘿，我转移博客啦！ class=md-nav__link> 【过时内容】嘿，我转移博客啦！ </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-12-08-yao-guai-ji-yu-you-ren-bo/ title=妖怪唧唧与友人波波 class=md-nav__link> 妖怪唧唧与友人波波 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-01-01-ubuntu/ title="折腾 ubuntu 与 win10 共存" class=md-nav__link> 折腾 ubuntu 与 win10 共存 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-02-09-pc-system/ title="黑苹果与 Ubuntu 及 PC 折腾系统" class=md-nav__link> 黑苹果与 Ubuntu 及 PC 折腾系统 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-03-12-install-Vmware-on-linux/ title="deepin 安装 VMware" class=md-nav__link> deepin 安装 VMware </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-03-31-SQL/ title="Spring Boot 开发遇到一些 SQL 问题" class=md-nav__link> Spring Boot 开发遇到一些 SQL 问题 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-06-jquery-confrim/ title="JQuery-Confrim 的一点问题" class=md-nav__link> JQuery-Confrim 的一点问题 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-06-some-plugins/ title="ECharts + PageHelper + Bootstrap Table" class=md-nav__link> ECharts + PageHelper + Bootstrap Table </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-09-js-in-thymeleaf/ title="Thymeleaf 里使用 JavaScript 时的注意事项" class=md-nav__link> Thymeleaf 里使用 JavaScript 时的注意事项 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-09-spring-boot-gradle-yml-log4j2/ title="Spring Boot + Gradle + yml 配置 log4j2" class=md-nav__link> Spring Boot + Gradle + yml 配置 log4j2 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-09-softwares/ title="Linux 常用软件" class=md-nav__link> Linux 常用软件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-30-hexo-image/ title="【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径）" class=md-nav__link> 【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径） </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-30-show/ title=如果给文章提供多种渲染方式 class=md-nav__link> 如果给文章提供多种渲染方式 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-08-30-vue-music/ title="简单的单页应用(Vue CLI2 的简单使用)" class=md-nav__link> 简单的单页应用(Vue CLI2 的简单使用) </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-09-23-word-count/ title="WordCount 项目总结" class=md-nav__link> WordCount 项目总结 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-06-markall-douban-backup/ title=豆瓣标记数据备份插件 class=md-nav__link> 豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-07-markall-douban-backup-yes/ title=【过时】又一个——豆瓣标记数据备份插件 class=md-nav__link> 【过时】又一个——豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-13-blog/ title=从分析本网站的网络请求谈起 class=md-nav__link> 从分析本网站的网络请求谈起 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/draft/ title=Draft class=md-nav__link> Draft </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 字符串的不可变 </a> </li> <li class=md-nav__item> <a href=#stringbuilder class=md-nav__link> + 的重载与 StringBuilder </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 意外递归 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字符串操作 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 格式化输出 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#printf class=md-nav__link> printf() </a> </li> <li class=md-nav__item> <a href=#systemoutformat class=md-nav__link> System.out.format() </a> </li> <li class=md-nav__item> <a href=#formatter class=md-nav__link> Formatter 类 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 格式化修饰符 </a> </li> <li class=md-nav__item> <a href=#formatter_1 class=md-nav__link> Formatter 转换 </a> </li> <li class=md-nav__item> <a href=#stringformat class=md-nav__link> String.format() </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dump class=md-nav__link> 一个十六进制转储（dump）工具 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 正则表达式 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 基础 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 创建正则表达式 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 量词 </a> </li> <li class=md-nav__item> <a href=#charsequence class=md-nav__link> CharSequence </a> </li> <li class=md-nav__item> <a href=#pattern-matcher class=md-nav__link> Pattern 和 Matcher </a> </li> <li class=md-nav__item> <a href=#find class=md-nav__link> find() </a> </li> <li class=md-nav__item> <a href=#groups class=md-nav__link> 组（Groups） </a> </li> <li class=md-nav__item> <a href=#start-end class=md-nav__link> start() 和 end() </a> </li> <li class=md-nav__item> <a href=#pattern class=md-nav__link> Pattern 标记 </a> </li> <li class=md-nav__item> <a href=#split class=md-nav__link> split() </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 替换操作 </a> </li> <li class=md-nav__item> <a href=#reset class=md-nav__link> reset() </a> </li> <li class=md-nav__item> <a href=#java-io class=md-nav__link> 正则表达式与 Java I/O </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 扫描输入 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scanner class=md-nav__link> Scanner 分隔符 </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 用正则表达式扫描 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stringtokenizer class=md-nav__link> StringTokenizer类 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 本章小结 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/hqweay/my-mkdocs/edit/master/docs/book/OnJava8/docs/book/18-Strings.md title=编辑此页 class="md-icon md-content__icon">&#xE3C9;</a> <div class=toc> <ul> <li><a href=#_1>第十八章 字符串</a><ul> <li><a href=#_2>字符串的不可变</a></li> <li><a href=#stringbuilder>+ 的重载与 StringBuilder</a></li> <li><a href=#_3>意外递归</a></li> <li><a href=#_4>字符串操作</a></li> <li><a href=#_5>格式化输出</a><ul> <li><a href=#printf>printf()</a></li> <li><a href=#systemoutformat>System.out.format()</a></li> <li><a href=#formatter>Formatter 类</a></li> <li><a href=#_6>格式化修饰符</a></li> <li><a href=#formatter_1>Formatter 转换</a></li> <li><a href=#stringformat>String.format()</a><ul> <li><a href=#dump>一个十六进制转储（dump）工具</a></li> </ul> </li> </ul> </li> <li><a href=#_7>正则表达式</a><ul> <li><a href=#_8>基础</a></li> <li><a href=#_9>创建正则表达式</a></li> <li><a href=#_10>量词</a></li> <li><a href=#charsequence>CharSequence</a></li> <li><a href=#pattern-matcher>Pattern 和 Matcher</a></li> <li><a href=#find>find()</a></li> <li><a href=#groups>组（Groups）</a></li> <li><a href=#start-end>start() 和 end()</a></li> <li><a href=#pattern>Pattern 标记</a></li> <li><a href=#split>split()</a></li> <li><a href=#_11>替换操作</a></li> <li><a href=#reset>reset()</a></li> <li><a href=#java-io>正则表达式与 Java I/O</a></li> </ul> </li> <li><a href=#_12>扫描输入</a><ul> <li><a href=#scanner>Scanner 分隔符</a></li> <li><a href=#_13>用正则表达式扫描</a></li> </ul> </li> <li><a href=#stringtokenizer>StringTokenizer类</a></li> <li><a href=#_14>本章小结</a></li> </ul> </li> </ul> </div> <!-- Strings --> <h1 id=_1>第十八章 字符串<a class=headerlink href=#_1 title="Permanent link">#</a></h1> <blockquote> <p>字符串操作毫无疑问是计算机程序设计中最常见的行为之一。</p> </blockquote> <p>在 Java 大展拳脚的 Web 系统中更是如此。在本章中，我们将深入学习在 Java 语言中应用最广泛的 <code>String</code> 类，并研究与之相关的类及工具。</p> <!-- Immutable Strings --> <h2 id=_2>字符串的不可变<a class=headerlink href=#_2 title="Permanent link">#</a></h2> <p><code>String</code> 对象是不可变的。查看 JDK 文档你就会发现，<code>String</code> 类中每一个看起来会修改 <code>String</code> 值的方法，实际上都是创建了一个全新的 <code>String</code> 对象，以包含修改后的字符串内容。而最初的 <code>String</code> 对象则丝毫未动。</p> <p>看看下面的代码： <div class=highlight><pre><span></span><code><span class=c1>// strings/Immutable.java</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Immutable</span> <span class=p>{</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>upcase</span><span class=p>(</span><span class=n>String</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span> 
        <span class=k>return</span> <span class=n>s</span><span class=p>.</span><span class=na>toUpperCase</span><span class=p>();</span> 
    <span class=p>}</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>String</span> <span class=n>q</span> <span class=o>=</span> <span class=s>&quot;howdy&quot;</span><span class=p>;</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>q</span><span class=p>);</span> <span class=c1>// howdy </span>
        <span class=n>String</span> <span class=n>qq</span> <span class=o>=</span> <span class=n>upcase</span><span class=p>(</span><span class=n>q</span><span class=p>);</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>qq</span><span class=p>);</span> <span class=c1>// HOWDY </span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>q</span><span class=p>);</span> <span class=c1>// howdy </span>
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>howdy</span>
<span class=cm>HOWDY </span>
<span class=cm>howdy</span>
<span class=cm>*/</span> 
</code></pre></div> 当把 <code>q</code> 传递给 <code>upcase()</code> 方法时，实际传递的是引用的一个拷贝。其实，每当把 String 对象作为方法的参数时，都会复制一份引用，而该引用所指向的对象其实一直待在单一的物理位置上，从未动过。</p> <p>回到 <code>upcase()</code> 的定义，传入其中的引用有了名字 <code>s</code>，只有 <code>upcase()</code> 运行的时候，局部引用 <code>s</code> 才存在。一旦 <code>upcase()</code> 运行结束，<code>s</code> 就消失了。当然了，<code>upcase()</code> 的返回值，其实是最终结果的引用。这足以说明，<code>upcase()</code> 返回的引用已经指向了一个新的对象，而 <code>q</code> 仍然在原来的位置。</p> <p><code>String</code> 的这种行为正是我们想要的。例如：</p> <p><div class=highlight><pre><span></span><code><span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=s>&quot;asdf&quot;</span><span class=p>;</span>
<span class=n>String</span> <span class=n>x</span> <span class=o>=</span> <span class=n>Immutable</span><span class=p>.</span><span class=na>upcase</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>
</code></pre></div> 难道你真的希望 <code>upcase()</code> 方法改变其参数吗？对于一个方法而言，参数是为该方法提供信息的，而不是想让该方法改变自己的。在阅读这段代码时，读者自然会有这样的感觉。这一点很重要，正是有了这种保障，才使得代码易于编写和阅读。</p> <!-- Overloading + vs. StringBuilder --> <h2 id=stringbuilder><code>+</code> 的重载与 <code>StringBuilder</code><a class=headerlink href=#stringbuilder title="Permanent link">#</a></h2> <p><code>String</code> 对象是不可变的，你可以给一个 <code>String</code> 对象添加任意多的别名。因为 <code>String</code> 是只读的，所以指向它的任何引用都不可能修改它的值，因此，也就不会影响到其他引用。</p> <p>不可变性会带来一定的效率问题。为 <code>String</code> 对象重载的 <code>+</code> 操作符就是一个例子。重载的意思是，一个操作符在用于特定的类时，被赋予了特殊的意义（用于 <code>String</code> 的 <code>+</code> 与 <code>+=</code> 是 Java 中仅有的两个重载过的操作符，Java 不允许程序员重载任何其他的操作符 <sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>）。</p> <p>操作符 <code>+</code> 可以用来连接 <code>String</code>： <div class=highlight><pre><span></span><code><span class=c1>// strings/Concatenation.java</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Concatenation</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>String</span> <span class=n>mango</span> <span class=o>=</span> <span class=s>&quot;mango&quot;</span><span class=p>;</span> 
        <span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=s>&quot;abc&quot;</span> <span class=o>+</span> <span class=n>mango</span> <span class=o>+</span> <span class=s>&quot;def&quot;</span> <span class=o>+</span> <span class=mi>47</span><span class=p>;</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>abcmangodef47 </span>
<span class=cm>*/</span>
</code></pre></div> 可以想象一下，这段代码是这样工作的：<code>String</code> 可能有一个 <code>append()</code> 方法，它会生成一个新的 <code>String</code> 对象，以包含“abc”与 <code>mango</code> 连接后的字符串。该对象会再创建另一个新的 <code>String</code> 对象，然后与“def”相连，生成另一个新的对象，依此类推。</p> <p>这种方式当然是可行的，但是为了生成最终的 <code>String</code> 对象，会产生一大堆需要垃圾回收的中间对象。我猜想，Java 设计者一开始就是这么做的（这也是软件设计中的一个教训：除非你用代码将系统实现，并让它运行起来，否则你无法真正了解它会有什么问题），然后他们发现其性能相当糟糕。</p> <p>想看看以上代码到底是如何工作的吗？可以用 JDK 自带的 <code>javap</code> 工具来反编译以上代码。命令如下： <div class=highlight><pre><span></span><code><span class=n>javap</span> <span class=o>-</span><span class=n>c</span> <span class=n>Concatenation</span>
</code></pre></div> 这里的 <code>-c</code> 标志表示将生成 JVM 字节码。我们剔除不感兴趣的部分，然后做细微的修改，于是有了以下的字节码： <div class=highlight><pre><span></span><code>public static void main(java.lang.String[]); 
 Code:
  Stack=2, Locals=3, Args_size=1
  0: ldc #2; //String mango 
  2: astore_1 
  3: new #3; //class StringBuilder 
  6: dup 
  7: invokespecial #4; //StringBuilder.&quot;&lt;init&gt;&quot;:() 
  10: ldc #5; //String abc 
  12: invokevirtual #6; //StringBuilder.append:(String) 
  15: aload_1 
  16: invokevirtual #6; //StringBuilder.append:(String) 
  19: ldc #7; //String def 
  21: invokevirtual #6; //StringBuilder.append:(String) 
  24: bipush 47 
  26: invokevirtual #8; //StringBuilder.append:(I) 
  29: invokevirtual #9; //StringBuilder.toString:() 
  32: astore_2 
  33: getstatic #10; //Field System.out:PrintStream;
  36: aload_2 
  37: invokevirtual #11; //PrintStream.println:(String) 
  40: return
</code></pre></div> 如果你有汇编语言的经验，以上代码应该很眼熟(其中的 <code>dup</code> 和 <code>invokevirtual</code> 语句相当于Java虚拟机上的汇编语句。即使你完全不了解汇编语言也无需担心)。需要重点注意的是：编译器自动引入了 <code>java.lang.StringBuilder</code> 类。虽然源代码中并没有使用 <code>StringBuilder</code> 类，但是编译器却自作主张地使用了它，就因为它更高效。</p> <p>在这里，编译器创建了一个 <code>StringBuilder</code> 对象，用于构建最终的 <code>String</code>，并对每个字符串调用了一次 <code>append()</code> 方法，共计 4 次。最后调用 <code>toString()</code> 生成结果，并存为 <code>s</code> (使用的命令为 <code>astore_2</code>)。</p> <p>现在，也许你会觉得可以随意使用 <code>String</code> 对象，反正编译器会自动为你做性能优化。可是在这之前，让我们更深入地看看编译器能为我们优化到什么程度。下面的例子采用两种方式生成一个 <code>String</code>：方法一使用了多个 <code>String</code> 对象；方法二在代码中使用了 <code>StringBuilder</code>。 <div class=highlight><pre><span></span><code><span class=c1>// strings/WhitherStringBuilder.java</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>WhitherStringBuilder</span> <span class=p>{</span> 
    <span class=kd>public</span> <span class=n>String</span> <span class=nf>implicit</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>fields</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>String</span> <span class=n>result</span> <span class=o>=</span> <span class=s>&quot;&quot;</span><span class=p>;</span> 
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>field</span> <span class=p>:</span> <span class=n>fields</span><span class=p>)</span> <span class=p>{</span> 
            <span class=n>result</span> <span class=o>+=</span> <span class=n>field</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>result</span><span class=p>;</span> 
    <span class=p>}</span>
    <span class=kd>public</span> <span class=n>String</span> <span class=nf>explicit</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>fields</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>StringBuilder</span> <span class=n>result</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=p>();</span> 
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>field</span> <span class=p>:</span> <span class=n>fields</span><span class=p>)</span> <span class=p>{</span> 
            <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>field</span><span class=p>);</span> 
        <span class=p>}</span> 
        <span class=k>return</span> <span class=n>result</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span> 
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> 现在运行 <code>javap -c WhitherStringBuilder</code>，可以看到两种不同方法（我已经去掉不相关的细节）对应的字节码。首先是 <code>implicit()</code> 方法： <div class=highlight><pre><span></span><code>public java.lang.String implicit(java.lang.String[]); 
0: ldc #2 // String 
2: astore_2
3: aload_1 
4: astore_3 
5: aload_3 
6: arraylength 
7: istore 4 
9: iconst_0 
10: istore 5 
12: iload 5 
14: iload 4 
16: if_icmpge 51 
19: aload_3 
20: iload 5 
22: aaload 
23: astore 6 
25: new #3 // StringBuilder 
28: dup 
29: invokespecial #4 // StringBuilder.&quot;&lt;init&gt;&quot;
32: aload_2 
33: invokevirtual #5 // StringBuilder.append:(String) 
36: aload 6 
38: invokevirtual #5 // StringBuilder.append:(String;) 
41: invokevirtual #6 // StringBuilder.toString:() 
44: astore_2 
45: iinc 5, 1 
48: goto 12 
51: aload_2 
52: areturn
</code></pre></div> 注意从第 16 行到第 48 行构成了一个循环体。第 16 行：对堆栈中的操作数进行“大于或等于的整数比较运算”，循环结束时跳转到第 51 行。第 48 行：重新回到循环体的起始位置（第 12 行）。注意：<code>StringBuilder</code> 是在循环内构造的，这意味着每进行一次循环，会创建一个新的 <code>StringBuilder</code> 对象。</p> <p>下面是 <code>explicit()</code> 方法对应的字节码： <div class=highlight><pre><span></span><code>public java.lang.String explicit(java.lang.String[]); 
0: new #3 // StringBuilder 
3: dup
4: invokespecial #4 // StringBuilder.&quot;&lt;init&gt;&quot; 
7: astore_2 
8: aload_1 
9: astore_3 
10: aload_3 
11: arraylength 
12: istore 4 
14: iconst_0 
15: istore 5 
17: iload 5 
19: iload 4 
21: if_icmpge 43 
24: aload_3 
25: iload 5 
27: aaload 
28: astore 6 
30: aload_2 
31: aload 6 
33: invokevirtual #5 // StringBuilder.append:(String) 
36: pop
37: iinc 5, 1 
40: goto 17 
43: aload_2 
44: invokevirtual #6 // StringBuilder.toString:() 
47: areturn
</code></pre></div> 可以看到，不仅循环部分的代码更简短、更简单，而且它只生成了一个 <code>StringBuilder</code> 对象。显式地创建 <code>StringBuilder</code> 还允许你预先为其指定大小。如果你已经知道最终字符串的大概长度，那预先指定 <code>StringBuilder</code> 的大小可以避免频繁地重新分配缓冲。</p> <p>因此，当你为一个类编写 <code>toString()</code> 方法时，如果字符串操作比较简单，那就可以信赖编译器，它会为你合理地构造最终的字符串结果。但是，如果你要在 <code>toString()</code> 方法中使用循环，且可能有性能问题，那么最好自己创建一个 <code>StringBuilder</code> 对象，用它来构建最终结果。请参考以下示例： <div class=highlight><pre><span></span><code><span class=c1>// strings/UsingStringBuilder.java </span>

<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span> 
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>UsingStringBuilder</span> <span class=p>{</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>string1</span><span class=p>()</span> <span class=p>{</span> 
        <span class=n>Random</span> <span class=n>rand</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=p>(</span><span class=mi>47</span><span class=p>);</span>
        <span class=n>StringBuilder</span> <span class=n>result</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=p>(</span><span class=s>&quot;[&quot;</span><span class=p>);</span> 
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>25</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> 
            <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>rand</span><span class=p>.</span><span class=na>nextInt</span><span class=p>(</span><span class=mi>100</span><span class=p>));</span> 
            <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;, &quot;</span><span class=p>);</span> 
        <span class=p>}</span> 
        <span class=n>result</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=na>length</span><span class=p>()</span><span class=o>-</span><span class=mi>2</span><span class=p>,</span> <span class=n>result</span><span class=p>.</span><span class=na>length</span><span class=p>());</span> 
        <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;]&quot;</span><span class=p>);</span>
        <span class=k>return</span> <span class=n>result</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span> 
    <span class=p>}</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>string2</span><span class=p>()</span> <span class=p>{</span> 
        <span class=n>String</span> <span class=n>result</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=p>(</span><span class=mi>47</span><span class=p>)</span>
            <span class=p>.</span><span class=na>ints</span><span class=p>(</span><span class=mi>25</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>
            <span class=p>.</span><span class=na>mapToObj</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>toString</span><span class=p>)</span>
            <span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>joining</span><span class=p>(</span><span class=s>&quot;, &quot;</span><span class=p>));</span>
        <span class=k>return</span> <span class=s>&quot;[&quot;</span> <span class=o>+</span> <span class=n>result</span> <span class=o>+</span> <span class=s>&quot;]&quot;</span><span class=p>;</span> 
    <span class=p>}</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>string1</span><span class=p>());</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>string2</span><span class=p>());</span> 
    <span class=p>}</span>
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>[58, 55, 93, 61, 61, 29, 68, 0, 22, 7, 88, 28, 51, 89, </span>
<span class=cm>9, 78, 98, 61, 20, 58, 16, 40, 11, 22, 4] </span>
<span class=cm>[58, 55, 93, 61, 61, 29, 68, 0, 22, 7, 88, 28, 51, 89,</span>
<span class=cm>9, 78, 98, 61, 20, 58, 16, 40, 11, 22, 4] </span>
<span class=cm>*/</span> 
</code></pre></div> 在方法 <code>string1()</code> 中，最终结果是用 <code>append()</code> 语句拼接起来的。如果你想走捷径，例如：<code>append(a + ": " + c)</code>，编译器就会掉入陷阱，从而为你另外创建一个 <code>StringBuilder</code> 对象处理括号内的字符串操作。如果拿不准该用哪种方式，随时可以用 <code>javap</code> 来分析你的程序。</p> <p><code>StringBuilder</code> 提供了丰富而全面的方法，包括 <code>insert()</code>、<code>replace()</code>、<code>substring()</code>，甚至还有<code>reverse()</code>，但是最常用的还是 <code>append()</code> 和 <code>toString()</code>。还有 <code>delete()</code>，上面的例子中我们用它删除最后一个逗号和空格，以便添加右括号。</p> <p><code>string2()</code> 使用了 <code>Stream</code>，这样代码更加简洁美观。可以证明，<code>Collectors.joining()</code> 内部也是使用的 <code>StringBuilder</code>，这种写法不会影响性能！</p> <p><code>StringBuilder</code>是 Java SE5 引入的，在这之前用的是 <code>StringBuffer</code>。后者是线程安全的（参见<a href=../24-Concurrent-Programming/ >并发编程</a>），因此开销也会大些。使用 <code>StringBuilder</code> 进行字符串操作更快一点。</p> <!-- Unintended Recursion --> <h2 id=_3>意外递归<a class=headerlink href=#_3 title="Permanent link">#</a></h2> <p>Java 中的每个类从根本上都是继承自 <code>Object</code>，标准集合类也是如此，它们都有 <code>toString()</code> 方法，并且覆盖了该方法，使得它生成的 <code>String</code> 结果能够表达集合自身，以及集合包含的对象。例如 <code>ArrayList.toString()</code>，它会遍历 <code>ArrayList</code> 中包含的所有对象，调用每个元素上的 <code>toString()</code> 方法： <div class=highlight><pre><span></span><code><span class=c1>// strings/ArrayListDisplay.java </span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>generics.coffee.*</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ArrayListDisplay</span> <span class=p>{</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>List</span><span class=o>&lt;</span><span class=n>Coffee</span><span class=o>&gt;</span> <span class=n>coffees</span> <span class=o>=</span> 
            <span class=n>Stream</span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=k>new</span> <span class=n>CoffeeSupplier</span><span class=p>())</span>
                <span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
                <span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>coffees</span><span class=p>);</span> 
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>[Americano 0, Latte 1, Americano 2, Mocha 3, Mocha 4, </span>
<span class=cm>Breve 5, Americano 6, Latte 7, Cappuccino 8, Cappuccino 9] </span>
<span class=cm>*/</span> 
</code></pre></div> 如果你希望 <code>toString()</code> 打印出类的内存地址，也许你会考虑使用 <code>this</code> 关键字： <div class=highlight><pre><span></span><code><span class=c1>// strings/InfiniteRecursion.java </span>
<span class=c1>// Accidental recursion </span>
<span class=c1>// {ThrowsException} </span>
<span class=c1>// {VisuallyInspectOutput} Throws very long exception</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>InfiniteRecursion</span> <span class=p>{</span> 
    <span class=nd>@Override</span> 
    <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=p>()</span> <span class=p>{</span> 
        <span class=k>return</span> <span class=s>&quot; InfiniteRecursion address: &quot;</span> <span class=o>+</span> <span class=k>this</span> <span class=o>+</span> <span class=s>&quot;\n&quot;</span>
    <span class=p>}</span> 
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>Stream</span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>InfiniteRecursion</span><span class=p>::</span><span class=k>new</span><span class=p>)</span> 
            <span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> 
            <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span> 
    <span class=p>}</span> 
<span class=p>}</span> 
</code></pre></div> 当你创建了 <code>InfiniteRecursion</code> 对象，并将其打印出来的时候，你会得到一串很长的异常信息。如果你将该 <code>InfiniteRecursion</code> 对象存入一个 <code>ArrayList</code> 中，然后打印该 <code>ArrayList</code>，同样也会抛出异常。其实，当运行到如下代码时： <div class=highlight><pre><span></span><code><span class=s>&quot;InfiniteRecursion address: &quot;</span> <span class=o>+</span> <span class=k>this</span> 
</code></pre></div> 这里发生了自动类型转换，由 <code>InfiniteRecursion</code> 类型转换为 <code>String</code> 类型。因为编译器发现一个 <code>String</code> 对象后面跟着一个 “+”，而 “+” 后面的对象不是 <code>String</code>，于是编译器试着将 <code>this</code> 转换成一个 <code>String</code>。它怎么转换呢？正是通过调用 <code>this</code> 上的 <code>toString()</code> 方法，于是就发生了递归调用。</p> <p>如果你真的想要打印对象的内存地址，应该调用 <code>Object.toString()</code> 方法，这才是负责此任务的方法。所以，不要使用 <code>this</code>，而是应该调用 <code>super.toString()</code> 方法。</p> <!-- Operations on Strings --> <h2 id=_4>字符串操作<a class=headerlink href=#_4 title="Permanent link">#</a></h2> <p>以下是 <code>String</code> 对象具备的一些基本方法。重载的方法归纳在同一行中：</p> <table> <thead> <tr> <th>方法</th> <th>参数，重载版本</th> <th>作用</th> </tr> </thead> <tbody> <tr> <td>构造方法</td> <td>默认版本，<code>String</code>，<code>StringBuilder</code>，<code>StringBuffer</code>，<code>char</code>数组，<code>byte</code>数组</td> <td>创建<code>String</code>对象</td> </tr> <tr> <td><code>length()</code></td> <td></td> <td><code>String</code>中字符的个数</td> </tr> <tr> <td><code>charAt()</code></td> <td><code>int</code>索引</td> <td>获取<code>String</code>中索引位置上的<code>char</code></td> </tr> <tr> <td><code>getChars()</code>，<code>getBytes()</code></td> <td>待复制部分的开始和结束索引，复制的目标数组，目标数组的开始索引</td> <td>复制<code>char</code>或<code>byte</code>到一个目标数组中</td> </tr> <tr> <td><code>toCharArray()</code></td> <td></td> <td>生成一个<code>char[]</code>，包含<code>String</code>中的所有字符</td> </tr> <tr> <td><code>equals()</code>，<code>equalsIgnoreCase()</code></td> <td>与之进行比较的<code>String</code></td> <td>比较两个<code>String</code>的内容是否相同。如果相同，结果为<code>true</code></td> </tr> <tr> <td><code>compareTo()</code>，<code>compareToIgnoreCase()</code></td> <td>与之进行比较的<code>String</code></td> <td>按词典顺序比较<code>String</code>的内容，比较结果为负数、零或正数。注意，大小写不等价</td> </tr> <tr> <td><code>contains()</code></td> <td>要搜索的<code>CharSequence</code></td> <td>如果该<code>String</code>对象包含参数的内容，则返回<code>true</code></td> </tr> <tr> <td><code>contentEquals()</code></td> <td>与之进行比较的<code>CharSequence</code>或<code>StringBuffer</code></td> <td>如果该<code>String</code>对象与参数的内容完全一致，则返回<code>true</code></td> </tr> <tr> <td><code>isEmpty()</code></td> <td></td> <td>返回<code>boolean</code>结果，以表明<code>String</code>对象的长度是否为0</td> </tr> <tr> <td><code>regionMatches()</code></td> <td>该<code>String</code>的索引偏移量，另一个<code>String</code>及其索引偏移量，要比较的长度。重载版本增加了“忽略大小写”功能</td> <td>返回<code>boolean</code>结果，以表明所比较区域是否相等</td> </tr> <tr> <td><code>startsWith()</code></td> <td>可能的起始<code>String</code>。重载版本在参数中增加了偏移量</td> <td>返回<code>boolean</code>结果，以表明该<code>String</code>是否以传入参数开始</td> </tr> <tr> <td><code>endsWith()</code></td> <td>该<code>String</code>可能的后缀<code>String</code></td> <td>返回<code>boolean</code>结果，以表明此参数是否是该字符串的后缀</td> </tr> <tr> <td><code>indexOf()</code>，<code>lastIndexOf()</code></td> <td>重载版本包括：<code>char</code>，<code>char</code>与起始索引，<code>String</code>，<code>String</code>与起始索引</td> <td>如果该<code>String</code>并不包含此参数，就返回-1；否则返回此参数在<code>String</code>中的起始索引。<code>lastIndexOf</code>()是从后往前搜索</td> </tr> <tr> <td><code>matches()</code></td> <td>一个正则表达式</td> <td>返回<code>boolean</code>结果，以表明该<code>String</code>和给出的正则表达式是否匹配</td> </tr> <tr> <td><code>split()</code></td> <td>一个正则表达式。可选参数为需要拆分的最大数量</td> <td>按照正则表达式拆分<code>String</code>，返回一个结果数组</td> </tr> <tr> <td><code>join()</code>（Java8引入的）</td> <td>分隔符，待拼字符序列。用分隔符将字符序列拼接成一个新的<code>String</code></td> <td>用分隔符拼接字符片段，产生一个新的<code>String</code></td> </tr> <tr> <td><code>substring()</code>（即<code>subSequence()</code>）</td> <td>重载版本：起始索引；起始索引+终止索引</td> <td>返回一个新的<code>String</code>对象，以包含参数指定的子串</td> </tr> <tr> <td><code>concat()</code></td> <td>要连接的<code>String</code></td> <td>返回一个新的<code>String</code>对象，内容为原始<code>String</code>连接上参数<code>String</code></td> </tr> <tr> <td><code>replace()</code></td> <td>要替换的字符，用来进行替换的新字符。也可以用一个<code>CharSequence</code>替换另一个<code>CharSequence</code></td> <td>返回替换字符后的新<code>String</code>对象。如果没有替换发生，则返回原始的<code>String</code>对象</td> </tr> <tr> <td><code>replaceFirst()</code></td> <td>要替换的正则表达式，用来进行替换的<code>String</code></td> <td>返回替换首个目标字符串后的<code>String</code>对象</td> </tr> <tr> <td><code>replaceAll()</code></td> <td>要替换的正则表达式，用来进行替换的<code>String</code></td> <td>返回替换所有目标字符串后的<code>String</code>对象</td> </tr> <tr> <td><code>toLowerCase()</code>，<code>toUpperCase()</code></td> <td></td> <td>将字符的大小写改变后，返回一个新的<code>String</code>对象。如果没有任何改变，则返回原始的<code>String</code>对象</td> </tr> <tr> <td><code>trim()</code></td> <td></td> <td>将<code>String</code>两端的空白符删除后，返回一个新的<code>String</code>对象。如果没有任何改变，则返回原始的<code>String</code>对象</td> </tr> <tr> <td><code>valueOf()</code>（<code>static</code>）</td> <td>重载版本：<code>Object</code>；<code>char[]</code>；<code>char[]</code>，偏移量，与字符个数；<code>boolean</code>；<code>char</code>；<code>int</code>；<code>long</code>；<code>float</code>；<code>double</code></td> <td>返回一个表示参数内容的<code>String</code></td> </tr> <tr> <td><code>intern()</code></td> <td></td> <td>为每个唯一的字符序列生成一个且仅生成一个<code>String</code>引用</td> </tr> <tr> <td><code>format()</code></td> <td>要格式化的字符串，要替换到格式化字符串的参数</td> <td>返回格式化结果<code>String</code></td> </tr> </tbody> </table> <p>从这个表可以看出，当需要改变字符串的内容时，<code>String</code> 类的方法都会返回一个新的 <code>String</code> 对象。同时，如果内容不改变，<code>String</code> 方法只是返回原始对象的一个引用而已。这可以节约存储空间以及避免额外的开销。</p> <p>本章稍后还将介绍正则表达式在 <code>String</code> 方法中的应用。</p> <!-- Formatting Output --> <h2 id=_5>格式化输出<a class=headerlink href=#_5 title="Permanent link">#</a></h2> <p>在长久的等待之后，Java SE5 终于推出了 C 语言中 <code>printf()</code> 风格的格式化输出这一功能。这不仅使得控制输出的代码更加简单，同时也给与Java开发者对于输出格式与排列更强大的控制能力。</p> <h3 id=printf><code>printf()</code><a class=headerlink href=#printf title="Permanent link">#</a></h3> <p>C 语言的 <code>printf()</code> 并不像 Java 那样连接字符串，它使用一个简单的格式化字符串，加上要插入其中的值，然后将其格式化输出。 <code>printf()</code> 并不使用重载的 <code>+</code> 操作符（C语言没有重载）来连接引号内的字符串或字符串变量，而是使用特殊的占位符来表示数据将来的位置。而且它还将插入格式化字符串的参数，以逗号分隔，排成一行。例如： <div class=highlight><pre><span></span><code><span class=n>System</span><span class=p>.</span><span class=n>out</span><span class=p>.</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Row 1: [%d %f]%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>
</code></pre></div> 这一行代码在运行的时候，首先将 <code>x</code> 的值插入到 <code>%d_</code> 的位置，然后将 <code>y</code> 的值插入到 <code>%f</code> 的位置。这些占位符叫做<em>格式修饰符</em>，它们不仅指明了插入数据的位置，同时还指明了将会插入什么类型的变量，以及如何格式化。在这个例子中 <code>%d</code> 表示 <code>x</code> 是一个整数，<code>%f</code> 表示 <code>y</code> 是一个浮点数（<code>float</code> 或者 <code>double</code>）。</p> <h3 id=systemoutformat><code>System.out.format()</code><a class=headerlink href=#systemoutformat title="Permanent link">#</a></h3> <p>Java SE5 引入了 <code>format()</code> 方法，可用于 <code>PrintStream</code> 或者 <code>PrintWriter</code> 对象（你可以在 <a href=../Appendix-IO-Streams/ >附录:流式 I/O</a> 了解更多内容），其中也包括 <code>System.out</code> 对象。<code>format()</code> 方法模仿了 C 语言的 <code>printf()</code>。如果你比较怀旧的话，也可以使用 <code>printf()</code>。以下是一个简单的示例： <div class=highlight><pre><span></span><code><span class=c1>// strings/SimpleFormat.java </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SimpleFormat</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>     
        <span class=kt>double</span> <span class=n>y</span> <span class=o>=</span> <span class=mf>5.332542</span><span class=p>;</span>     
        <span class=c1>// The old way: </span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Row 1: [&quot;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&quot; &quot;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&quot;]&quot;</span><span class=p>);</span>     
        <span class=c1>// The new way:     </span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;Row 1: [%d %f]%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>     
        <span class=c1>// or     </span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>printf</span><span class=p>(</span><span class=s>&quot;Row 1: [%d %f]%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>Row 1: [5 5.332542] </span>
<span class=cm>Row 1: [5 5.332542] </span>
<span class=cm>Row 1: [5 5.332542] </span>
<span class=cm>*/</span>
</code></pre></div> 可以看到，<code>format()</code> 和 <code>printf()</code> 是等价的，它们只需要一个简单的格式化字符串，加上一串参数即可，每个参数对应一个格式修饰符。</p> <p><code>String</code> 类也有一个 <code>static format()</code> 方法，可以格式化字符串。</p> <h3 id=formatter><code>Formatter</code> 类<a class=headerlink href=#formatter title="Permanent link">#</a></h3> <p>在 Java 中，所有的格式化功能都是由 <code>java.util.Formatter</code> 类处理的。可以将 <code>Formatter</code> 看做一个翻译器，它将你的格式化字符串与数据翻译成需要的结果。当你创建一个 <code>Formatter</code> 对象时，需要向其构造器传递一些信息，告诉它最终的结果将向哪里输出： <div class=highlight><pre><span></span><code><span class=c1>// strings/Turtle.java </span>
<span class=kn>import</span> <span class=nn>java.io.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Turtle</span> <span class=p>{</span>   
    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=p>;</span>   
    <span class=kd>private</span> <span class=n>Formatter</span> <span class=n>f</span><span class=p>;</span>  
    <span class=kd>public</span> <span class=nf>Turtle</span><span class=p>(</span><span class=n>String</span> <span class=n>name</span><span class=p>,</span> <span class=n>Formatter</span> <span class=n>f</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=p>;</span>     
        <span class=k>this</span><span class=p>.</span><span class=na>f</span> <span class=o>=</span> <span class=n>f</span><span class=p>;</span>   
    <span class=p>}</span>   
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>move</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%s The Turtle is at (%d,%d)%n&quot;</span><span class=p>,</span>       
            <span class=n>name</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>   
    <span class=p>}</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>    
        <span class=n>PrintStream</span> <span class=n>outAlias</span> <span class=o>=</span> <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>;</span>     
        <span class=n>Turtle</span> <span class=n>tommy</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Turtle</span><span class=p>(</span><span class=s>&quot;Tommy&quot;</span><span class=p>,</span>
            <span class=k>new</span> <span class=n>Formatter</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>));</span>     
        <span class=n>Turtle</span> <span class=n>terry</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Turtle</span><span class=p>(</span><span class=s>&quot;Terry&quot;</span><span class=p>,</span>       
            <span class=k>new</span> <span class=n>Formatter</span><span class=p>(</span><span class=n>outAlias</span><span class=p>));</span>     
        <span class=n>tommy</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>);</span>     
        <span class=n>terry</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=mi>8</span><span class=p>);</span>     
        <span class=n>tommy</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>);</span>     
        <span class=n>terry</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>5</span><span class=p>);</span>     
        <span class=n>tommy</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span>     
        <span class=n>terry</span><span class=p>.</span><span class=na>move</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>Tommy The Turtle is at (0,0) </span>
<span class=cm>Terry The Turtle is at (4,8) </span>
<span class=cm>Tommy The Turtle is at (3,4) </span>
<span class=cm>Terry The Turtle is at (2,5) </span>
<span class=cm>Tommy The Turtle is at (3,3) </span>
<span class=cm>Terry The Turtle is at (3,3) </span>
<span class=cm>*/</span>
</code></pre></div> 格式化修饰符 <code>%s</code> 表明这里需要 <code>String</code> 参数。</p> <p>所有的 <code>tommy</code> 都将输出到 <code>System.out</code>，而所有的 <code>terry</code> 则都输出到 <code>System.out</code> 的一个别名中。<code>Formatter</code> 的重载构造器支持输出到多个路径，不过最常用的还是 <code>PrintStream()</code>（如上例）、<code>OutputStream</code> 和 <code>File</code>。你可以在 <a href=../Appendix-IO-Streams/ >附录:流式 I/O</a> 中了解更多信息。</p> <h3 id=_6>格式化修饰符<a class=headerlink href=#_6 title="Permanent link">#</a></h3> <p>在插入数据时，如果想要优化空格与对齐，你需要更精细复杂的格式修饰符。以下是其通用语法： <div class=highlight><pre><span></span><code><span class=o>%[</span><span class=n>argument_index$</span><span class=o>][</span><span class=n>flags</span><span class=o>][</span><span class=n>width</span><span class=o>][</span><span class=p>.</span><span class=na>precision</span><span class=o>]</span><span class=n>conversion</span> 
</code></pre></div> 最常见的应用是控制一个字段的最小长度，这可以通过指定 <em>width</em> 来实现。<code>Formatter</code>对象通过在必要时添加空格，来确保一个字段至少达到设定长度。默认情况下，数据是右对齐的，不过可以通过使用 <code>-</code> 标志来改变对齐方向。</p> <p>与 <em>width</em> 相对的是 <em>precision</em>，用于指定最大长度。<em>width</em> 可以应用于各种类型的数据转换，并且其行为方式都一样。<em>precision</em> 则不然，当应用于不同类型的数据转换时，<em>precision</em> 的意义也不同。在将 <em>precision</em> 应用于 <code>String</code> 时，它表示打印 <code>string</code> 时输出字符的最大数量。而在将 <em>precision</em> 应用于浮点数时，它表示小数部分要显示出来的位数（默认是 6 位小数），如果小数位数过多则舍入，太少则在尾部补零。由于整数没有小数部分，所以 <em>precision</em> 无法应用于整数，如果你对整数应用 <em>precision</em>，则会触发异常。</p> <p>下面的程序应用格式修饰符来打印一个购物收据。这是 <em>Builder</em> 设计模式的一个简单实现，即先创建一个初始对象，然后逐渐添加新东西，最后调用 <code>build()</code> 方法完成构建： <div class=highlight><pre><span></span><code><span class=c1>// strings/ReceiptBuilder.java </span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReceiptBuilder</span> <span class=p>{</span>   
    <span class=kd>private</span> <span class=kt>double</span> <span class=n>total</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>   
    <span class=kd>private</span> <span class=n>Formatter</span> <span class=n>f</span> <span class=o>=</span>     
        <span class=k>new</span> <span class=n>Formatter</span><span class=p>(</span><span class=k>new</span> <span class=n>StringBuilder</span><span class=p>());</span>   
    <span class=kd>public</span> <span class=nf>ReceiptBuilder</span><span class=p>()</span> <span class=p>{</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span>       
          <span class=s>&quot;%-15s %5s %10s%n&quot;</span><span class=p>,</span> <span class=s>&quot;Item&quot;</span><span class=p>,</span> <span class=s>&quot;Qty&quot;</span><span class=p>,</span> <span class=s>&quot;Price&quot;</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span>       
          <span class=s>&quot;%-15s %5s %10s%n&quot;</span><span class=p>,</span> <span class=s>&quot;----&quot;</span><span class=p>,</span> <span class=s>&quot;---&quot;</span><span class=p>,</span> <span class=s>&quot;-----&quot;</span><span class=p>);</span>   
        <span class=p>}</span>   
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=p>(</span><span class=n>String</span> <span class=n>name</span><span class=p>,</span> <span class=kt>int</span> <span class=n>qty</span><span class=p>,</span> <span class=kt>double</span> <span class=n>price</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%-15.15s %5d %10.2f%n&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>qty</span><span class=p>,</span> <span class=n>price</span><span class=p>);</span>     
        <span class=n>total</span> <span class=o>+=</span> <span class=n>price</span> <span class=o>*</span> <span class=n>qty</span><span class=p>;</span>   
    <span class=p>}</span>  
    <span class=kd>public</span> <span class=n>String</span> <span class=nf>build</span><span class=p>()</span> <span class=p>{</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%-15s %5s %10.2f%n&quot;</span><span class=p>,</span> <span class=s>&quot;Tax&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>,</span>       
          <span class=n>total</span> <span class=o>*</span> <span class=mf>0.06</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%-15s %5s %10s%n&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>,</span> <span class=s>&quot;-----&quot;</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%-15s %5s %10.2f%n&quot;</span><span class=p>,</span> <span class=s>&quot;Total&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>,</span>       
          <span class=n>total</span> <span class=o>*</span> <span class=mf>1.06</span><span class=p>);</span>     
        <span class=k>return</span> <span class=n>f</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span>   
    <span class=p>}</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>ReceiptBuilder</span> <span class=n>receiptBuilder</span> <span class=o>=</span>       
          <span class=k>new</span> <span class=n>ReceiptBuilder</span><span class=p>();</span>     
        <span class=n>receiptBuilder</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&quot;Jack&#39;s Magic Beans&quot;</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mf>4.25</span><span class=p>);</span>     
        <span class=n>receiptBuilder</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&quot;Princess Peas&quot;</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mf>5.1</span><span class=p>);</span>     
        <span class=n>receiptBuilder</span><span class=p>.</span><span class=na>add</span><span class=p>(</span>       
          <span class=s>&quot;Three Bears Porridge&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>14.29</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>receiptBuilder</span><span class=p>.</span><span class=na>build</span><span class=p>());</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>Item              Qty      Price </span>
<span class=cm>----              ---      ----- </span>
<span class=cm>Jack&#39;s Magic Be     4       4.25 </span>
<span class=cm>Princess Peas       3       5.10 </span>
<span class=cm>Three Bears Por     1      14.29 </span>
<span class=cm>Tax                         2.80 </span>
<span class=cm>                           ----- </span>
<span class=cm>Total                      49.39 </span>
<span class=cm>*/</span> 
</code></pre></div> 通过传入一个 <code>StringBuilder</code> 对象到 <code>Formatter</code> 的构造器，我们指定了一个容器来构建目标 <code>String</code>。你也可以通过不同的构造器参数，把结果输出到标准输出，甚至是一个文件里。</p> <p>正如你所见，通过相当简洁的语法，<code>Formatter</code> 提供了对空格与对齐的强大控制能力。在该程序中，为了恰当地控制间隔，格式化字符串被重复利用了多遍。</p> <h3 id=formatter_1><code>Formatter</code> 转换<a class=headerlink href=#formatter_1 title="Permanent link">#</a></h3> <p>下面的表格展示了最常用的类型转换：</p> <table> <thead> <tr> <th align=center>类型</th> <th align=left>含义</th> </tr> </thead> <tbody> <tr> <td align=center><code>d</code></td> <td align=left>整型（十进制）</td> </tr> <tr> <td align=center><code>c</code></td> <td align=left>Unicode字符</td> </tr> <tr> <td align=center><code>b</code></td> <td align=left>Boolean值</td> </tr> <tr> <td align=center><code>s</code></td> <td align=left>String</td> </tr> <tr> <td align=center><code>f</code></td> <td align=left>浮点数（十进制）</td> </tr> <tr> <td align=center><code>e</code></td> <td align=left>浮点数（科学计数）</td> </tr> <tr> <td align=center><code>x</code></td> <td align=left>整型（十六进制）</td> </tr> <tr> <td align=center><code>h</code></td> <td align=left>散列码（十六进制）</td> </tr> <tr> <td align=center><code>%</code></td> <td align=left>字面值“%”</td> </tr> </tbody> </table> <p>下面的程序演示了这些转换是如何工作的：</p> <p><div class=highlight><pre><span></span><code><span class=c1>// strings/Conversion.java </span>
<span class=kn>import</span> <span class=nn>java.math.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Conversion</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>Formatter</span> <span class=n>f</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Formatter</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>);</span> 

        <span class=kt>char</span> <span class=n>u</span> <span class=o>=</span> <span class=sc>&#39;a&#39;</span><span class=p>;</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;u = &#39;a&#39;&quot;</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>u</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;d: %d%n&quot;, u);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;c: %c%n&quot;</span><span class=p>,</span> <span class=n>u</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>u</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;f: %f%n&quot;, u);     </span>
        <span class=c1>// f.format(&quot;e: %e%n&quot;, u);     </span>
        <span class=c1>// f.format(&quot;x: %x%n&quot;, u);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>u</span><span class=p>);</span> 

        <span class=kt>int</span> <span class=n>v</span> <span class=o>=</span> <span class=mi>121</span><span class=p>;</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;v = 121&quot;</span><span class=p>);</span>    
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;d: %d%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;c: %c%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;f: %f%n&quot;, v);     </span>
        <span class=c1>// f.format(&quot;e: %e%n&quot;, v);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;x: %x%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>);</span> 

        <span class=n>BigInteger</span> <span class=n>w</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BigInteger</span><span class=p>(</span><span class=s>&quot;50000000000000&quot;</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>       
          <span class=s>&quot;w = new BigInteger(\&quot;50000000000000\&quot;)&quot;</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;d: %d%n&quot;</span><span class=p>,</span> <span class=n>w</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;c: %c%n&quot;, w);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>w</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>w</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;f: %f%n&quot;, w);     </span>
        <span class=c1>// f.format(&quot;e: %e%n&quot;, w);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;x: %x%n&quot;</span><span class=p>,</span> <span class=n>w</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>w</span><span class=p>);</span> 

        <span class=kt>double</span> <span class=n>x</span> <span class=o>=</span> <span class=mf>179.543</span><span class=p>;</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;x = 179.543&quot;</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;d: %d%n&quot;, x);     </span>
        <span class=c1>// f.format(&quot;c: %c%n&quot;, x);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;f: %f%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;e: %e%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;x: %x%n&quot;, x);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span> 

        <span class=n>Conversion</span> <span class=n>y</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Conversion</span><span class=p>();</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;y = new Conversion()&quot;</span><span class=p>);</span> 

        <span class=c1>// f.format(&quot;d: %d%n&quot;, y);     </span>
        <span class=c1>// f.format(&quot;c: %c%n&quot;, y);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;f: %f%n&quot;, y);     </span>
        <span class=c1>// f.format(&quot;e: %e%n&quot;, y);     </span>
        <span class=c1>// f.format(&quot;x: %x%n&quot;, y);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span> 

        <span class=kt>boolean</span> <span class=n>z</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;z = false&quot;</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;d: %d%n&quot;, z);     </span>
        <span class=c1>// f.format(&quot;c: %c%n&quot;, z);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;b: %b%n&quot;</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>     
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;s: %s%n&quot;</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>     
        <span class=c1>// f.format(&quot;f: %f%n&quot;, z);     </span>
        <span class=c1>// f.format(&quot;e: %e%n&quot;, z);     </span>
        <span class=c1>// f.format(&quot;x: %x%n&quot;, z);     </span>
        <span class=n>f</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;h: %h%n&quot;</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>u = &#39;a&#39; </span>
<span class=cm>s: a </span>
<span class=cm>c: a </span>
<span class=cm>b: true </span>
<span class=cm>h: 61 </span>
<span class=cm>v = 121 </span>
<span class=cm>d: 121 </span>
<span class=cm>c: y </span>
<span class=cm>b: true </span>
<span class=cm>s: 121 </span>
<span class=cm>x: 79 </span>
<span class=cm>h: 79 </span>
<span class=cm>w = new BigInteger(&quot;50000000000000&quot;) </span>
<span class=cm>d: 50000000000000 </span>
<span class=cm>b: true </span>
<span class=cm>s: 50000000000000 </span>
<span class=cm>x: 2d79883d2000 </span>
<span class=cm>h: 8842a1a7 </span>
<span class=cm>x = 179.543 </span>
<span class=cm>b: true </span>
<span class=cm>s: 179.543 </span>
<span class=cm>f: 179.543000 </span>
<span class=cm>e: 1.795430e+02 </span>
<span class=cm>h: 1ef462c </span>
<span class=cm>y = new Conversion() </span>
<span class=cm>b: true </span>
<span class=cm>s: Conversion@15db9742 </span>
<span class=cm>h: 15db9742 </span>
<span class=cm>z = false </span>
<span class=cm>b: false </span>
<span class=cm>s: false</span>
<span class=cm>h: 4d5 </span>
<span class=cm>*/</span>
</code></pre></div> 被注释的代码表示，针对相应类型的变量，这些转换是无效的。如果执行这些转换，则会触发异常。</p> <p>注意，程序中的每个变量都用到了 <code>b</code> 转换。虽然它对各种类型都是合法的，但其行为却不一定与你想象的一致。对于 <code>boolean</code> 基本类型或 <code>Boolean</code> 对象，其转换结果是对应的 <code>true</code> 或 <code>false</code>。但是，对其他类型的参数，只要该参数不为 <code>null</code>，其转换结果永远都是 <code>true</code>。即使是数字 0，转换结果依然为 <code>true</code>，而这在其他语言中（包括C），往往转换为 <code>false</code>。所以，将 <code>b</code> 应用于非布尔类型的对象时请格外小心。</p> <p>还有许多不常用的类型转换与格式修饰符选项，你可以在 JDK 文档中的 <code>Formatter</code> 类部分找到它们。</p> <h3 id=stringformat><code>String.format()</code><a class=headerlink href=#stringformat title="Permanent link">#</a></h3> <p>Java SE5 也参考了 C 中的 <code>sprintf()</code> 方法，以生成格式化的 <code>String</code> 对象。<code>String.format()</code> 是一个 <code>static</code> 方法，它接受与 <code>Formatter.format()</code> 方法一样的参数，但返回一个 <code>String</code> 对象。当你只需使用一次 <code>format()</code> 方法的时候，<code>String.format()</code> 用起来很方便。例如： <div class=highlight><pre><span></span><code><span class=c1>// strings/DatabaseException.java </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>DatabaseException</span> <span class=kd>extends</span> <span class=n>Exception</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=nf>DatabaseException</span><span class=p>(</span><span class=kt>int</span> <span class=n>transactionID</span><span class=p>,</span>     
      <span class=kt>int</span> <span class=n>queryID</span><span class=p>,</span> <span class=n>String</span> <span class=n>message</span><span class=p>)</span> <span class=p>{</span>     
      <span class=kd>super</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;(t%d, q%d) %s&quot;</span><span class=p>,</span> <span class=n>transactionID</span><span class=p>,</span>         
        <span class=n>queryID</span><span class=p>,</span> <span class=n>message</span><span class=p>));</span>   
    <span class=p>}</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
      <span class=k>try</span> <span class=p>{</span>       
        <span class=k>throw</span> <span class=k>new</span> <span class=n>DatabaseException</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=s>&quot;Write failed&quot;</span><span class=p>);</span>     
      <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>Exception</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>       
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>     
      <span class=p>}</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* </span>
<span class=cm>Output: </span>
<span class=cm>DatabaseException: (t3, q7) Write failed </span>
<span class=cm>*/</span>
</code></pre></div> 其实在 <code>String.format()</code> 内部，它也是创建了一个 <code>Formatter</code> 对象，然后将你传入的参数转给 <code>Formatter</code>。不过，与其自己做这些事情，不如使用便捷的 <code>String.format()</code> 方法，何况这样的代码更清晰易读。</p> <h4 id=dump>一个十六进制转储（dump）工具<a class=headerlink href=#dump title="Permanent link">#</a></h4> <p>在第二个例子中，我们把二进制文件转换为十六进制格式。下面的小工具使用了 <code>String.format()</code> 方法，以可读的十六进制格式将字节数组打印出来： <div class=highlight><pre><span></span><code><span class=c1>// strings/Hex.java </span>
<span class=c1>// {java onjava.Hex} </span>
<span class=kn>package</span> <span class=nn>onjava</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Hex</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>format</span><span class=p>(</span><span class=kt>byte</span><span class=o>[]</span> <span class=n>data</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>StringBuilder</span> <span class=n>result</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=p>();</span>     
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>     
        <span class=k>for</span><span class=p>(</span><span class=kt>byte</span> <span class=n>b</span> <span class=p>:</span> <span class=n>data</span><span class=p>)</span> <span class=p>{</span>       
            <span class=k>if</span><span class=p>(</span><span class=n>n</span> <span class=o>%</span> <span class=mi>16</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>         
                <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%05X: &quot;</span><span class=p>,</span> <span class=n>n</span><span class=p>));</span>       
            <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;%02X &quot;</span><span class=p>,</span> <span class=n>b</span><span class=p>));</span>       
            <span class=n>n</span><span class=o>++</span><span class=p>;</span>       
            <span class=k>if</span><span class=p>(</span><span class=n>n</span> <span class=o>%</span> <span class=mi>16</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;\n&quot;</span><span class=p>);</span>     
        <span class=p>}</span>     
        <span class=n>result</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;\n&quot;</span><span class=p>);</span>     
        <span class=k>return</span> <span class=n>result</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span>   
    <span class=p>}</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>  
        <span class=k>if</span><span class=p>(</span><span class=n>args</span><span class=p>.</span><span class=na>length</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>       
            <span class=c1>// Test by displaying this class file:       </span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>format</span><span class=p>(</span>         
                <span class=n>Files</span><span class=p>.</span><span class=na>readAllBytes</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span>           
                  <span class=s>&quot;build/classes/main/onjava/Hex.class&quot;</span><span class=p>))));</span>     
        <span class=k>else</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>format</span><span class=p>(</span>         
                <span class=n>Files</span><span class=p>.</span><span class=na>readAllBytes</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>args</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>))));</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: (First 6 Lines) </span>
<span class=cm>00000: CA FE BA BE 00 00 00 34 00 61 0A 00 05 00 31 07 </span>
<span class=cm>00010: 00 32 0A 00 02 00 31 08 00 33 07 00 34 0A 00 35 </span>
<span class=cm>00020: 00 36 0A 00 0F 00 37 0A 00 02 00 38 08 00 39 0A </span>
<span class=cm>00030: 00 3A 00 3B 08 00 3C 0A 00 02 00 3D 09 00 3E 00 </span>
<span class=cm>00040: 3F 08 00 40 07 00 41 0A 00 42 00 43 0A 00 44 00 </span>
<span class=cm>00050: 45 0A 00 14 00 46 0A 00 47 00 48 07 00 49 01 00</span>
<span class=cm>                  ... </span>
<span class=cm>*/</span>
</code></pre></div> 为了打开及读入二进制文件，我们用到了另一个工具 <code>Files.readAllBytes()</code>，这已经在 <a href=../17-Files/ >Files章节</a> 介绍过了。这里的 <code>readAllBytes()</code> 方法将整个文件以 <code>byte</code> 数组的形式返回。</p> <!-- Regular Expressions --> <h2 id=_7>正则表达式<a class=headerlink href=#_7 title="Permanent link">#</a></h2> <p>很久之前，<em>正则表达式</em>就已经整合到标准 Unix 工具集之中，例如 sed、awk 和程序语言之中了，如 Python 和Perl（有些人认为正是正则表达式促成了 Perl 的成功）。而在 Java 中，字符串操作还主要集中于<code>String</code>、<code>StringBuffer</code> 和 <code>StringTokenizer</code> 类。与正则表达式相比较，它们只能提供相当简单的功能。</p> <p>正则表达式是一种强大而灵活的文本处理工具。使用正则表达式，我们能够以编程的方式，构造复杂的文本模式，并对输入 <code>String</code> 进行搜索。一旦找到了匹配这些模式的部分，你就能随心所欲地对它们进行处理。初学正则表达式时，其语法是一个难点，但它确实是一种简洁、动态的语言。正则表达式提供了一种完全通用的方式，能够解决各种 <code>String</code> 处理相关的问题：匹配、选择、编辑以及验证。</p> <h3 id=_8>基础<a class=headerlink href=#_8 title="Permanent link">#</a></h3> <p>一般来说，正则表达式就是以某种方式来描述字符串，因此你可以说：“如果一个字符串含有这些东西，那么它就是我正在找的东西。”例如，要找一个数字，它可能有一个负号在最前面，那你就写一个负号加上一个问号，就像这样： <div class=highlight><pre><span></span><code><span class=o>-?</span>
</code></pre></div> 要描述一个整数，你可以说它有一位或多位阿拉伯数字。在正则表达式中，用 <code>\d</code> 表示一位数字。如果在其他语言中使用过正则表达式，那你可能就能发现 Java 对反斜线 的不同处理方式。在其他语言中，<code>\\</code> 表示“我想要在正则表达式中插入一个普通的（字面上的）反斜线，请不要给它任何特殊的意义。”而在Java中，<code>\\</code> 的意思是“我要插入一个正则表达式的反斜线，所以其后的字符具有特殊的意义。”例如，如果你想表示一位数字，那么正则表达式应该是 <code>\\d</code>。如果你想插入一个普通的反斜线，应该这样写 <code>\\\</code>。不过换行符和制表符之类的东西只需要使用单反斜线：<code>\n\t</code>。 <sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup></p> <p>要表示“一个或多个之前的表达式”，应该使用 <code>+</code>。所以，如果要表示“可能有一个负号，后面跟着一位或多位数字”，可以这样： <div class=highlight><pre><span></span><code><span class=o>-?</span><span class=err>\\</span><span class=n>d</span><span class=o>+</span> 
</code></pre></div> 应用正则表达式最简单的途径，就是利用 <code>String</code> 类内建的功能。例如，你可以检查一个 <code>String</code> 是否匹配如上所述的正则表达式： <div class=highlight><pre><span></span><code><span class=c1>// strings/IntegerMatch.java </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>IntegerMatch</span> <span class=p>{</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;-1234&quot;</span><span class=p>.</span><span class=na>matches</span><span class=p>(</span><span class=s>&quot;-?\\d+&quot;</span><span class=p>));</span>    
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;5678&quot;</span><span class=p>.</span><span class=na>matches</span><span class=p>(</span><span class=s>&quot;-?\\d+&quot;</span><span class=p>));</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;+911&quot;</span><span class=p>.</span><span class=na>matches</span><span class=p>(</span><span class=s>&quot;-?\\d+&quot;</span><span class=p>));</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;+911&quot;</span><span class=p>.</span><span class=na>matches</span><span class=p>(</span><span class=s>&quot;(-|\\+)?\\d+&quot;</span><span class=p>));</span>   
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>true </span>
<span class=cm>true </span>
<span class=cm>false </span>
<span class=cm>true </span>
<span class=cm>*/</span> 
</code></pre></div> 前两个字符串都满足对应的正则表达式，匹配成功。第三个字符串以 <code>+</code> 开头，这也是一个合法的符号，但与对应的正则表达式却不匹配。因此，我们的正则表达式应该描述为：“可能以一个加号或减号开头”。在正则表达式中，用括号将表达式进行分组，用竖线 <code>|</code> 表示或操作。也就是： <div class=highlight><pre><span></span><code><span class=p>(</span><span class=o>-|</span><span class=err>\\</span><span class=o>+</span><span class=p>)</span><span class=o>?</span> 
</code></pre></div> 这个正则表达式表示字符串的起始字符可能是一个 <code>-</code> 或 <code>+</code>，或者二者都没有（因为后面跟着 <code>?</code> 修饰符）。因为字符 <code>+</code> 在正则表达式中有特殊的意义，所以必须使用 <code>\\</code> 将其转义，使之成为表达式中的一个普通字符。</p> <p><code>String</code>类还自带了一个非常有用的正则表达式工具——<code>split()</code> 方法，其功能是“将字符串从正则表达式匹配的地方切开。”</p> <p><div class=highlight><pre><span></span><code><span class=c1>// strings/Splitting.java import java.util.*; </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Splitting</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=n>knights</span> <span class=o>=</span>   
      <span class=s>&quot;Then, when you have found the shrubbery, &quot;</span> <span class=o>+</span>
      <span class=s>&quot;you must cut down the mightiest tree in the &quot;</span> <span class=o>+</span>
      <span class=s>&quot;forest...with... a herring!&quot;</span><span class=p>;</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>split</span><span class=p>(</span><span class=n>String</span> <span class=n>regex</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>
          <span class=n>Arrays</span><span class=p>.</span><span class=na>toString</span><span class=p>(</span><span class=n>knights</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=n>regex</span><span class=p>)));</span>
        <span class=p>}</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>split</span><span class=p>(</span><span class=s>&quot; &quot;</span><span class=p>);</span> <span class=c1>// Doesn&#39;t have to contain regex chars</span>
        <span class=n>split</span><span class=p>(</span><span class=s>&quot;\\W+&quot;</span><span class=p>);</span> <span class=c1>// Non-word characters</span>
        <span class=n>split</span><span class=p>(</span><span class=s>&quot;n\\W+&quot;</span><span class=p>);</span> <span class=c1>// &#39;n&#39; followed by non-words</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>[Then,, when, you, have, found, the, shrubbery,, you,</span>
<span class=cm>must, cut, down, the, mightiest, tree, in, the,</span>
<span class=cm>forest...with..., a, herring!]</span>
<span class=cm>[Then, when, you, have, found, the, shrubbery, you,</span>
<span class=cm>must, cut, down, the, mightiest, tree, in, the, forest,</span>
<span class=cm>with, a, herring]</span>
<span class=cm>[The, whe, you have found the shrubbery, you must cut</span>
<span class=cm>dow, the mightiest tree i, the forest...with... a</span>
<span class=cm>herring!]</span>
<span class=cm>*/</span>
</code></pre></div> 首先看第一个语句，注意这里用的是普通的字符作为正则表达式，其中并不包含任何特殊字符。因此第一个 <code>split()</code> 只是按空格来划分字符串。</p> <p>第二个和第三个 <code>split()</code> 都用到了 <code>\\W</code>，它的意思是一个非单词字符（如果 W 小写，<code>\\w</code>，则表示一个单词字符）。通过第二个例子可以看到，它将标点字符删除了。第三个 <code>split()</code> 表示“字母 <code>n</code> 后面跟着一个或多个非单词字符。”可以看到，在原始字符串中，与正则表达式匹配的部分，在最终结果中都不存在了。</p> <p><code>String.split()</code> 还有一个重载的版本，它允许你限制字符串分割的次数。</p> <p>用正则表达式进行替换操作时，你可以只替换第一处匹配，也可以替换所有的匹配： <div class=highlight><pre><span></span><code><span class=c1>// strings/Replacing.java </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Replacing</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=n>Splitting</span><span class=p>.</span><span class=na>knights</span><span class=p>;</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>
          <span class=n>s</span><span class=p>.</span><span class=na>replaceFirst</span><span class=p>(</span><span class=s>&quot;f\\w+&quot;</span><span class=p>,</span> <span class=s>&quot;located&quot;</span><span class=p>));</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>       
          <span class=n>s</span><span class=p>.</span><span class=na>replaceAll</span><span class=p>(</span><span class=s>&quot;shrubbery|tree|herring&quot;</span><span class=p>,</span><span class=s>&quot;banana&quot;</span><span class=p>));</span>   
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>Then, when you have located the shrubbery, you must cut </span>
<span class=cm>down the mightiest tree in the forest...with... a </span>
<span class=cm>herring! </span>
<span class=cm>Then, when you have found the banana, you must cut down</span>
<span class=cm>the mightiest banana in the forest...with... a banana! </span>
<span class=cm>*/</span>
</code></pre></div> 第一个表达式要匹配的是，以字母 <code>f</code> 开头，后面跟一个或多个字母（注意这里的 <code>w</code> 是小写的）。并且只替换掉第一个匹配的部分，所以 “found” 被替换成 “located”。</p> <p>第二个表达式要匹配的是三个单词中的任意一个，因为它们以竖线分割表示“或”，并且替换所有匹配的部分。</p> <p>稍后你会看到，<code>String</code> 之外的正则表达式还有更强大的替换工具，例如，可以通过方法调用执行替换。而且，如果正则表达式不是只使用一次的话，非 <code>String</code> 对象的正则表达式明显具备更佳的性能。</p> <h3 id=_9>创建正则表达式<a class=headerlink href=#_9 title="Permanent link">#</a></h3> <p>我们首先从正则表达式可能存在的构造集中选取一个很有用的子集，以此开始学习正则表达式。正则表达式的完整构造子列表，请参考JDK文档 <code>java.util.regex</code> 包中的 <code>Pattern</code>类。</p> <table> <thead> <tr> <th align=left>表达式</th> <th align=left>含义</th> </tr> </thead> <tbody> <tr> <td align=left><code>B</code></td> <td align=left>指定字符<code>B</code></td> </tr> <tr> <td align=left><code>\xhh</code></td> <td align=left>十六进制值为<code>0xhh</code>的字符</td> </tr> <tr> <td align=left><code>\uhhhh</code></td> <td align=left>十六进制表现为<code>0xhhhh</code>的Unicode字符</td> </tr> <tr> <td align=left><code>\t</code></td> <td align=left>制表符Tab</td> </tr> <tr> <td align=left><code>\n</code></td> <td align=left>换行符</td> </tr> <tr> <td align=left><code>\r</code></td> <td align=left>回车</td> </tr> <tr> <td align=left><code>\f</code></td> <td align=left>换页</td> </tr> <tr> <td align=left><code>\e</code></td> <td align=left>转义（Escape）</td> </tr> </tbody> </table> <p>当你学会了使用字符类（character classes）之后，正则表达式的威力才能真正显现出来。以下是一些创建字符类的典型方式，以及一些预定义的类：</p> <table> <thead> <tr> <th align=left>表达式</th> <th align=left>含义</th> </tr> </thead> <tbody> <tr> <td align=left><code>.</code></td> <td align=left>任意字符</td> </tr> <tr> <td align=left><code>[abc]</code></td> <td align=left>包含<code>a</code>、<code>b</code>或<code>c</code>的任何字符（和<code>a\|b\|c</code>作用相同）</td> </tr> <tr> <td align=left><code>[^abc]</code></td> <td align=left>除<code>a</code>、<code>b</code>和<code>c</code>之外的任何字符（否定）</td> </tr> <tr> <td align=left><code>[a-zA-Z]</code></td> <td align=left>从<code>a</code>到<code>z</code>或从<code>A</code>到<code>Z</code>的任何字符（范围）</td> </tr> <tr> <td align=left><code>[abc[hij]]</code></td> <td align=left><code>a</code>、<code>b</code>、<code>c</code>、<code>h</code>、<code>i</code>、<code>j</code>中的任意字符（与<code>a\|b\|c\|h\|i\|j</code>作用相同）（合并）</td> </tr> <tr> <td align=left><code>[a-z&amp;&amp;[hij]]</code></td> <td align=left>任意<code>h</code>、<code>i</code>或<code>j</code>（交）</td> </tr> <tr> <td align=left><code>\s</code></td> <td align=left>空白符（空格、tab、换行、换页、回车）</td> </tr> <tr> <td align=left><code>\S</code></td> <td align=left>非空白符（<code>[^\s]</code>）</td> </tr> <tr> <td align=left><code>\d</code></td> <td align=left>数字（<code>[0-9]</code>）</td> </tr> <tr> <td align=left><code>\D</code></td> <td align=left>非数字（<code>[^0-9]</code>）</td> </tr> <tr> <td align=left><code>\w</code></td> <td align=left>词字符（<code>[a-zA-Z_0-9]</code>）</td> </tr> <tr> <td align=left><code>\W</code></td> <td align=left>非词字符（<code>[^\w]</code>）</td> </tr> </tbody> </table> <p>这里只列出了部分常用的表达式，你应该将JDK文档中 <code>java.util.regex.Pattern</code> 那一页加入浏览器书签中，以便在需要的时候方便查询。</p> <table> <thead> <tr> <th align=center>逻辑操作符</th> <th align=left>含义</th> </tr> </thead> <tbody> <tr> <td align=center><code>XY</code></td> <td align=left><code>Y</code>跟在<code>X</code>后面</td> </tr> <tr> <td align=center><code>X\|Y</code></td> <td align=left><code>X</code>或<code>Y</code></td> </tr> <tr> <td align=center><code>(X)</code></td> <td align=left>捕获组（capturing group）。可以在表达式中用<code>\i</code>引用第i个捕获组</td> </tr> </tbody> </table> <p>下面是不同的边界匹配符：</p> <table> <thead> <tr> <th align=center>边界匹配符</th> <th align=left>含义</th> </tr> </thead> <tbody> <tr> <td align=center><code>^</code></td> <td align=left>一行的开始</td> </tr> <tr> <td align=center><code>$</code></td> <td align=left>一行的结束</td> </tr> <tr> <td align=center><code>\b</code></td> <td align=left>词的边界</td> </tr> <tr> <td align=center><code>\B</code></td> <td align=left>非词的边界</td> </tr> <tr> <td align=center><code>\G</code></td> <td align=left>前一个匹配的结束</td> </tr> </tbody> </table> <p>作为演示，下面的每一个正则表达式都能成功匹配字符序列“Rudolph”： <div class=highlight><pre><span></span><code><span class=c1>// strings/Rudolph.java </span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Rudolph</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>pattern</span> <span class=p>:</span> <span class=k>new</span> <span class=n>String</span><span class=o>[]</span><span class=p>{</span>       
          <span class=s>&quot;Rudolph&quot;</span><span class=p>,</span>       
          <span class=s>&quot;[rR]udolph&quot;</span><span class=p>,</span>       
          <span class=s>&quot;[rR][aeiou][a-z]ol.*&quot;</span><span class=p>,</span>       
          <span class=s>&quot;R.*&quot;</span> <span class=p>})</span>       
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Rudolph&quot;</span><span class=p>.</span><span class=na>matches</span><span class=p>(</span><span class=n>pattern</span><span class=p>));</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>true </span>
<span class=cm>true </span>
<span class=cm>true </span>
<span class=cm>true </span>
<span class=cm>*/</span>
</code></pre></div> 我们的目的并不是编写最难理解的正则表达式，而是尽量编写能够完成任务的、最简单以及最必要的正则表达式。一旦真正开始使用正则表达式了，你就会发现，在编写新的表达式之前，你通常会参考代码中已经用到的正则表达式。</p> <h3 id=_10>量词<a class=headerlink href=#_10 title="Permanent link">#</a></h3> <p>量词描述了一个模式捕获输入文本的方式：</p> <ul> <li> <p><strong>贪婪型</strong>： 量词总是贪婪的，除非有其他的选项被设置。贪婪表达式会为所有可能的模式发现尽可能多的匹配。导致此问题的一个典型理由就是假定我们的模式仅能匹配第一个可能的字符组，如果它是贪婪的，那么它就会继续往下匹配。</p> </li> <li> <p><strong>勉强型</strong>： 用问号来指定，这个量词匹配满足模式所需的最少字符数。因此也被称作懒惰的、最少匹配的、非贪婪的或不贪婪的。</p> </li> <li> <p><strong>占有型</strong>： 目前，这种类型的量词只有在 Java 语言中才可用（在其他语言中不可用），并且也更高级，因此我们大概不会立刻用到它。当正则表达式被应用于 <code>String</code> 时，它会产生相当多的状态，以便在匹配失败时可以回溯。而“占有的”量词并不保存这些中间状态，因此它们可以防止回溯。它们常常用于防止正则表达式失控，因此可以使正则表达式执行起来更高效。</p> </li> </ul> <table> <thead> <tr> <th>贪婪型</th> <th>勉强型</th> <th>占有型</th> <th>如何匹配</th> </tr> </thead> <tbody> <tr> <td><code>X?</code></td> <td><code>X??</code></td> <td><code>X?+</code></td> <td>一个或零个<code>X</code></td> </tr> <tr> <td><code>X*</code></td> <td><code>X*?</code></td> <td><code>X*+</code></td> <td>零个或多个<code>X</code></td> </tr> <tr> <td><code>X+</code></td> <td><code>X+?</code></td> <td><code>X++</code></td> <td>一个或多个<code>X</code></td> </tr> <tr> <td><code>X{n}</code></td> <td><code>X{n}?</code></td> <td><code>X{n}+</code></td> <td>恰好<code>n</code>次<code>X</code></td> </tr> <tr> <td><code>X{n,}</code></td> <td><code>X{n,}?</code></td> <td><code>X{n,}+</code></td> <td>至少<code>n</code>次<code>X</code></td> </tr> <tr> <td><code>X{n,m}</code></td> <td><code>X{n,m}?</code></td> <td><code>X{n,m}+</code></td> <td><code>X</code>至少<code>n</code>次，但不超过<code>m</code>次</td> </tr> </tbody> </table> <p>应该非常清楚地意识到，表达式 <code>X</code> 通常必须要用圆括号括起来，以便它能够按照我们期望的效果去执行。例如： <div class=highlight><pre><span></span><code><span class=n>abc</span><span class=o>+</span>
</code></pre></div> 看起来它似乎应该匹配1个或多个<code>abc</code>序列，如果我们把它应用于输入字符串<code>abcabcabc</code>，则实际上会获得3个匹配。然而，这个表达式实际上表示的是：匹配<code>ab</code>，后面跟随1个或多个<code>c</code>。要表明匹配1个或多个完整的字符串<code>abc</code>，我们必须这样表示： <div class=highlight><pre><span></span><code><span class=p>(</span><span class=n>abc</span><span class=p>)</span><span class=o>+</span>
</code></pre></div> 你会发现，在使用正则表达式时很容易混淆，因为它是一种在 Java 之上的新语言。</p> <h3 id=charsequence><code>CharSequence</code><a class=headerlink href=#charsequence title="Permanent link">#</a></h3> <p>接口 <code>CharSequence</code> 从 <code>CharBuffer</code>、<code>String</code>、<code>StringBuffer</code>、<code>StringBuilder</code> 类中抽象出了字符序列的一般化定义： <div class=highlight><pre><span></span><code><span class=kd>interface</span> <span class=nc>CharSequence</span> <span class=p>{</span>   
    <span class=kt>char</span> <span class=nf>charAt</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>);</span>   
    <span class=kt>int</span> <span class=nf>length</span><span class=p>();</span>
    <span class=n>CharSequence</span> <span class=nf>subSequence</span><span class=p>(</span><span class=kt>int</span> <span class=n>start</span><span class=p>,</span> <span class=kt>int</span> <span class=n>end</span><span class=p>);</span>
    <span class=n>String</span> <span class=nf>toString</span><span class=p>();</span> 
<span class=p>}</span>
</code></pre></div> 因此，这些类都实现了该接口。多数正则表达式操作都接受 <code>CharSequence</code> 类型参数。</p> <h3 id=pattern-matcher><code>Pattern</code> 和 <code>Matcher</code><a class=headerlink href=#pattern-matcher title="Permanent link">#</a></h3> <p>通常，比起功能有限的 <code>String</code> 类，我们更愿意构造功能强大的正则表达式对象。只需导入 <code>java.util.regex</code>包，然后用 <code>static Pattern.compile()</code> 方法来编译你的正则表达式即可。它会根据你的 <code>String</code> 类型的正则表达式生成一个 <code>Pattern</code> 对象。接下来，把你想要检索的字符串传入 <code>Pattern</code> 对象的 <code>matcher()</code> 方法。<code>matcher()</code> 方法会生成一个 <code>Matcher</code> 对象，它有很多功能可用（可以参考 <code>java.util.regext.Matcher</code> 的 JDK 文档）。例如，它的 <code>replaceAll()</code> 方法能将所有匹配的部分都替换成你传入的参数。</p> <p>作为第一个示例，下面的类可以用来测试正则表达式，看看它们能否匹配一个输入字符串。第一个控制台参数是将要用来搜索匹配的输入字符串，后面的一个或多个参数都是正则表达式，它们将被用来在输入的第一个字符串中查找匹配。在Unix/Linux上，命令行中的正则表达式必须用引号括起来。这个程序在测试正则表达式时很有用，特别是当你想验证它们是否具备你所期待的匹配功能的时候。<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> <div class=highlight><pre><span></span><code><span class=c1>// strings/TestRegularExpression.java </span>
<span class=c1>// Simple regular expression demonstration </span>
<span class=c1>// {java TestRegularExpression </span>
<span class=c1>// abcabcabcdefabc &quot;abc+&quot; &quot;(abc)+&quot; } </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TestRegularExpression</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=k>if</span><span class=p>(</span><span class=n>args</span><span class=p>.</span><span class=na>length</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>     
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>       
              <span class=s>&quot;Usage:\njava TestRegularExpression &quot;</span> <span class=o>+</span>         
              <span class=s>&quot;characterSequence regularExpression+&quot;</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>    
        <span class=p>}</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Input: \&quot;&quot;</span> <span class=o>+</span> <span class=n>args</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span> <span class=o>+</span> <span class=s>&quot;\&quot;&quot;</span><span class=p>);</span>     
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>arg</span> <span class=p>:</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>         
              <span class=s>&quot;Regular expression: \&quot;&quot;</span> <span class=o>+</span> <span class=n>arg</span> <span class=o>+</span> <span class=s>&quot;\&quot;&quot;</span><span class=p>);</span>       
            <span class=n>Pattern</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=n>arg</span><span class=p>);</span>       
            <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=n>args</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>);</span>       
            <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span> <span class=p>{</span>         
                <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>           
                  <span class=s>&quot;Match \&quot;&quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot;\&quot; at positions &quot;</span> <span class=o>+</span>           
                <span class=n>m</span><span class=p>.</span><span class=na>start</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot;-&quot;</span> <span class=o>+</span> <span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>end</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>));</span>       
            <span class=p>}</span>     
        <span class=p>}</span>  
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>Input: &quot;abcabcabcdefabc&quot; </span>
<span class=cm>Regular expression: &quot;abcabcabcdefabc&quot; </span>
<span class=cm>Match &quot;abcabcabcdefabc&quot; at positions 0-14 </span>
<span class=cm>Regular expression: &quot;abc+&quot; </span>
<span class=cm>Match &quot;abc&quot; at positions 0-2 </span>
<span class=cm>Match &quot;abc&quot; at positions 3-5 </span>
<span class=cm>Match &quot;abc&quot; at positions 6-8 </span>
<span class=cm>Match &quot;abc&quot; at positions 12-14 </span>
<span class=cm>Regular expression: &quot;(abc)+&quot;</span>
<span class=cm>Match &quot;abcabcabc&quot; at positions 0-8 </span>
<span class=cm>Match &quot;abc&quot; at positions 12-14 </span>
<span class=cm>*/</span>
</code></pre></div> 还可以在控制台参数中加入<code>“(abc){2,}”</code>，看看执行结果。</p> <p><code>Pattern</code> 对象表示编译后的正则表达式。从这个例子可以看到，我们使用已编译的 <code>Pattern</code> 对象上的 <code>matcher()</code> 方法，加上一个输入字符串，从而共同构造了一个 <code>Matcher</code> 对象。同时，<code>Pattern</code> 类还提供了一个<code>static</code>方法：</p> <p><div class=highlight><pre><span></span><code><span class=kd>static</span> <span class=kt>boolean</span> <span class=nf>matches</span><span class=p>(</span><span class=n>String</span> <span class=n>regex</span><span class=p>,</span> <span class=n>CharSequence</span> <span class=n>input</span><span class=p>)</span>
</code></pre></div> 该方法用以检查 <code>regex</code> 是否匹配整个 <code>CharSequence</code> 类型的 <code>input</code> 参数。编译后的 <code>Pattern</code> 对象还提供了 <code>split()</code> 方法，它从匹配了 <code>regex</code> 的地方分割输入字符串，返回分割后的子字符串 <code>String</code> 数组。</p> <p>通过调用 <code>Pattern.matcher()</code> 方法，并传入一个字符串参数，我们得到了一个 <code>Matcher</code> 对象。使用 <code>Matcher</code> 上的方法，我们将能够判断各种不同类型的匹配是否成功： <div class=highlight><pre><span></span><code><span class=kt>boolean</span> <span class=nf>matches</span><span class=p>()</span> 
<span class=kt>boolean</span> <span class=nf>lookingAt</span><span class=p>()</span> 
<span class=kt>boolean</span> <span class=nf>find</span><span class=p>()</span> 
<span class=kt>boolean</span> <span class=nf>find</span><span class=p>(</span><span class=kt>int</span> <span class=n>start</span><span class=p>)</span>
</code></pre></div> 其中的 <code>matches()</code> 方法用来判断整个输入字符串是否匹配正则表达式模式，而 <code>lookingAt()</code> 则用来判断该字符串（不必是整个字符串）的起始部分是否能够匹配模式。</p> <h3 id=find><code>find()</code><a class=headerlink href=#find title="Permanent link">#</a></h3> <p><code>Matcher.find()</code> 方法可用来在 <code>CharSequence</code> 中查找多个匹配。例如：</p> <p><div class=highlight><pre><span></span><code><span class=c1>// strings/Finding.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Finding</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;\\w+&quot;</span><span class=p>)</span>       
          <span class=p>.</span><span class=na>matcher</span><span class=p>(</span>         
            <span class=s>&quot;Evening is full of the linnet&#39;s wings&quot;</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>   
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>();</span>     
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>i</span><span class=p>))</span> <span class=p>{</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>       
            <span class=n>i</span><span class=o>++</span><span class=p>;</span>     
        <span class=p>}</span>   
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>Evening is full of the linnet s wings</span>
<span class=cm>Evening vening ening ning ing ng g is is s full full </span>
<span class=cm>ull ll l of of f the the he e linnet linnet innet nnet </span>
<span class=cm>net et t s s wings wings ings ngs gs s </span>
<span class=cm>*/</span>
</code></pre></div> 模式 <code>\\w+</code> 将字符串划分为词。<code>find()</code> 方法像迭代器那样向前遍历输入字符串。而第二个重载的 <code>find()</code> 接收一个整型参数，该整数表示字符串中字符的位置，并以其作为搜索的起点。从结果可以看出，后一个版本的 <code>find()</code> 方法能够根据其参数的值，不断重新设定搜索的起始位置。</p> <h3 id=groups>组（Groups）<a class=headerlink href=#groups title="Permanent link">#</a></h3> <p>组是用括号划分的正则表达式，可以根据组的编号来引用某个组。组号为 0 表示整个表达式，组号 1 表示被第一对括号括起来的组，以此类推。因此，下面这个表达式， <div class=highlight><pre><span></span><code><span class=n>A</span><span class=p>(</span><span class=n>B</span><span class=p>(</span><span class=n>C</span><span class=p>))</span><span class=n>D</span>
</code></pre></div> 中有三个组：组 0 是 <code>ABCD</code>，组 1 是 <code>BC</code>，组 2 是 <code>C</code>。</p> <p><code>Matcher</code> 对象提供了一系列方法，用以获取与组相关的信息：</p> <ul> <li><code>public int groupCount()</code> 返回该匹配器的模式中的分组数目，组 0 不包括在内。</li> <li><code>public String group()</code> 返回前一次匹配操作（例如 <code>find()</code>）的第 0 组（整个匹配）。</li> <li><code>public String group(int i)</code> 返回前一次匹配操作期间指定的组号，如果匹配成功，但是指定的组没有匹配输入字符串的任何部分，则将返回 <code>null</code>。</li> <li><code>public int start(int group)</code> 返回在前一次匹配操作中寻找到的组的起始索引。</li> <li><code>public int end(int group)</code> 返回在前一次匹配操作中寻找到的组的最后一个字符索引加一的值。</li> </ul> <p>下面是正则表达式组的例子： <div class=highlight><pre><span></span><code><span class=c1>// strings/Groups.java</span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Groups</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>POEM</span> <span class=o>=</span>     
      <span class=s>&quot;Twas brillig, and the slithy toves\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;Did gyre and gimble in the wabe.\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;All mimsy were the borogoves,\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;And the mome raths outgrabe.\n\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;Beware the Jabberwock, my son,\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;The jaws that bite, the claws that catch.\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;Beware the Jubjub bird, and shun\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;The frumious Bandersnatch.&quot;</span><span class=p>;</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span>
          <span class=s>&quot;(?m)(\\S+)\\s+((\\S+)\\s+(\\S+))$&quot;</span><span class=p>)</span>       
          <span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=n>POEM</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span> <span class=p>{</span>       
            <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>.</span><span class=na>groupCount</span><span class=p>();</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span>         
                <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=s>&quot;[&quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>(</span><span class=n>j</span><span class=p>)</span> <span class=o>+</span> <span class=s>&quot;]&quot;</span><span class=p>);</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>();</span>     
        <span class=p>}</span>   
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>[the slithy toves][the][slithy toves][slithy][toves] </span>
<span class=cm>[in the wabe.][in][the wabe.][the][wabe.] </span>
<span class=cm>[were the borogoves,][were][the </span>
<span class=cm>borogoves,][the][borogoves,] </span>
<span class=cm>[mome raths outgrabe.][mome][raths </span>
<span class=cm>outgrabe.][raths][outgrabe.] </span>
<span class=cm>[Jabberwock, my son,][Jabberwock,][my son,][my][son,] </span>
<span class=cm>[claws that catch.][claws][that catch.][that][catch.] </span>
<span class=cm>[bird, and shun][bird,][and shun][and][shun] </span>
<span class=cm>[The frumious Bandersnatch.][The][frumious </span>
<span class=cm>Bandersnatch.][frumious][Bandersnatch.] </span>
<span class=cm>*/</span>
</code></pre></div> 这首诗来自于 Lewis Carroll 所写的 <em>Through the Looking Glass</em> 中的 “Jabberwocky”。可以看到这个正则表达式模式有许多圆括号分组，由任意数目的非空白符（<code>\\S+</code>）及随后的任意数目的空白符（<code>\\s+</code>）所组成。目的是捕获每行的最后3个词，每行最后以 <code>\$</code> 结束。不过，在正常情况下是将 <code>\$</code> 与整个输入序列的末端相匹配。所以我们一定要显式地告知正则表达式注意输入序列中的换行符。这可以由序列开头的模式标记 <code>(?m)</code> 来完成（模式标记马上就会介绍）。</p> <h3 id=start-end><code>start()</code> 和 <code>end()</code><a class=headerlink href=#start-end title="Permanent link">#</a></h3> <p>在匹配操作成功之后，<code>start()</code> 返回先前匹配的起始位置的索引，而 <code>end()</code> 返回所匹配的最后字符的索引加一的值。匹配操作失败之后（或先于一个正在进行的匹配操作去尝试）调用 <code>start()</code> 或 <code>end()</code> 将会产生 <code>IllegalStateException</code>。下面的示例还同时展示了 <code>matches()</code> 和 <code>lookingAt()</code> 的用法 <sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup>： <div class=highlight><pre><span></span><code><span class=c1>// strings/StartEnd.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>StartEnd</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=n>input</span> <span class=o>=</span>
      <span class=s>&quot;As long as there is injustice, whenever a\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;Targathian baby cries out, wherever a distress\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;signal sounds among the stars &quot;</span> <span class=o>+</span>     
      <span class=s>&quot;... We&#39;ll be there.\n&quot;</span><span class=o>+</span>     
      <span class=s>&quot;This fine ship, and this fine crew ...\n&quot;</span> <span class=o>+</span>     
      <span class=s>&quot;Never give up! Never surrender!&quot;</span><span class=p>;</span>   
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Display</span> <span class=p>{</span>
        <span class=kd>private</span> <span class=kt>boolean</span> <span class=n>regexPrinted</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>     
        <span class=kd>private</span> <span class=n>String</span> <span class=n>regex</span><span class=p>;</span>
        <span class=n>Display</span><span class=p>(</span><span class=n>String</span> <span class=n>regex</span><span class=p>)</span> <span class=p>{</span> <span class=k>this</span><span class=p>.</span><span class=na>regex</span> <span class=o>=</span> <span class=n>regex</span><span class=p>;</span> <span class=p>}</span>     

        <span class=kt>void</span> <span class=nf>display</span><span class=p>(</span><span class=n>String</span> <span class=n>message</span><span class=p>)</span> <span class=p>{</span>       
            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>regexPrinted</span><span class=p>)</span> <span class=p>{</span>         
                <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>regex</span><span class=p>);</span>         
                <span class=n>regexPrinted</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>       
            <span class=p>}</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>message</span><span class=p>);</span>     
        <span class=p>}</span>   
    <span class=p>}</span>   

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>examine</span><span class=p>(</span><span class=n>String</span> <span class=n>s</span><span class=p>,</span> <span class=n>String</span> <span class=n>regex</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>Display</span> <span class=n>d</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Display</span><span class=p>(</span><span class=n>regex</span><span class=p>);</span>     
        <span class=n>Pattern</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=n>regex</span><span class=p>);</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>d</span><span class=p>.</span><span class=na>display</span><span class=p>(</span><span class=s>&quot;find() &#39;&quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span>         
              <span class=s>&quot;&#39; start = &quot;</span><span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>start</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; end = &quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>end</span><span class=p>());</span>     
        <span class=k>if</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>lookingAt</span><span class=p>())</span> <span class=c1>// No reset() necessary       </span>
            <span class=n>d</span><span class=p>.</span><span class=na>display</span><span class=p>(</span><span class=s>&quot;lookingAt() start = &quot;</span>         
              <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>start</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; end = &quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>end</span><span class=p>());</span>     
        <span class=k>if</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>matches</span><span class=p>())</span> <span class=c1>// No reset() necessary       </span>
            <span class=n>d</span><span class=p>.</span><span class=na>display</span><span class=p>(</span><span class=s>&quot;matches() start = &quot;</span>         
              <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>start</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; end = &quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>end</span><span class=p>());</span>   
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>in</span> <span class=p>:</span> <span class=n>input</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&quot;\n&quot;</span><span class=p>))</span> <span class=p>{</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;input : &quot;</span> <span class=o>+</span> <span class=n>in</span><span class=p>);</span>       
            <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>regex</span> <span class=p>:</span> <span class=k>new</span> <span class=n>String</span><span class=o>[]</span><span class=p>{</span><span class=s>&quot;\\w*ere\\w*&quot;</span><span class=p>,</span>         
              <span class=s>&quot;\\w*ever&quot;</span><span class=p>,</span> <span class=s>&quot;T\\w+&quot;</span><span class=p>,</span> <span class=s>&quot;Never.*?!&quot;</span><span class=p>})</span>         
                <span class=n>examine</span><span class=p>(</span><span class=n>in</span><span class=p>,</span> <span class=n>regex</span><span class=p>);</span>     
        <span class=p>}</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>input : As long as there is injustice, whenever a </span>
<span class=cm>\w*ere\w* </span>
<span class=cm>find() &#39;there&#39; start = 11 end = 16 </span>
<span class=cm>\w*ever </span>
<span class=cm>find() &#39;whenever&#39; start = 31 end = 39 </span>
<span class=cm>input : Targathian baby cries out, wherever a distress </span>
<span class=cm>\w*ere\w* </span>
<span class=cm>find() &#39;wherever&#39; start = 27 end = 35 </span>
<span class=cm>\w*ever </span>
<span class=cm>find() &#39;wherever&#39; start = 27 end = 35 </span>
<span class=cm>T\w+ find() &#39;Targathian&#39; start = 0 end = 10 </span>
<span class=cm>lookingAt() start = 0 end = 10 </span>
<span class=cm>input : signal sounds among the stars ... We&#39;ll be </span>
<span class=cm>there. </span>
<span class=cm>\w*ere\w* </span>
<span class=cm>find() &#39;there&#39; start = 43 end = 48 </span>
<span class=cm>input : This fine ship, and this fine crew ... </span>
<span class=cm>T\w+ find() &#39;This&#39; start = 0 end = 4</span>
<span class=cm>lookingAt() start = 0 end = 4 </span>
<span class=cm>input : Never give up! Never surrender! </span>
<span class=cm>\w*ever </span>
<span class=cm>find() &#39;Never&#39; start = 0 end = 5 </span>
<span class=cm>find() &#39;Never&#39; start = 15 end = 20 </span>
<span class=cm>lookingAt() start = 0 end = 5 </span>
<span class=cm>Never.*?! </span>
<span class=cm>find() &#39;Never give up!&#39; start = 0 end = 14 </span>
<span class=cm>find() &#39;Never surrender!&#39; start = 15 end = 31 </span>
<span class=cm>lookingAt() start = 0 end = 14 </span>
<span class=cm>matches() start = 0 end = 31 </span>
<span class=cm>*/</span> 
</code></pre></div> 注意，<code>find()</code> 可以在输入的任意位置定位正则表达式，而 <code>lookingAt()</code> 和 <code>matches()</code> 只有在正则表达式与输入的最开始处就开始匹配时才会成功。<code>matches()</code> 只有在整个输入都匹配正则表达式时才会成功，而 <code>lookingAt()</code> <sup id=fnref:5><a class=footnote-ref href=#fn:5>5</a></sup> 只要输入的第一部分匹配就会成功。</p> <h3 id=pattern><code>Pattern</code> 标记<a class=headerlink href=#pattern title="Permanent link">#</a></h3> <p><code>Pattern</code> 类的 <code>compile()</code> 方法还有另一个版本，它接受一个标记参数，以调整匹配行为：</p> <p><div class=highlight><pre><span></span><code><span class=n>Pattern</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=n>String</span> <span class=n>regex</span><span class=p>,</span> <span class=kt>int</span> <span class=n>flag</span><span class=p>)</span>
</code></pre></div> 其中的 <code>flag</code> 来自以下 <code>Pattern</code> 类中的常量</p> <table> <thead> <tr> <th>编译标记</th> <th>效果</th> </tr> </thead> <tbody> <tr> <td><code>Pattern.CANON_EQ</code></td> <td>当且仅当两个字符的完全规范分解相匹配时，才认为它们是匹配的。例如，如果我们指定这个标记，表达式<code>\u003F</code>就会匹配字符串<code>?</code>。默认情况下，匹配不考虑规范的等价性</td> </tr> <tr> <td><code>Pattern.CASE_INSENSITIVE(?i)</code></td> <td>默认情况下，大小写不敏感的匹配假定只有US-ASCII字符集中的字符才能进行。这个标记允许模式匹配不考虑大小写（大写或小写）。通过指定<code>UNICODE_CASE</code>标记及结合此标记。基于Unicode的大小写不敏感的匹配就可以开启了</td> </tr> <tr> <td><code>Pattern.COMMENTS(?x)</code></td> <td>在这种模式下，空格符将被忽略掉，并且以<code>#</code>开始直到行末的注释也会被忽略掉。通过嵌入的标记表达式也可以开启Unix的行模式</td> </tr> <tr> <td><code>Pattern.DOTALL(?s)</code></td> <td>在dotall模式下，表达式<code>.</code>匹配所有字符，包括行终止符。默认情况下，<code>.</code>不会匹配行终止符</td> </tr> <tr> <td><code>Pattern.MULTILINE(?m)</code></td> <td>在多行模式下，表达式<code>^</code>和<code>$</code>分别匹配一行的开始和结束。<code>^</code>还匹配输入字符串的开始，而<code>$</code>还匹配输入字符串的结尾。默认情况下，这些表达式仅匹配输入的完整字符串的开始和结束</td> </tr> <tr> <td><code>Pattern.UNICODE_CASE(?u)</code></td> <td>当指定这个标记，并且开启<code>CASE_INSENSITIVE</code>时，大小写不敏感的匹配将按照与Unicode标准相一致的方式进行。默认情况下，大小写不敏感的匹配假定只能在US-ASCII字符集中的字符才能进行</td> </tr> <tr> <td><code>Pattern.UNIX_LINES(?d)</code></td> <td>在这种模式下，在<code>.</code>、<code>^</code>和<code>$</code>的行为中，只识别行终止符<code>\n</code></td> </tr> </tbody> </table> <p>在这些标记中，<code>Pattern.CASE_INSENSITIVE</code>、<code>Pattern.MULTILINE</code> 以及 <code>Pattern.COMMENTS</code>（对声明或文档有用）特别有用。请注意，你可以直接在正则表达式中使用其中的大多数标记，只需要将上表中括号括起来的字符插入到正则表达式中，你希望它起作用的位置即可。</p> <p>你还可以通过“或”(<code>|</code>)操作符组合多个标记的功能： <div class=highlight><pre><span></span><code><span class=c1>// strings/ReFlags.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReFlags</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>Pattern</span> <span class=n>p</span> <span class=o>=</span>  <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;^java&quot;</span><span class=p>,</span>       
          <span class=n>Pattern</span><span class=p>.</span><span class=na>CASE_INSENSITIVE</span> <span class=o>|</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>MULTILINE</span><span class=p>);</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>matcher</span><span class=p>(</span>       
          <span class=s>&quot;java has regex\nJava has regex\n&quot;</span> <span class=o>+</span>       
          <span class=s>&quot;JAVA has pretty good regular expressions\n&quot;</span> <span class=o>+</span>       
          <span class=s>&quot;Regular expressions are in Java&quot;</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>());</span>   
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>java </span>
<span class=cm>Java </span>
<span class=cm>JAVA </span>
<span class=cm>*/</span>
</code></pre></div> 在这个例子中，我们创建了一个模式，它将匹配所有以“java”、“Java”和“JAVA”等开头的行，并且是在设置了多行标记的状态下，对每一行（从字符序列的第一个字符开始，至每一个行终止符）都进行匹配。注意，<code>group()</code> 方法只返回已匹配的部分。</p> <h3 id=split><code>split()</code><a class=headerlink href=#split title="Permanent link">#</a></h3> <p><code>split()</code>方法将输入 <code>String</code> 断开成 <code>String</code> 对象数组，断开边界由正则表达式确定：</p> <p><div class=highlight><pre><span></span><code><span class=n>String</span><span class=o>[]</span> <span class=nf>split</span><span class=p>(</span><span class=n>CharSequence</span> <span class=n>input</span><span class=p>)</span> 
<span class=n>String</span><span class=o>[]</span> <span class=nf>split</span><span class=p>(</span><span class=n>CharSequence</span> <span class=n>input</span><span class=p>,</span> <span class=kt>int</span> <span class=n>limit</span><span class=p>)</span>
</code></pre></div> 这是一个快速而方便的方法，可以按照通用边界断开输入文本： <div class=highlight><pre><span></span><code><span class=c1>// strings/SplitDemo.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SplitDemo</span> <span class=p>{</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>String</span> <span class=n>input</span> <span class=o>=</span>       
          <span class=s>&quot;This!!unusual use!!of exclamation!!points&quot;</span><span class=p>;</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Arrays</span><span class=p>.</span><span class=na>toString</span><span class=p>(</span>       
        <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;!!&quot;</span><span class=p>).</span><span class=na>split</span><span class=p>(</span><span class=n>input</span><span class=p>)));</span>     
        <span class=c1>// Only do the first three:     </span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Arrays</span><span class=p>.</span><span class=na>toString</span><span class=p>(</span>       
        <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;!!&quot;</span><span class=p>).</span><span class=na>split</span><span class=p>(</span><span class=n>input</span><span class=p>,</span> <span class=mi>3</span><span class=p>)));</span>   
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>[This, unusual use, of exclamation, points] </span>
<span class=cm>[This, unusual use, of exclamation!!points]</span>
<span class=cm>*/</span>
</code></pre></div> 第二种形式的 <code>split()</code> 方法可以限制将输入分割成字符串的数量。</p> <h3 id=_11>替换操作<a class=headerlink href=#_11 title="Permanent link">#</a></h3> <p>正则表达式在进行文本替换时特别方便，它提供了许多方法： + <code>replaceFirst(String replacement)</code> 以参数字符串 <code>replacement</code> 替换掉第一个匹配成功的部分。 + <code>replaceAll(String replacement)</code> 以参数字符串 <code>replacement</code> 替换所有匹配成功的部分。 + <code>appendReplacement(StringBuffer sbuf, String replacement)</code> 执行渐进式的替换，而不是像 <code>replaceFirst()</code> 和 <code>replaceAll()</code> 那样只替换第一个匹配或全部匹配。这是一个非常重要的方法。它允许你调用其他方法来生成或处理 <code>replacement</code>（<code>replaceFirst()</code> 和 <code>replaceAll()</code> 则只能使用一个固定的字符串），使你能够以编程的方式将目标分割成组，从而具备更强大的替换功能。 + <code>appendTail(StringBuffer sbuf)</code> 在执行了一次或多次 <code>appendReplacement()</code> 之后，调用此方法可以将输入字符串余下的部分复制到 <code>sbuf</code> 中。</p> <p>下面的程序演示了如何使用这些替换方法。开头部分注释掉的文本，就是正则表达式要处理的输入字符串： <div class=highlight><pre><span></span><code><span class=c1>// strings/TheReplacements.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span>

<span class=cm>/*! Here&#39;s a block of text to use as input to </span>
<span class=cm>    the regular expression matcher. Note that we </span>
<span class=cm>    first extract the block of text by looking for </span>
<span class=cm>    the special delimiters, then process the     </span>
<span class=cm>    extracted block. !*/</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TheReplacements</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>     
        <span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=n>Files</span><span class=p>.</span><span class=na>lines</span><span class=p>(</span>       
          <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;TheReplacements.java&quot;</span><span class=p>))</span>       
          <span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>joining</span><span class=p>(</span><span class=s>&quot;\n&quot;</span><span class=p>));</span>     
        <span class=c1>// Match specially commented block of text above:     </span>
        <span class=n>Matcher</span> <span class=n>mInput</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span>       
          <span class=s>&quot;/\\*!(.*)!\\*/&quot;</span><span class=p>,</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>DOTALL</span><span class=p>).</span><span class=na>matcher</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>     
        <span class=k>if</span><span class=p>(</span><span class=n>mInput</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>s</span> <span class=o>=</span> <span class=n>mInput</span><span class=p>.</span><span class=na>group</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span> <span class=c1>// Captured by parentheses     </span>
        <span class=c1>// Replace two or more spaces with a single space:     </span>
        <span class=n>s</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=na>replaceAll</span><span class=p>(</span><span class=s>&quot; {2,}&quot;</span><span class=p>,</span> <span class=s>&quot; &quot;</span><span class=p>);</span>     
        <span class=c1>// Replace 1+ spaces at the beginning of each     </span>
        <span class=c1>// line with no spaces. Must enable MULTILINE mode:     </span>
        <span class=n>s</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=na>replaceAll</span><span class=p>(</span><span class=s>&quot;(?m)^ +&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>     
        <span class=n>s</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=na>replaceFirst</span><span class=p>(</span><span class=s>&quot;[aeiou]&quot;</span><span class=p>,</span> <span class=s>&quot;(VOWEL1)&quot;</span><span class=p>);</span>     
        <span class=n>StringBuffer</span> <span class=n>sbuf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuffer</span><span class=p>();</span>     
        <span class=n>Pattern</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;[aeiou]&quot;</span><span class=p>);</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>     
        <span class=c1>// Process the find information as you     </span>
        <span class=c1>// perform the replacements:     </span>
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>      
            <span class=n>m</span><span class=p>.</span><span class=na>appendReplacement</span><span class=p>(</span><span class=n>sbuf</span><span class=p>,</span> <span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>().</span><span class=na>toUpperCase</span><span class=p>());</span>     
        <span class=c1>// Put in the remainder of the text:     </span>
        <span class=n>m</span><span class=p>.</span><span class=na>appendTail</span><span class=p>(</span><span class=n>sbuf</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>sbuf</span><span class=p>);</span>
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>Here&#39;s a block of text to use as input to </span>
<span class=cm>the regular expression matcher. Note that we </span>
<span class=cm>first extract the block of text by looking for </span>
<span class=cm>the special delimiters, then process the </span>
<span class=cm>extracted block. </span>
<span class=cm>H(VOWEL1)rE&#39;s A blOck Of tExt tO UsE As InpUt tO </span>
<span class=cm>thE rEgUlAr ExprEssIOn mAtchEr. NOtE thAt wE </span>
<span class=cm>fIrst ExtrAct thE blOck Of tExt by lOOkIng fOr </span>
<span class=cm>thE spEcIAl dElImItErs, thEn prOcEss thE </span>
<span class=cm>ExtrActEd blOck. </span>
<span class=cm>*/</span>
</code></pre></div> 此处使用上一章介绍过的 <a href=../17-Files/ ><code>Files</code></a> 类打开并读入文件。<code>Files.lines()</code> 返回一个 <code>Stream</code> 对象，包含读入的所有行，<code>Collectors.joining()</code> 在每一行的结尾追加参数字符序列，最终拼接成一个 <code>String</code> 对象。</p> <p><code>mInput</code> 匹配 <code>/*!</code> 和 <code>！*/</code> 之间的所有文字（注意分组的括号）。接下来，将存在两个或两个以上空格的地方，缩减为一个空格，并且删除每行开头部分的所有空格（为了使每一行都达到这个效果，而不仅仅是删除文本开头部分的空格，这里特意开启了多行模式）。这两个替换操作所使用的的 <code>replaceAll()</code> 是 <code>String</code> 对象自带的方法，在这里，使用此方法更方便。注意，因为这两个替换操作都只使用了一次 <code>replaceAll()</code>，所以，与其编译为 <code>Pattern</code>，不如直接使用 <code>String</code> 的 <code>replaceAll()</code> 方法，而且开销也更小些。</p> <p><code>replaceFirst()</code> 只对找到的第一个匹配进行替换。此外，<code>replaceFirst()</code> 和 <code>replaceAll()</code> 方法用来替换的只是普通字符串，所以，如果想对这些替换字符串进行某些特殊处理，这两个方法时无法胜任的。如果你想要那么做，就应该使用 <code>appendReplacement()</code> 方法。该方法允许你在执行替换的过程中，操作用来替换的字符串。在这个例子中，先构造了 <code>sbuf</code> 用来保存最终结果，然后用 <code>group()</code> 选择一个组，并对其进行处理，将正则表达式找到的元音字母替换成大些字母。一般情况下，你应该遍历执行所有的替换操作，然后再调用 <code>appendTail()</code> 方法，但是，如果你想模拟 <code>replaceFirst()</code>（或替换n次）的行为，那就只需要执行一次替换，然后调用 <code>appendTail()</code> 方法，将剩余未处理的部分存入 <code>sbuf</code> 即可。</p> <p>同时，<code>appendReplacement()</code> 方法还允许你通过 <code>\$g</code> 直接找到匹配的某个组，这里的 <code>g</code> 就是组号。然而，它只能应付一些简单的处理，无法实现类似前面这个例子中的功能。</p> <h3 id=reset><code>reset()</code><a class=headerlink href=#reset title="Permanent link">#</a></h3> <p>通过 <code>reset()</code> 方法，可以将现有的 <code>Matcher</code> 对象应用于一个新的字符序列： <div class=highlight><pre><span></span><code><span class=c1>// strings/Resetting.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Resetting</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>     
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=s>&quot;[frb][aiu][gx]&quot;</span><span class=p>)</span>       
          <span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=s>&quot;fix the rug with bags&quot;</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>();</span>     
        <span class=n>m</span><span class=p>.</span><span class=na>reset</span><span class=p>(</span><span class=s>&quot;fix the rig with rags&quot;</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>   
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>fix rug bag </span>
<span class=cm>fix rig rag </span>
<span class=cm>*/</span>
</code></pre></div> 使用不带参数的 <code>reset()</code> 方法，可以将 <code>Matcher</code> 对象重新设置到当前字符序列的起始位置。</p> <h3 id=java-io>正则表达式与 Java I/O<a class=headerlink href=#java-io title="Permanent link">#</a></h3> <p>到目前为止，我们看到的例子都是将正则表达式用于静态的字符串。下面的例子将向你演示，如何应用正则表达式在一个文件中进行搜索匹配操作。<code>JGrep.java</code> 的灵感源自于 Unix 上的 <em>grep</em>。它有两个参数：文件名以及要匹配的正则表达式。输出的是每行有匹配的部分以及匹配部分在行中的位置。 <div class=highlight><pre><span></span><code><span class=c1>// strings/JGrep.java </span>
<span class=c1>// A very simple version of the &quot;grep&quot; program </span>
<span class=c1>// {java JGrep </span>
<span class=c1>// WhitherStringBuilder.java &#39;return|for|String&#39;} </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>JGrep</span> <span class=p>{</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>    
        <span class=k>if</span><span class=p>(</span><span class=n>args</span><span class=p>.</span><span class=na>length</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>        
              <span class=s>&quot;Usage: java JGrep file regex&quot;</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>   
        <span class=p>}</span>    
        <span class=n>Pattern</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>.</span><span class=na>compile</span><span class=p>(</span><span class=n>args</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>);</span>    
        <span class=c1>// Iterate through the lines of the input file:    </span>
        <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>    
        <span class=n>Matcher</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>matcher</span><span class=p>(</span><span class=s>&quot;&quot;</span><span class=p>);</span>    
        <span class=k>for</span><span class=p>(</span><span class=n>String</span> <span class=n>line</span><span class=p>:</span> <span class=n>Files</span><span class=p>.</span><span class=na>readAllLines</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>args</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>)))</span> <span class=p>{</span>      
            <span class=n>m</span><span class=p>.</span><span class=na>reset</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>      
            <span class=k>while</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=na>find</span><span class=p>())</span>        
                <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>index</span><span class=o>++</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span> <span class=o>+</span>          
                  <span class=n>m</span><span class=p>.</span><span class=na>group</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span> <span class=o>+</span> <span class=n>m</span><span class=p>.</span><span class=na>start</span><span class=p>());</span>    
        <span class=p>}</span>  
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>0: for: 4 </span>
<span class=cm>1: for: 4 </span>
<span class=cm>*/</span>
</code></pre></div> <code>Files.readAllLines()</code> 返回一个 <code>List&lt;String&gt;</code> 对象，这意味着可以用 <em>for-in</em> 进行遍历。虽然可以在 <code>for</code> 循环内部创建一个新的 <code>Matcher</code> 对象，但是，在循环体外创建一个空的 <code>Matcher</code> 对象，然后用 <code>reset()</code> 方法每次为 <code>Matcher</code> 加载一行输入，这种处理会有一定的性能优化。最后用 <code>find()</code> 搜索结果。</p> <p>这里读入的测试参数是 <code>JGrep.java</code> 文件，然后搜索以 <code>[Ssct]</code> 开头的单词。</p> <p>如果想要更深入地学习正则表达式，你可以阅读 Jeffrey E. F. Friedl 的《精通正则表达式（第2版）》。网络上也有很多正则表达式的介绍，你还可以从 Perl 和 Python 等其他语言的文档中找到有用的信息。</p> <!-- Scanning Input --> <h2 id=_12>扫描输入<a class=headerlink href=#_12 title="Permanent link">#</a></h2> <p>到目前为止，从文件或标准输入读取数据还是一件相当痛苦的事情。一般的解决办法就是读入一行文本，对其进行分词，然后使用 <code>Integer</code>、<code>Double</code> 等类的各种解析方法来解析数据： <div class=highlight><pre><span></span><code><span class=c1>// strings/SimpleRead.java </span>
<span class=kn>import</span> <span class=nn>java.io.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SimpleRead</span> <span class=p>{</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=n>BufferedReader</span> <span class=n>input</span> <span class=o>=</span>    
      <span class=k>new</span> <span class=n>BufferedReader</span><span class=p>(</span><span class=k>new</span> <span class=n>StringReader</span><span class=p>(</span>    
        <span class=s>&quot;Sir Robin of Camelot\n22 1.61803&quot;</span><span class=p>));</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>    
        <span class=k>try</span> <span class=p>{</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;What is your name?&quot;</span><span class=p>);</span>      
            <span class=n>String</span> <span class=n>name</span> <span class=o>=</span> <span class=n>input</span><span class=p>.</span><span class=na>readLine</span><span class=p>();</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;How old are you? &quot;</span> <span class=o>+</span>        
              <span class=s>&quot;What is your favorite double?&quot;</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;(input: &lt;age&gt; &lt;double&gt;)&quot;</span><span class=p>);</span>      
            <span class=n>String</span> <span class=n>numbers</span> <span class=o>=</span> <span class=n>input</span><span class=p>.</span><span class=na>readLine</span><span class=p>();</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>numbers</span><span class=p>);</span>      
            <span class=n>String</span><span class=o>[]</span> <span class=n>numArray</span> <span class=o>=</span> <span class=n>numbers</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&quot; &quot;</span><span class=p>);</span>      
            <span class=kt>int</span> <span class=n>age</span> <span class=o>=</span> <span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>numArray</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>);</span>      
            <span class=kt>double</span> <span class=n>favorite</span> <span class=o>=</span> <span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>numArray</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;Hi %s.%n&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;In 5 years you will be %d.%n&quot;</span><span class=p>,</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>5</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;My favorite double is %f.&quot;</span><span class=p>,</span> <span class=n>favorite</span> <span class=o>/</span> <span class=mi>2</span><span class=p>);</span>    
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>err</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;I/O exception&quot;</span><span class=p>);</span>    
        <span class=p>}</span>  
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>What is your name? </span>
<span class=cm>Sir Robin of Camelot </span>
<span class=cm>How old are you? What is your favorite double? </span>
<span class=cm>(input: &lt;age&gt; &lt;double&gt;) </span>
<span class=cm>22 1.61803</span>
<span class=cm>Hi Sir Robin of Camelot. </span>
<span class=cm>In 5 years you will be 27. </span>
<span class=cm>My favorite double is 0.809015. </span>
<span class=cm>*/</span>
</code></pre></div> <code>input</code> 字段使用的类来自 <code>java.io</code>，<a href=../Appendix-IO-Streams/ >附录:流式 I/O</a> 详细介绍了相关内容。<code>StringReader</code> 将 <code>String</code> 转化为可读的流对象，然后用这个对象来构造 <code>BufferedReader</code> 对象，因为我们要使用 <code>BufferedReader</code> 的 <code>readLine()</code> 方法。最终，我们可以使用 <code>input</code> 对象一次读取一行文本，就像从控制台读入标准输入一样。</p> <p><code>readLine()</code> 方法将一行输入转为 <code>String</code> 对象。如果每一行数据正好对应一个输入值，那这个方法也还可行。但是，如果两个输入值在同一行中，事情就不好办了，我们必须分解这个行，才能分别解析所需的输入值。在这个例子中，分解的操作发生在创建 <code>numArray</code>时。</p> <p>终于，Java SE5 新增了 <code>Scanner</code> 类，它可以大大减轻扫描输入的工作负担： <div class=highlight><pre><span></span><code><span class=c1>// strings/BetterRead.java </span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>BetterRead</span> <span class=p>{</span>
  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>Scanner</span> <span class=n>stdin</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Scanner</span><span class=p>(</span><span class=n>SimpleRead</span><span class=p>.</span><span class=na>input</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;What is your name?&quot;</span><span class=p>);</span>
    <span class=n>String</span> <span class=n>name</span> <span class=o>=</span> <span class=n>stdin</span><span class=p>.</span><span class=na>nextLine</span><span class=p>();</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>
      <span class=s>&quot;How old are you? What is your favorite double?&quot;</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;(input: &lt;age&gt; &lt;double&gt;)&quot;</span><span class=p>);</span>
    <span class=kt>int</span> <span class=n>age</span> <span class=o>=</span> <span class=n>stdin</span><span class=p>.</span><span class=na>nextInt</span><span class=p>();</span>
    <span class=kt>double</span> <span class=n>favorite</span> <span class=o>=</span> <span class=n>stdin</span><span class=p>.</span><span class=na>nextDouble</span><span class=p>();</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>age</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>favorite</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;Hi %s.%n&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;In 5 years you will be %d.%n&quot;</span><span class=p>,</span>
      <span class=n>age</span> <span class=o>+</span> <span class=mi>5</span><span class=p>);</span>
    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&quot;My favorite double is %f.&quot;</span><span class=p>,</span>
      <span class=n>favorite</span> <span class=o>/</span> <span class=mi>2</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>What is your name? </span>
<span class=cm>Sir Robin of Camelot </span>
<span class=cm>How old are you? What is your favorite double? </span>
<span class=cm>(input: &lt;age&gt; &lt;double&gt;) </span>
<span class=cm>22 </span>
<span class=cm>1.61803 </span>
<span class=cm>Hi Sir Robin of Camelot. </span>
<span class=cm>In 5 years you will be 27. </span>
<span class=cm>My favorite double is 0.809015. </span>
<span class=cm>*/</span>
</code></pre></div> <code>Scanner</code> 的构造器可以接收任意类型的输入对象，包括 <code>File</code>、<code>InputStream</code>、<code>String</code> 或者像此例中的<code>Readable</code> 实现类。<code>Readable</code> 是 Java SE5 中新加入的一个接口，表示“具有 <code>read()</code> 方法的某种东西”。上一个例子中的 <code>BufferedReader</code> 也归于这一类。</p> <p>有了 <code>Scanner</code>，所有的输入、分词、以及解析的操作都隐藏在不同类型的 <code>next</code> 方法中。普通的 <code>next()</code> 方法返回下一个 <code>String</code>。所有的基本类型（除 <code>char</code> 之外）都有对应的 <code>next</code> 方法，包括 <code>BigDecimal</code> 和 <code>BigInteger</code>。所有的 next 方法，只有在找到一个完整的分词之后才会返回。<code>Scanner</code> 还有相应的 <code>hasNext</code> 方法，用以判断下一个输入分词是否是所需的类型，如果是则返回 <code>true</code>。</p> <p>在 <code>BetterRead.java</code> 中没有用 <code>try</code> 区块捕获<code>IOException</code>。因为，<code>Scanner</code> 有一个假设，在输入结束时会抛出 <code>IOException</code>，所以 <code>Scanner</code> 会把 <code>IOException</code> 吞掉。不过，通过 <code>ioException()</code> 方法，你可以找到最近发生的异常，因此，你可以在必要时检查它。</p> <h3 id=scanner><code>Scanner</code> 分隔符<a class=headerlink href=#scanner title="Permanent link">#</a></h3> <p>默认情况下，<code>Scanner</code> 根据空白字符对输入进行分词，但是你可以用正则表达式指定自己所需的分隔符： <div class=highlight><pre><span></span><code><span class=c1>// strings/ScannerDelimiter.java </span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ScannerDelimiter</span> <span class=p>{</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>    
        <span class=n>Scanner</span> <span class=n>scanner</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Scanner</span><span class=p>(</span><span class=s>&quot;12, 42, 78, 99, 42&quot;</span><span class=p>);</span>    
        <span class=n>scanner</span><span class=p>.</span><span class=na>useDelimiter</span><span class=p>(</span><span class=s>&quot;\\s*,\\s*&quot;</span><span class=p>);</span>    
        <span class=k>while</span><span class=p>(</span><span class=n>scanner</span><span class=p>.</span><span class=na>hasNextInt</span><span class=p>())</span>    
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>scanner</span><span class=p>.</span><span class=na>nextInt</span><span class=p>());</span>  
    <span class=p>}</span> 
<span class=p>}</span>
<span class=cm>/* Output: </span>
<span class=cm>12 </span>
<span class=cm>42 </span>
<span class=cm>78 </span>
<span class=cm>99 </span>
<span class=cm>42 </span>
<span class=cm>*/</span>
</code></pre></div> 这个例子使用逗号（包括逗号前后任意的空白字符）作为分隔符，同样的技术也可以用来读取逗号分隔的文件。我们可以用 <code>useDelimiter()</code> 来设置分隔符，同时，还有一个 <code>delimiter()</code> 方法，用来返回当前正在作为分隔符使用的 <code>Pattern</code> 对象。</p> <h3 id=_13>用正则表达式扫描<a class=headerlink href=#_13 title="Permanent link">#</a></h3> <p>除了能够扫描基本类型之外，你还可以使用自定义的正则表达式进行扫描，这在扫描复杂数据时非常有用。下面的例子将扫描一个防火墙日志文件中的威胁数据： <div class=highlight><pre><span></span><code><span class=c1>// strings/ThreatAnalyzer.java </span>
<span class=kn>import</span> <span class=nn>java.util.regex.*</span><span class=p>;</span> 
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ThreatAnalyzer</span> <span class=p>{</span> 
    <span class=kd>static</span> <span class=n>String</span> <span class=n>threatData</span> <span class=o>=</span>    
      <span class=s>&quot;58.27.82.161@08/10/2015\n&quot;</span> <span class=o>+</span>   
      <span class=s>&quot;204.45.234.40@08/11/2015\n&quot;</span> <span class=o>+</span>    
      <span class=s>&quot;58.27.82.161@08/11/2015\n&quot;</span> <span class=o>+</span>    
      <span class=s>&quot;58.27.82.161@08/12/2015\n&quot;</span> <span class=o>+</span>    
      <span class=s>&quot;58.27.82.161@08/12/2015\n&quot;</span> <span class=o>+</span>
      <span class=s>&quot;[Next log section with different data format]&quot;</span><span class=p>;</span>  
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span> 
        <span class=n>Scanner</span> <span class=n>scanner</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Scanner</span><span class=p>(</span><span class=n>threatData</span><span class=p>);</span>    
        <span class=n>String</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s>&quot;(\\d+[.]\\d+[.]\\d+[.]\\d+)@&quot;</span> <span class=o>+</span>      
            <span class=s>&quot;(\\d{2}/\\d{2}/\\d{4})&quot;</span><span class=p>;</span>    
        <span class=k>while</span><span class=p>(</span><span class=n>scanner</span><span class=p>.</span><span class=na>hasNext</span><span class=p>(</span><span class=n>pattern</span><span class=p>))</span> <span class=p>{</span>      
            <span class=n>scanner</span><span class=p>.</span><span class=na>next</span><span class=p>(</span><span class=n>pattern</span><span class=p>);</span>      
            <span class=n>MatchResult</span> <span class=n>match</span> <span class=o>=</span> <span class=n>scanner</span><span class=p>.</span><span class=na>match</span><span class=p>();</span>      
            <span class=n>String</span> <span class=n>ip</span> <span class=o>=</span> <span class=n>match</span><span class=p>.</span><span class=na>group</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>      
            <span class=n>String</span> <span class=n>date</span> <span class=o>=</span> <span class=n>match</span><span class=p>.</span><span class=na>group</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>      
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>format</span><span class=p>(</span>        
                <span class=s>&quot;Threat on %s from %s%n&quot;</span><span class=p>,</span> <span class=n>date</span><span class=p>,</span><span class=n>ip</span><span class=p>);</span>    
        <span class=p>}</span>  
    <span class=p>}</span> 
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>Threat on 08/10/2015 from 58.27.82.161 </span>
<span class=cm>Threat on 08/11/2015 from 204.45.234.40 </span>
<span class=cm>Threat on 08/11/2015 from 58.27.82.161 </span>
<span class=cm>Threat on 08/12/2015 from 58.27.82.161 </span>
<span class=cm>Threat on 08/12/2015 from 58.27.82.161 </span>
<span class=cm>*/</span>  
</code></pre></div> 当 <code>next()</code> 方法配合指定的正则表达式使用时，将找到下一个匹配该模式的输入部分，调用 <code>match()</code> 方法就可以获得匹配的结果。如上所示，它的工作方式与之前看到的正则表达式匹配相似。</p> <p>在配合正则表达式使用扫描时，有一点需要注意：它仅仅针对下一个输入分词进行匹配，如果你的正则表达式中含有分隔符，那永远不可能匹配成功。</p> <!-- StringTokenizer --> <h2 id=stringtokenizer>StringTokenizer类<a class=headerlink href=#stringtokenizer title="Permanent link">#</a></h2> <p>在 Java 引入正则表达式（J2SE1.4）和 <code>Scanner</code> 类（Java SE5）之前，分割字符串的唯一方法是使用 <code>StringTokenizer</code> 来分词。不过，现在有了正则表达式和 <code>Scanner</code>，我们可以使用更加简单、更加简洁的方式来完成同样的工作了。下面的例子中，我们将 <code>StringTokenizer</code> 与另外两种技术简单地做了一个比较： <div class=highlight><pre><span></span><code><span class=c1>// strings/ReplacingStringTokenizer.java </span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span> 

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReplacingStringTokenizer</span> <span class=p>{</span>   
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>     
        <span class=n>String</span> <span class=n>input</span> <span class=o>=</span>       
          <span class=s>&quot;But I&#39;m not dead yet! I feel happy!&quot;</span><span class=p>;</span>     
        <span class=n>StringTokenizer</span> <span class=n>stoke</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringTokenizer</span><span class=p>(</span><span class=n>input</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>stoke</span><span class=p>.</span><span class=na>hasMoreElements</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>stoke</span><span class=p>.</span><span class=na>nextToken</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>     
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>();</span> 
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Arrays</span><span class=p>.</span><span class=na>toString</span><span class=p>(</span><span class=n>input</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&quot; &quot;</span><span class=p>)));</span>     
        <span class=n>Scanner</span> <span class=n>scanner</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Scanner</span><span class=p>(</span><span class=n>input</span><span class=p>);</span>     
        <span class=k>while</span><span class=p>(</span><span class=n>scanner</span><span class=p>.</span><span class=na>hasNext</span><span class=p>())</span>       
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>scanner</span><span class=p>.</span><span class=na>next</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span><span class=p>);</span>   
    <span class=p>}</span>
<span class=p>}</span> 
<span class=cm>/* Output: </span>
<span class=cm>But I&#39;m not dead yet! I feel happy! </span>
<span class=cm>[But, I&#39;m, not, dead, yet!, I, feel, happy!] </span>
<span class=cm>But I&#39;m not dead yet! I feel happy! </span>
<span class=cm>*/</span>
</code></pre></div> 使用正则表达式或 <code>Scanner</code> 对象，我们能够以更加复杂的模式来分割一个字符串，而这对于 <code>StringTokenizer</code> 来说就很困难了。基本上，我们可以放心地说，<code>StringTokenizer</code> 已经可以废弃不用了。</p> <!-- Summary --> <h2 id=_14>本章小结<a class=headerlink href=#_14 title="Permanent link">#</a></h2> <p>过去，Java 对于字符串操作的技术相当不完善。不过随着近几个版本的升级，我们可以看到，Java 已经从其他语言中吸取了许多成熟的经验。到目前为止，它对字符串操作的支持已经很完善了。不过，有时你还要在细节上注意效率问题，例如恰当地使用 <code>StringBuilder</code> 等。</p> <!-- 分页 --> <div style="page-break-after: always;"></div> <div class=footnote> <hr> <ol> <li id=fn:1> <p>C++允许编程人员任意重载操作符。这通常是很复杂的过程（参见Prentice Hall于2000年编写的《Thinking in C++（第2版）》第10章），因此Java设计者认为这是很糟糕的功能，不应该纳入到Java中。起始重载操作符并没有糟糕到只能自己去重载的地步，但具有讽刺意味的是，与C++相比，在Java中使用操作符重载要容易得多。这一点可以在Python(参见<a href=http://www.python.org>www.Python.org</a>)和C#中看到，它们都有垃圾回收机制，操作符重载也简单易懂。&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>Java并非在一开始就支持正则表达式，因此这个令人费解的语法是硬塞进来的。&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p>网上还有很多实用并且成熟的正则表达式工具。&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> <li id=fn:4> <p>input来自于<a href=https://en.wikipedia.org/wiki/Galaxy_Quest>Galaxy Quest</a>中Taggart司令的一篇演讲。&#160;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">&#8617;</a></p> </li> <li id=fn:5> <p>我不知道他们是如何想出这个方法名的，或者它到底指的什么。这只是代码审查很重要的原因之一。&#160;<a class=footnote-backref href=#fnref:5 title="Jump back to footnote 5 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../17-Files/ title="17 Files" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 上一页 </span> 17 Files </span> </div> </a> <a href=../19-Type-Information/ title="19 Type Information" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 下一页 </span> 19 Type Information </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../../../assets/fonts/font-awesome.css> <a href=https://leay.net target=_blank rel=noopener title=home class="md-footer-social__link fa fa-home"></a> <a href=https://github.com/hqweay target=_blank rel=noopener title=github class="md-footer-social__link fa fa-github"></a> </div> </div> </div> </footer> </div> <script src=../../../../../assets/javascripts/application.c33a9706.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../../../assets/javascripts/lunr/tinyseg.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.ja.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.multi.js></script> <script>app.initialize({version:"1.1",url:{base:"../../../../.."}})</script> </body> </html>