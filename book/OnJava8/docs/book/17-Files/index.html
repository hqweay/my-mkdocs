<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Thinking Drafts"><link href=https://wiki.leay.net/book/OnJava8/docs/book/17-Files/ rel=canonical><meta name=author content=hqweay><meta name=lang:clipboard.copy content=复制><meta name=lang:clipboard.copied content=已复制><meta name=lang:search.language content="en, ja"><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content=没有找到符合条件的结果><meta name=lang:search.result.one content="找到 1 个符合条件的结果"><meta name=lang:search.result.other content="# 个符合条件的结果"><meta name=lang:search.tokenizer content=[\uff0c\u3002]+><link rel="shortcut icon" href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>17 Files - Hqweay's Wiki</title><link rel=stylesheet href=../../../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#3f51b5><script src=../../../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Noto Serif SC","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../../../assets/fonts/material-icons.css><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105976066-3", "wiki.leay.net")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=indigo data-md-color-accent=indigo> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#_1 tabindex=0 class=md-skip> 跳转至 </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" aria-label="Hqweay's Wiki" class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Hqweay's Wiki </span> <span class=md-header-nav__topic> 17 Files </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> 键入以开始搜索 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../ class="md-tabs__link md-tabs__link--active"> Book </a> </li> <li class=md-tabs__item> <a href=../../../../../doc/ class=md-tabs__link> Doc </a> </li> <li class=md-tabs__item> <a href=../../../../../life/reading/ class=md-tabs__link> Life </a> </li> <li class=md-tabs__item> <a href=../../../../../study/draft/try-wiki/ class=md-tabs__link> Study </a> </li> <li class=md-tabs__item> <a href=../../../../../tech/code/frontend/2017-09-14-easy-web-test/ class=md-tabs__link> Tech </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://wiki.leay.net/ title="Hqweay's Wiki" class="md-nav__button md-logo"> <i class=md-icon></i> </a> Hqweay's Wiki </label> <div class=md-nav__source> <a href=https://github.com/hqweay/my-mkdocs/ title="前往 Github 仓库" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> hqweay/my-mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../../../../test/ title=特殊语法 class=md-nav__link> 特殊语法 </a> </li> <li class=md-nav__item> <a href=../../../../../web-page/ title=静态文档导航 class=md-nav__link> 静态文档导航 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Book </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Book </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1 type=checkbox id=nav-4-1 checked> <label class=md-nav__link for=nav-4-1> OnJava8 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-1> OnJava8 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ title="《On Java 8》中文版" class=md-nav__link> 《On Java 8》中文版 </a> </li> <li class=md-nav__item> <a href=../../../CONTRIBUTING/ title=CONTRIBUTING class=md-nav__link> CONTRIBUTING </a> </li> <li class=md-nav__item> <a href=../../../SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4 type=checkbox id=nav-4-1-4 checked> <label class=md-nav__link for=nav-4-1-4> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-1-4> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ title=译者的话 class=md-nav__link> 译者的话 </a> </li> <li class=md-nav__item> <a href=../../_coverpage/ title=coverpage class=md-nav__link> coverpage </a> </li> <li class=md-nav__item> <a href=../../sidebar/ title=Sidebar class=md-nav__link> Sidebar </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-4 type=checkbox id=nav-4-1-4-4> <label class=md-nav__link for=nav-4-1-4-4> style </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-1-4-4> style </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-4-1 type=checkbox id=nav-4-1-4-4-1> <label class=md-nav__link for=nav-4-1-4-4-1> Prism master </label> <nav class=md-nav data-md-component=collapsible data-md-level=5> <label class=md-nav__title for=nav-4-1-4-4-1> Prism master </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_style/prism-master/ title=[Prism](http://prismjs.com/) class=md-nav__link> [Prism](http://prismjs.com/) </a> </li> <li class=md-nav__item> <a href=../../_style/prism-master/CHANGELOG/ title="Prism Changelog" class=md-nav__link> Prism Changelog </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-1-4-5 type=checkbox id=nav-4-1-4-5 checked> <label class=md-nav__link for=nav-4-1-4-5> Book </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-1-4-5> Book </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../00-Introduction/ title=简介 class=md-nav__link> 简介 </a> </li> <li class=md-nav__item> <a href=../00-On-Java-8/ title="00 On Java 8" class=md-nav__link> 00 On Java 8 </a> </li> <li class=md-nav__item> <a href=../00-Preface/ title=前言 class=md-nav__link> 前言 </a> </li> <li class=md-nav__item> <a href=../01-What-is-an-Object/ title="第一章 对象的概念" class=md-nav__link> 第一章 对象的概念 </a> </li> <li class=md-nav__item> <a href=../02-Installing-Java-and-the-Book-Examples/ title="02 Installing Java and the Book Examples" class=md-nav__link> 02 Installing Java and the Book Examples </a> </li> <li class=md-nav__item> <a href=../03-Objects-Everywhere/ title="03 Objects Everywhere" class=md-nav__link> 03 Objects Everywhere </a> </li> <li class=md-nav__item> <a href=../04-Operators/ title="04 Operators" class=md-nav__link> 04 Operators </a> </li> <li class=md-nav__item> <a href=../05-Control-Flow/ title="05 Control Flow" class=md-nav__link> 05 Control Flow </a> </li> <li class=md-nav__item> <a href=../06-Housekeeping/ title="06 Housekeeping" class=md-nav__link> 06 Housekeeping </a> </li> <li class=md-nav__item> <a href=../07-Implementation-Hiding/ title="07 Implementation Hiding" class=md-nav__link> 07 Implementation Hiding </a> </li> <li class=md-nav__item> <a href=../08-Reuse/ title="08 Reuse" class=md-nav__link> 08 Reuse </a> </li> <li class=md-nav__item> <a href=../09-Polymorphism/ title="09 Polymorphism" class=md-nav__link> 09 Polymorphism </a> </li> <li class=md-nav__item> <a href=../10-Interfaces/ title="10 Interfaces" class=md-nav__link> 10 Interfaces </a> </li> <li class=md-nav__item> <a href=../11-Inner-Classes/ title="11 Inner Classes" class=md-nav__link> 11 Inner Classes </a> </li> <li class=md-nav__item> <a href=../12-Collections/ title="12 Collections" class=md-nav__link> 12 Collections </a> </li> <li class=md-nav__item> <a href=../13-Functional-Programming/ title="13 Functional Programming" class=md-nav__link> 13 Functional Programming </a> </li> <li class=md-nav__item> <a href=../14-Streams/ title="14 Streams" class=md-nav__link> 14 Streams </a> </li> <li class=md-nav__item> <a href=../15-Exceptions/ title="15 Exceptions" class=md-nav__link> 15 Exceptions </a> </li> <li class=md-nav__item> <a href=../16-Validating-Your-Code/ title="16 Validating Your Code" class=md-nav__link> 16 Validating Your Code </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 17 Files </label> <a href=./ title="17 Files" class="md-nav__link md-nav__link--active"> 17 Files </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 文件和目录路径 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 选取路径部分片段 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 路径分析 </a> </li> <li class=md-nav__item> <a href=#paths class=md-nav__link> Paths的增减修改 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 目录 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 文件系统 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 路径监听 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 文件查找 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 文件读写 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 本章小结 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../18-Strings/ title="18 Strings" class=md-nav__link> 18 Strings </a> </li> <li class=md-nav__item> <a href=../19-Type-Information/ title="19 Type Information" class=md-nav__link> 19 Type Information </a> </li> <li class=md-nav__item> <a href=../20-Generics/ title="20 Generics" class=md-nav__link> 20 Generics </a> </li> <li class=md-nav__item> <a href=../21-Arrays/ title="21 Arrays" class=md-nav__link> 21 Arrays </a> </li> <li class=md-nav__item> <a href=../22-Enumerations/ title="22 Enumerations" class=md-nav__link> 22 Enumerations </a> </li> <li class=md-nav__item> <a href=../23-Annotations/ title="23 Annotations" class=md-nav__link> 23 Annotations </a> </li> <li class=md-nav__item> <a href=../24-Concurrent-Programming/ title="24 Concurrent Programming" class=md-nav__link> 24 Concurrent Programming </a> </li> <li class=md-nav__item> <a href=../25-Patterns/ title="25 Patterns" class=md-nav__link> 25 Patterns </a> </li> <li class=md-nav__item> <a href=../Appendix-Becoming-a-Programmer/ title="Appendix Becoming a Programmer" class=md-nav__link> Appendix Becoming a Programmer </a> </li> <li class=md-nav__item> <a href=../Appendix-Benefits-and-Costs-of-Static-Type-Checking/ title="Appendix Benefits and Costs of Static Type Checking" class=md-nav__link> Appendix Benefits and Costs of Static Type Checking </a> </li> <li class=md-nav__item> <a href=../Appendix-Collection-Topics/ title="Appendix Collection Topics" class=md-nav__link> Appendix Collection Topics </a> </li> <li class=md-nav__item> <a href=../Appendix-Data-Compression/ title="Appendix Data Compression" class=md-nav__link> Appendix Data Compression </a> </li> <li class=md-nav__item> <a href=../Appendix-IO-Streams/ title="Appendix IO Streams" class=md-nav__link> Appendix IO Streams </a> </li> <li class=md-nav__item> <a href=../Appendix-Javadoc/ title="Appendix Javadoc" class=md-nav__link> Appendix Javadoc </a> </li> <li class=md-nav__item> <a href=../Appendix-Low-Level-Concurrency/ title="Appendix Low Level Concurrency" class=md-nav__link> Appendix Low Level Concurrency </a> </li> <li class=md-nav__item> <a href=../Appendix-New-IO/ title="Appendix New IO" class=md-nav__link> Appendix New IO </a> </li> <li class=md-nav__item> <a href=../Appendix-Object-Serialization/ title="Appendix Object Serialization" class=md-nav__link> Appendix Object Serialization </a> </li> <li class=md-nav__item> <a href=../Appendix-Passing-and-Returning-Objects/ title="Appendix Passing and Returning Objects" class=md-nav__link> Appendix Passing and Returning Objects </a> </li> <li class=md-nav__item> <a href=../Appendix-Programming-Guidelines/ title="Appendix Programming Guidelines" class=md-nav__link> Appendix Programming Guidelines </a> </li> <li class=md-nav__item> <a href=../Appendix-Standard-IO/ title="Appendix Standard IO" class=md-nav__link> Appendix Standard IO </a> </li> <li class=md-nav__item> <a href=../Appendix-Supplements/ title="Appendix Supplements" class=md-nav__link> Appendix Supplements </a> </li> <li class=md-nav__item> <a href=../Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java/ title="Appendix The Positive Legacy of C plus plus and Java" class=md-nav__link> Appendix The Positive Legacy of C plus plus and Java </a> </li> <li class=md-nav__item> <a href=../Appendix-Understanding-equals-and-hashCode/ title="Appendix Understanding equals and hashCode" class=md-nav__link> Appendix Understanding equals and hashCode </a> </li> <li class=md-nav__item> <a href=../GLOSSARY/ title=GLOSSARY class=md-nav__link> GLOSSARY </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Doc </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Doc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/ title=About class=md-nav__link> About </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> English </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> English </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1 type=checkbox id=nav-5-2-1> <label class=md-nav__link for=nav-5-2-1> A Programmers Guide to English </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-1> A Programmers Guide to English </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/ title="A Programmer's Guide to English" class=md-nav__link> A Programmer's Guide to English </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-3 type=checkbox id=nav-5-2-1-3> <label class=md-nav__link for=nav-5-2-1-3> Essence </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-3> Essence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/essence/ title=语言学习的本质浅析 class=md-nav__link> 语言学习的本质浅析 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-4 type=checkbox id=nav-5-2-1-4> <label class=md-nav__link for=nav-5-2-1-4> Make a program </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-4> Make a program </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/make-a-program/ title=如何构建一个识别英语的程序 class=md-nav__link> 如何构建一个识别英语的程序 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-5 type=checkbox id=nav-5-2-1-5> <label class=md-nav__link for=nav-5-2-1-5> Qa </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-5> Qa </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/qa/ title="常见问题 QA" class=md-nav__link> 常见问题 QA </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/qa/WhyPTE/ title="为什么我选择 PTE 考试" class=md-nav__link> 为什么我选择 PTE 考试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-6 type=checkbox id=nav-5-2-1-6> <label class=md-nav__link for=nav-5-2-1-6> Resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-6> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/resources/ title=资料、工具推荐和扩展阅读 class=md-nav__link> 资料、工具推荐和扩展阅读 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-1-7 type=checkbox id=nav-5-2-1-7> <label class=md-nav__link for=nav-5-2-1-7> Training </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-1-7> Training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/ title=我的训练方法 class=md-nav__link> 我的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/KnowledgeBase/ title=扩充语料库的训练方法 class=md-nav__link> 扩充语料库的训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/ListeningandSpeaking/ title=发音和听力训练方法 class=md-nav__link> 发音和听力训练方法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/A-Programmers-Guide-to-English/training/Thinking/ title=英语思维训练 class=md-nav__link> 英语思维训练 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2 type=checkbox id=nav-5-2-2> <label class=md-nav__link for=nav-5-2-2> English level up tips for Chinese </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-2> English level up tips for Chinese </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/ title=English-level-up-tips-for-Chinese class=md-nav__link> English-level-up-tips-for-Chinese </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/SUMMARY/ title=Summary class=md-nav__link> Summary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-3 type=checkbox id=nav-5-2-2-3> <label class=md-nav__link for=nav-5-2-2-3> Part 1 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-3> Part 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/1-understanding/ title=认知篇 class=md-nav__link> 认知篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/2-vocabulary/ title=单词篇 class=md-nav__link> 单词篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/3-listening/ title=听力篇 class=md-nav__link> 听力篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/4-reading/ title=阅读篇 class=md-nav__link> 阅读篇 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-1/5-speaking/ title="5 speaking" class=md-nav__link> 5 speaking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-4 type=checkbox id=nav-5-2-2-4> <label class=md-nav__link for=nav-5-2-2-4> Part 2 </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-4> Part 2 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/part-2/x-misc/ title=扯淡篇 class=md-nav__link> 扯淡篇 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-2-5 type=checkbox id=nav-5-2-2-5> <label class=md-nav__link for=nav-5-2-2-5> Word list </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-2-2-5> Word list </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Go/ title=Go class=md-nav__link> Go </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Java/ title=Java class=md-nav__link> Java </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/JavaScript/ title=JavaScript class=md-nav__link> JavaScript </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/PHP/ title=PHP class=md-nav__link> PHP </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/English-level-up-tips-for-Chinese/word-list/Swift/ title=Swift class=md-nav__link> Swift </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2-3 type=checkbox id=nav-5-2-3> <label class=md-nav__link for=nav-5-2-3> Everyone can use english </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-2-3> Everyone can use english </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/ title=人人都能用英语 class=md-nav__link> 人人都能用英语 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter1/ title="第一章 起点" class=md-nav__link> 第一章 起点 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter2/ title="第二章 口语" class=md-nav__link> 第二章 口语 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter3/ title="第三章 语音" class=md-nav__link> 第三章 语音 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter4/ title="第四章 朗读" class=md-nav__link> 第四章 朗读 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter5/ title="第五章 词典" class=md-nav__link> 第五章 词典 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter6/ title="第六章 语法" class=md-nav__link> 第六章 语法 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter7/ title="第七章 精读" class=md-nav__link> 第七章 精读 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/chapter8/ title="第八章 叮嘱" class=md-nav__link> 第八章 叮嘱 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/english/everyone-can-use-english/end/ title=后记 class=md-nav__link> 后记 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-3> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-1 type=checkbox id=nav-5-3-1> <label class=md-nav__link for=nav-5-3-1> Chinese copywriting guidelines </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-3-1> Chinese copywriting guidelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/CHANGELOG/ title=CHANGELOG class=md-nav__link> CHANGELOG </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.en-US/ title="Chinese Copywriting Guidelines" class=md-nav__link> Chinese Copywriting Guidelines </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.zh-CN/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/chinese-copywriting-guidelines/README.zh-HK/ title=中文文案排版指北 class=md-nav__link> 中文文案排版指北 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-2 type=checkbox id=nav-5-3-2> <label class=md-nav__link for=nav-5-3-2> Document style guide </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-5-3-2> Document style guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/ title=Index class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3-2-2 type=checkbox id=nav-5-3-2-2> <label class=md-nav__link for=nav-5-3-2-2> Docs </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-5-3-2-2> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/marks/ title=标点符号 class=md-nav__link> 标点符号 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/number/ title=数值 class=md-nav__link> 数值 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/paragraph/ title=段落 class=md-nav__link> 段落 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/reference/ title=参考链接 class=md-nav__link> 参考链接 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/structure/ title=文档体系 class=md-nav__link> 文档体系 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/text/ title=文本 class=md-nav__link> 文本 </a> </li> <li class=md-nav__item> <a href=../../../../../doc/writing/document-style-guide/docs/title/ title=标题 class=md-nav__link> 标题 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Life </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Life </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Reading </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-1> Reading </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/ title=阅读 class=md-nav__link> 阅读 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-2 type=checkbox id=nav-6-1-2> <label class=md-nav__link for=nav-6-1-2> Mark </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-2> Mark </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/mark/back-up/ title="2019 暑假备份" class=md-nav__link> 2019 暑假备份 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/back/ title=例行收集 class=md-nav__link> 例行收集 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/efficiency-time/ title=效率、时间、鸡汤 class=md-nav__link> 效率、时间、鸡汤 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/fiction/ title=小说 class=md-nav__link> 小说 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/films-remark/ title=影评、电影 class=md-nav__link> 影评、电影 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/fo/ title=佛 class=md-nav__link> 佛 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/hackers-others/ title=互联网、思维方式 class=md-nav__link> 互联网、思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/hooked-media/ title=媒介反思 class=md-nav__link> 媒介反思 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/isaka-kotaro/ title=伊坂幸太郎 class=md-nav__link> 伊坂幸太郎 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/knote/ title=整理 class=md-nav__link> 整理 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/mark-knote/ title=浪费时间 class=md-nav__link> 浪费时间 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/meaning/ title=思维方式 class=md-nav__link> 思维方式 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/morimi-tomihiko/ title=森见登美彦的文字好有趣啊! class=md-nav__link> 森见登美彦的文字好有趣啊! </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/murakamo-haruki/ title=村上春树 class=md-nav__link> 村上春树 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/no-fiction/ title=非虚构类 class=md-nav__link> 非虚构类 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/paper/ title=论文式总结 class=md-nav__link> 论文式总结 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/poem/ title=诗歌 class=md-nav__link> 诗歌 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/sence/ title=哲学相关通俗读物 class=md-nav__link> 哲学相关通俗读物 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/the-little-prince/ title="The Little Prince" class=md-nav__link> The Little Prince </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/universe/ title=物理科普读物 class=md-nav__link> 物理科普读物 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/utopia/ title=乌托邦小说世界关于书籍的冷幽默 class=md-nav__link> 乌托邦小说世界关于书籍的冷幽默 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/western-politics/ title=政哲 class=md-nav__link> 政哲 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/what-we-talk-about/ title=日本文学 class=md-nav__link> 日本文学 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/wuxia/ title=武侠 class=md-nav__link> 武侠 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/mark/xiao-bo/ title=王小波 class=md-nav__link> 王小波 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-3 type=checkbox id=nav-6-1-3> <label class=md-nav__link for=nav-6-1-3> Note </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-3> Note </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/note/2017-09-02-book-JavaScript-DOM/ title="《JavaScript DOM 编程艺术》" class=md-nav__link> 《JavaScript DOM 编程艺术》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2017-09-09-coding-javascript-down/ title="尽量把 JavaScript 代码放到 HTML 网页底部" class=md-nav__link> 尽量把 JavaScript 代码放到 HTML 网页底部 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-05-23-HTTP/ title="《HTTP 图解》" class=md-nav__link> 《HTTP 图解》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-06-07-computer/ title=计算机系统基础 class=md-nav__link> 计算机系统基础 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-10-09-JVM/ title="JVM 笔记" class=md-nav__link> JVM 笔记 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/note/2018-11-25-computer/ title=计算机系统概论 class=md-nav__link> 计算机系统概论 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1-4 type=checkbox id=nav-6-1-4> <label class=md-nav__link for=nav-6-1-4> Review </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-1-4> Review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-09-28-say-something/ title=听你吹牛的闲暇时光 class=md-nav__link> 听你吹牛的闲暇时光 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-09-29-wuxia/ title="《流星 蝴蝶 剑》简记" class=md-nav__link> 《流星 蝴蝶 剑》简记 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2017-12-30-xiao-bo/ title=波波老师 class=md-nav__link> 波波老师 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2018-01-17-lai-zi-xin-shi-jie/ title=《来自新世界》 class=md-nav__link> 《来自新世界》 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2018-10-06-October/ title=科普谈起 class=md-nav__link> 科普谈起 </a> </li> <li class=md-nav__item> <a href=../../../../../life/reading/review/2019-09-07-story/ title=从网络小说谈起。 class=md-nav__link> 从网络小说谈起。 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Watching </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-2> Watching </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../life/watching/2017-08-29-watch-movies-rencently/ title=最近看的几部电影 class=md-nav__link> 最近看的几部电影 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-10-13-september-movies-record/ title=九月观影记录 class=md-nav__link> 九月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-11-01-October-summary/ title=十月看片与非专业类阅读 class=md-nav__link> 十月看片与非专业类阅读 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2017-12-01-1112/ title=观影与阅读记录 class=md-nav__link> 观影与阅读记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-01-10-12/ title=最近看片与阅读 class=md-nav__link> 最近看片与阅读 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-02-06-january/ title=一月观影记录 class=md-nav__link> 一月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-03-08-February/ title=二月至今观影记录 class=md-nav__link> 二月至今观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-03-31-March/ title=三月观影记录 class=md-nav__link> 三月观影记录 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2018-12-26-Smultronst%C3%A4llet/ title=野草莓 class=md-nav__link> 野草莓 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-10-10-October/ title=克服本能就是善良吗？（从十月新番胡扯……） class=md-nav__link> 克服本能就是善良吗？（从十月新番胡扯……） </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-11-04-bgm/ title=无人声环 class=md-nav__link> 无人声环 </a> </li> <li class=md-nav__item> <a href=../../../../../life/watching/2019-11-13-the-end-of-the-world/ title="The End of the Fucking World" class=md-nav__link> The End of the Fucking World </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Study </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Study </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-1 type=checkbox id=nav-7-1> <label class=md-nav__link for=nav-7-1> Draft </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-1> Draft </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../study/draft/try-wiki/ title="一些 Wiki 工具的尝试" class=md-nav__link> 一些 Wiki 工具的尝试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-2 type=checkbox id=nav-7-2> <label class=md-nav__link for=nav-7-2> Language </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-2> Language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../study/language/%E6%97%A5%E8%AF%AD%E5%85%A5%E9%97%A8/ title=日语入门 class=md-nav__link> 日语入门 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Tech </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> Tech </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1 type=checkbox id=nav-8-1> <label class=md-nav__link for=nav-8-1> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-1> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-1 type=checkbox id=nav-8-1-1> <label class=md-nav__link for=nav-8-1-1> Frontend </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-1> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2017-09-14-easy-web-test/ title=大表哥的电商网页实战体验 class=md-nav__link> 大表哥的电商网页实战体验 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2017-09-23-know-nothing/ title=知其然不知其所以然 class=md-nav__link> 知其然不知其所以然 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/2018-06-08-responsive/ title=大表哥的响应式设计 class=md-nav__link> 大表哥的响应式设计 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/frontend/zh-javascript-info/ title="现代 JavaScript 教程摘录" class=md-nav__link> 现代 JavaScript 教程摘录 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-2 type=checkbox id=nav-8-1-2> <label class=md-nav__link for=nav-8-1-2> Go </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-2> Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/go/01/ title=01 class=md-nav__link> 01 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-3 type=checkbox id=nav-8-1-3> <label class=md-nav__link for=nav-8-1-3> Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-3> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/java/2017-12-30-Java%20Web/ title="从 url 访问服务器资源讨论 Java Web 中的 Servlet" class=md-nav__link> 从 url 访问服务器资源讨论 Java Web 中的 Servlet </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2018-11-23-ArrayList/ title=ArrayList class=md-nav__link> ArrayList </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-01-31-HashMap/ title=HashMap class=md-nav__link> HashMap </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-01-String/ title="String 分析(栈,堆,字符串常量池)" class=md-nav__link> String 分析(栈,堆,字符串常量池) </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-03-String/ title=String、StringBuffer、StingBuilder class=md-nav__link> String、StringBuffer、StingBuilder </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-02-06-Hashtable/ title=Hashtable class=md-nav__link> Hashtable </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-22-string-pool/ title=字符串常量池到底保存的是字符串对象还是字符串对象的引用? class=md-nav__link> 字符串常量池到底保存的是字符串对象还是字符串对象的引用? </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-23-Java-Thread-pool/ title="Java 线程池" class=md-nav__link> Java 线程池 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-03-29-Java%20Web/ title="Java Web 启动流程" class=md-nav__link> Java Web 启动流程 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/java/2019-04-05-AQS-lock/ title="AQS 与 Java 锁的具体实现" class=md-nav__link> AQS 与 Java 锁的具体实现 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-4 type=checkbox id=nav-8-1-4> <label class=md-nav__link for=nav-8-1-4> Projects </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-4> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/projects/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1-5 type=checkbox id=nav-8-1-5> <label class=md-nav__link for=nav-8-1-5> Spring </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-1-5> Spring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2018-09-01-Spring%20Security/ title="Spring Boot 与 Spring Security" class=md-nav__link> Spring Boot 与 Spring Security </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2019-03-29-Spring-init/ title="Spring 启动流程与简单源码分析" class=md-nav__link> Spring 启动流程与简单源码分析 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/code/spring/2019-04-06-Spring-MVC/ title="Spring MVC 简单源码分析" class=md-nav__link> Spring MVC 简单源码分析 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2 type=checkbox id=nav-8-2> <label class=md-nav__link for=nav-8-2> Config </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-2> Config </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-1 type=checkbox id=nav-8-2-1> <label class=md-nav__link for=nav-8-2-1> Git </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-1> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/git/2018-02-01-git/ title="Git 的简单使用" class=md-nav__link> Git 的简单使用 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/git/2019-08-10-git-merge/ title="Git 协作管理项目时不可避免的 merge 操作" class=md-nav__link> Git 协作管理项目时不可避免的 merge 操作 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/git/submodule/ title=submodule class=md-nav__link> submodule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-2 type=checkbox id=nav-8-2-2> <label class=md-nav__link for=nav-8-2-2> Linux </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-2> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/linux/2019-12-18-manjaro/ title="Manjaro 个人新装配置" class=md-nav__link> Manjaro 个人新装配置 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/fontconfig/ title="Arch Emoji fontconfig" class=md-nav__link> Arch Emoji fontconfig </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/linux/softwares/ title=各种工具 class=md-nav__link> 各种工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-3 type=checkbox id=nav-8-2-3> <label class=md-nav__link for=nav-8-2-3> Tools </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-3> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/tools/cz-conventional-changelog/ title=cz-conventional-changelog class=md-nav__link> cz-conventional-changelog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-4 type=checkbox id=nav-8-2-4> <label class=md-nav__link for=nav-8-2-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-03-31-Generator-SpringBoot-Gradle/ title="MyBatis Generator + Spring Boot + Gradle 配置" class=md-nav__link> MyBatis Generator + Spring Boot + Gradle 配置 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-06-25-VS-Code-Python/ title="VS Code 写 Python" class=md-nav__link> VS Code 写 Python </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-06-26-linux-kawa/ title="在 Linux 上使用 kawa" class=md-nav__link> 在 Linux 上使用 kawa </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2018-11-25-mysql/ title="【转】在 CentOS 上部署 MySQL 解压版" class=md-nav__link> 【转】在 CentOS 上部署 MySQL 解压版 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-04-03-Redis-lock/ title="Redis 的分布式锁实现" class=md-nav__link> Redis 的分布式锁实现 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-07-28-picGo/ title="Github + picGo ——有图床了" class=md-nav__link> Github + picGo ——有图床了 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2019-11-18-linux-mount/ title="Linux 挂载分区/磁盘" class=md-nav__link> Linux 挂载分区/磁盘 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-03-terminal-wifi/ title=把显卡驱动删了后在终端连热点 class=md-nav__link> 把显卡驱动删了后在终端连热点 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-12-css/ title=一个引号引发的惨案 class=md-nav__link> 一个引号引发的惨案 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-02-23-archer-s-arch/ title="Archer`s Arch" class=md-nav__link> Archer`s Arch </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-03-12-electron-vue/ title="用 Vue 写 Electron 的一次问题解决" class=md-nav__link> 用 Vue 写 Electron 的一次问题解决 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-03-12-ttrss/ title="部署 TTRSS 遇到的一些有趣的东西" class=md-nav__link> 部署 TTRSS 遇到的一些有趣的东西 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/config/undefined/2020-04-02-hexo-asset-image/ title="hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了" class=md-nav__link> hexo-next-theme 开启 lazyload 使用 hexo-asset-image 出问题了 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-3 type=checkbox id=nav-8-3> <label class=md-nav__link for=nav-8-3> Project </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-3> Project </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/project/2017-12-21-xiao-zong-jie/ title=做个小小的总结 class=md-nav__link> 做个小小的总结 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-05-07-big-data/ title="大数据 Demo （采集、处理、应用）复盘" class=md-nav__link> 大数据 Demo （采集、处理、应用）复盘 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-06-25-tencent-news-spider-py/ title=腾讯新闻爬虫 class=md-nav__link> 腾讯新闻爬虫 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2018-09-13-lite-terminal-home-page/ title=简单的仿终端主页 class=md-nav__link> 简单的仿终端主页 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-01-11-tank/ title=花里胡哨的坦克大战 class=md-nav__link> 花里胡哨的坦克大战 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-02-05-new-year/ title=大年初一（爬取豆瓣条目及吐槽） class=md-nav__link> 大年初一（爬取豆瓣条目及吐槽） </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-04-03-blog-project/ title=写博客 class=md-nav__link> 写博客 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-06-17-nodejs/ title="MarkAll 导入豆瓣数据 —— NodeJS 写爬虫" class=md-nav__link> MarkAll 导入豆瓣数据 —— NodeJS 写爬虫 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-11-15-Autumn-Json/ title="Autumn-From-Spring 自定义 BeanDefinitionReader" class=md-nav__link> Autumn-From-Spring 自定义 BeanDefinitionReader </a> </li> <li class=md-nav__item> <a href=../../../../../tech/project/2019-11-15-bookmarkdown/ title="Chrome 插件——书签转 MarkDown" class=md-nav__link> Chrome 插件——书签转 MarkDown </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-4 type=checkbox id=nav-8-4> <label class=md-nav__link for=nav-8-4> Undefined </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-4> Undefined </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-08-10-then-start/ title=那就开始吧 class=md-nav__link> 那就开始吧 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-08-16-Writing-is%20the-reward-of-writing-itself/ title=写就是写本身的报酬 class=md-nav__link> 写就是写本身的报酬 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-11-19-change-my-blog/ title=【过时内容】嘿，我转移博客啦！ class=md-nav__link> 【过时内容】嘿，我转移博客啦！ </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2017-12-08-yao-guai-ji-yu-you-ren-bo/ title=妖怪唧唧与友人波波 class=md-nav__link> 妖怪唧唧与友人波波 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-01-01-ubuntu/ title="折腾 ubuntu 与 win10 共存" class=md-nav__link> 折腾 ubuntu 与 win10 共存 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-02-09-pc-system/ title="黑苹果与 Ubuntu 及 PC 折腾系统" class=md-nav__link> 黑苹果与 Ubuntu 及 PC 折腾系统 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-03-12-install-Vmware-on-linux/ title="deepin 安装 VMware" class=md-nav__link> deepin 安装 VMware </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-03-31-SQL/ title="Spring Boot 开发遇到一些 SQL 问题" class=md-nav__link> Spring Boot 开发遇到一些 SQL 问题 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-06-jquery-confrim/ title="JQuery-Confrim 的一点问题" class=md-nav__link> JQuery-Confrim 的一点问题 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-06-some-plugins/ title="ECharts + PageHelper + Bootstrap Table" class=md-nav__link> ECharts + PageHelper + Bootstrap Table </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-09-js-in-thymeleaf/ title="Thymeleaf 里使用 JavaScript 时的注意事项" class=md-nav__link> Thymeleaf 里使用 JavaScript 时的注意事项 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-04-09-spring-boot-gradle-yml-log4j2/ title="Spring Boot + Gradle + yml 配置 log4j2" class=md-nav__link> Spring Boot + Gradle + yml 配置 log4j2 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-09-softwares/ title="Linux 常用软件" class=md-nav__link> Linux 常用软件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-30-hexo-image/ title="【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径）" class=md-nav__link> 【可能过时】Hexo 一点问题（生成博文插入本地图片,修改文章路径） </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-05-30-show/ title=如果给文章提供多种渲染方式 class=md-nav__link> 如果给文章提供多种渲染方式 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-08-30-vue-music/ title="简单的单页应用(Vue CLI2 的简单使用)" class=md-nav__link> 简单的单页应用(Vue CLI2 的简单使用) </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2018-09-23-word-count/ title="WordCount 项目总结" class=md-nav__link> WordCount 项目总结 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-06-markall-douban-backup/ title=豆瓣标记数据备份插件 class=md-nav__link> 豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-07-markall-douban-backup-yes/ title=【过时】又一个——豆瓣标记数据备份插件 class=md-nav__link> 【过时】又一个——豆瓣标记数据备份插件 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/2020-02-13-blog/ title=从分析本网站的网络请求谈起 class=md-nav__link> 从分析本网站的网络请求谈起 </a> </li> <li class=md-nav__item> <a href=../../../../../tech/undefined/draft/ title=Draft class=md-nav__link> Draft </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 文件和目录路径 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 选取路径部分片段 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 路径分析 </a> </li> <li class=md-nav__item> <a href=#paths class=md-nav__link> Paths的增减修改 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 目录 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 文件系统 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 路径监听 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 文件查找 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 文件读写 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 本章小结 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/hqweay/my-mkdocs/edit/master/docs/book/OnJava8/docs/book/17-Files.md title=编辑此页 class="md-icon md-content__icon">&#xE3C9;</a> <div class=toc> <ul> <li><a href=#_1>第十七章 文件</a><ul> <li><a href=#_2>文件和目录路径</a><ul> <li><a href=#_3>选取路径部分片段</a></li> <li><a href=#_4>路径分析</a></li> <li><a href=#paths>Paths的增减修改</a></li> </ul> </li> <li><a href=#_5>目录</a></li> <li><a href=#_6>文件系统</a></li> <li><a href=#_7>路径监听</a></li> <li><a href=#_8>文件查找</a></li> <li><a href=#_9>文件读写</a></li> <li><a href=#_10>本章小结</a></li> </ul> </li> </ul> </div> <!-- File --> <h1 id=_1>第十七章 文件<a class=headerlink href=#_1 title="Permanent link">#</a></h1> <blockquote> <p>在丑陋的 Java I/O 编程方式诞生多年以后，Java终于简化了文件读写的基本操作。</p> </blockquote> <p>这种"困难方式"的全部细节都在 <a href=../Appendix-IO-Streams/ >Appendix: I/O Streams</a>。如果你读过这个部分，就会认同 Java 设计者毫不在意他们的使用者的体验这一观念。打开并读取文件对于大多数编程语言来说是非常常用的，由于 I/O 糟糕的设计以至于 很少有人能够在不依赖其他参考代码的情况下完成打开文件的操作。</p> <p>好像 Java 设计者终于意识到了 Java 使用者多年来的痛苦，在 Java7 中对此引入了巨大的改进。这些新元素被放在 <strong>java.nio.file</strong> 包下面，过去人们通常把 <strong>nio</strong> 中的 <strong>n</strong> 理解为 <strong>new</strong> 即新的 <strong>io</strong>，现在更应该当成是 <strong>non-blocking</strong> 非阻塞 <strong>io</strong>(<strong>io</strong>就是<em>input/output输入/输出</em>)。<strong>java.nio.file</strong> 库终于将 Java 文件操作带到与其他编程语言相同的水平。最重要的是 Java8 新增的 streams 与文件结合使得文件操作编程变得更加优雅。我们将看一下文件操作的两个基本组件：</p> <ol> <li>文件或者目录的路径；</li> <li>文件本身。</li> </ol> <!-- File and Directory Paths --> <h2 id=_2>文件和目录路径<a class=headerlink href=#_2 title="Permanent link">#</a></h2> <p>一个 <strong>Path</strong> 对象表示一个文件或者目录的路径，是一个跨操作系统（OS）和文件系统的抽象，目的是在构造路径时不必关注底层操作系统，代码可以在不进行修改的情况下运行在不同的操作系统上。<strong>java.nio.file.Paths</strong> 类包含一个重载方法 <strong>static get()</strong>，该方法接受一系列 <strong>String</strong> 字符串或一个<em>统一资源标识符</em>(URI)作为参数，并且进行转换返回一个 <strong>Path</strong> 对象：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/PathInfo.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.net.URI</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.File</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>PathInfo</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>show</span><span class=p>(</span><span class=n>String</span> <span class=n>id</span><span class=p>,</span> <span class=n>Object</span> <span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>id</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span> <span class=o>+</span> <span class=n>p</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>info</span><span class=p>(</span><span class=n>Path</span> <span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;toString&quot;</span><span class=p>,</span> <span class=n>p</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Exists&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;RegularFile&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isRegularFile</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Directory&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isDirectory</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Absolute&quot;</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=na>isAbsolute</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;FileName&quot;</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=na>getFileName</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Parent&quot;</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=na>getParent</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Root&quot;</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=na>getRoot</span><span class=p>());</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;******************&quot;</span><span class=p>);</span>
    <span class=p>}</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&quot;os.name&quot;</span><span class=p>));</span>
        <span class=n>info</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;C:&quot;</span><span class=p>,</span> <span class=s>&quot;path&quot;</span><span class=p>,</span> <span class=s>&quot;to&quot;</span><span class=p>,</span> <span class=s>&quot;nowhere&quot;</span><span class=p>,</span> <span class=s>&quot;NoFile.txt&quot;</span><span class=p>));</span>
        <span class=n>Path</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;PathInfo.java&quot;</span><span class=p>);</span>
        <span class=n>info</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
        <span class=n>Path</span> <span class=n>ap</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=n>info</span><span class=p>(</span><span class=n>ap</span><span class=p>);</span>
        <span class=n>info</span><span class=p>(</span><span class=n>ap</span><span class=p>.</span><span class=na>getParent</span><span class=p>());</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>info</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>toRealPath</span><span class=p>());</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
           <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=n>URI</span> <span class=n>u</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>toUri</span><span class=p>();</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;URI: &quot;</span> <span class=o>+</span> <span class=n>u</span><span class=p>);</span>
        <span class=n>Path</span> <span class=n>puri</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>u</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>puri</span><span class=p>));</span>
        <span class=n>File</span> <span class=n>f</span> <span class=o>=</span> <span class=n>ap</span><span class=p>.</span><span class=na>toFile</span><span class=p>();</span> <span class=c1>// Don&#39;t be fooled</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* 输出:</span>
<span class=cm>Windows 10</span>
<span class=cm>toString: C:\path\to\nowhere\NoFile.txt</span>
<span class=cm>Exists: false</span>
<span class=cm>RegularFile: false</span>
<span class=cm>Directory: false</span>
<span class=cm>Absolute: true</span>
<span class=cm>FileName: NoFile.txt</span>
<span class=cm>Parent: C:\path\to\nowhere</span>
<span class=cm>Root: C:\</span>
<span class=cm>******************</span>
<span class=cm>toString: PathInfo.java</span>
<span class=cm>Exists: true</span>
<span class=cm>RegularFile: true</span>
<span class=cm>Directory: false</span>
<span class=cm>Absolute: false</span>
<span class=cm>FileName: PathInfo.java</span>
<span class=cm>Parent: null</span>
<span class=cm>Root: null</span>
<span class=cm>******************</span>
<span class=cm>toString: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files\PathInfo.java</span>
<span class=cm>Exists: true</span>
<span class=cm>RegularFile: true</span>
<span class=cm>Directory: false</span>
<span class=cm>Absolute: true</span>
<span class=cm>FileName: PathInfo.java</span>
<span class=cm>Parent: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>Root: C:\</span>
<span class=cm>******************</span>
<span class=cm>toString: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>Exists: true</span>
<span class=cm>RegularFile: false</span>
<span class=cm>Directory: true</span>
<span class=cm>Absolute: true</span>
<span class=cm>FileName: files</span>
<span class=cm>Parent: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples</span>
<span class=cm>Root: C:\</span>
<span class=cm>******************</span>
<span class=cm>toString: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files\PathInfo.java</span>
<span class=cm>Exists: true</span>
<span class=cm>RegularFile: true</span>
<span class=cm>Directory: false</span>
<span class=cm>Absolute: true</span>
<span class=cm>FileName: PathInfo.java</span>
<span class=cm>Parent: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>Root: C:\</span>
<span class=cm>******************</span>
<span class=cm>URI: file:///C:/Users/Bruce/Documents/GitHub/onjava/</span>
<span class=cm>ExtractedExamples/files/PathInfo.java</span>
<span class=cm>true</span>
<span class=cm>*/</span>
</code></pre></div> <p>我已经在这一章第一个程序的 <strong>main()</strong> 方法添加了第一行用于展示操作系统的名称，因此你可以看到不同操作系统之间存在哪些差异。理想情况下，差别会相对较小，并且使用 <strong>/</strong> 或者 <strong>\</strong> 路径分隔符进行分隔。你可以看到我运行在Windows 10 上的程序输出。</p> <p>当 <strong>toString()</strong> 方法生成完整形式的路径，你可以看到 <strong>getFileName()</strong> 方法总是返回当前文件名。 通过使用 <strong>Files</strong> 工具类(我们接下来将会更多地使用它)，可以测试一个文件是否存在，测试是否是一个"普通"文件还是一个目录等等。"Nofile.txt"这个示例展示我们描述的文件可能并不在指定的位置；这样可以允许你创建一个新的路径。"PathInfo.java"存在于当前目录中，最初它只是没有路径的文件名，但它仍然被检测为"存在"。一旦我们将其转换为绝对路径，我们将会得到一个从"C:"盘(因为我们是在Windows机器下进行测试)开始的完整路径，现在它也拥有一个父路径。“真实”路径的定义在文档中有点模糊，因为它取决于具体的文件系统。例如，如果文件名不区分大小写，即使路径由于大小写的缘故而不是完全相同，也可能得到肯定的匹配结果。在这样的平台上，<strong>toRealPath()</strong> 将返回实际情况下的 <strong>Path</strong>，并且还会删除任何冗余元素。</p> <p>这里你会看到 <strong>URI</strong> 看起来只能用于描述文件，实际上 <strong>URI</strong> 可以用于描述更多的东西；通过 <a href=https://en.wikipedia.org/wiki/Uniform_Resource_Identifier>维基百科</a> 可以了解更多细节。现在我们成功地将 <strong>URI</strong> 转为一个 <strong>Path</strong> 对象。</p> <p>最后，你会在 <strong>Path</strong> 中看到一些有点欺骗的东西，这就是调用 <strong>toFile()</strong> 方法会生成一个 <strong>File</strong> 对象。听起来似乎可以得到一个类似文件的东西(毕竟被称为 <strong>File</strong> )，但是这个方法的存在仅仅是为了向后兼容。虽然看上去应该被称为"路径"，实际上却应该表示目录或者文件本身。这是个非常草率并且令人困惑的命名，但是由于 <strong>java.nio.file</strong> 的存在我们可以安全地忽略它的存在。</p> <h3 id=_3>选取路径部分片段<a class=headerlink href=#_3 title="Permanent link">#</a></h3> <p><strong>Path</strong> 对象可以非常容易地生成路径的某一部分：</p> <p><div class=highlight><pre><span></span><code><span class=c1>// files/PartsOfPaths.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>PartsOfPaths</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&quot;os.name&quot;</span><span class=p>));</span>
        <span class=n>Path</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;PartsOfPaths.java&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>p</span><span class=p>.</span><span class=na>getNameCount</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>getName</span><span class=p>(</span><span class=n>i</span><span class=p>));</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;ends with &#39;.java&#39;: &quot;</span> <span class=o>+</span>
        <span class=n>p</span><span class=p>.</span><span class=na>endsWith</span><span class=p>(</span><span class=s>&quot;.java&quot;</span><span class=p>));</span>
        <span class=k>for</span><span class=p>(</span><span class=n>Path</span> <span class=n>pp</span> <span class=p>:</span> <span class=n>p</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>pp</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span><span class=p>);</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>startsWith</span><span class=p>(</span><span class=n>pp</span><span class=p>)</span> <span class=o>+</span> <span class=s>&quot; : &quot;</span><span class=p>);</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>endsWith</span><span class=p>(</span><span class=n>pp</span><span class=p>));</span>
        <span class=p>}</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Starts with &quot;</span> <span class=o>+</span> <span class=n>p</span><span class=p>.</span><span class=na>getRoot</span><span class=p>()</span> <span class=o>+</span> <span class=s>&quot; &quot;</span> <span class=o>+</span> <span class=n>p</span><span class=p>.</span><span class=na>startsWith</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>getRoot</span><span class=p>()));</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* 输出:</span>
<span class=cm>Windows 10</span>
<span class=cm>Users</span>
<span class=cm>Bruce</span>
<span class=cm>Documents</span>
<span class=cm>GitHub</span>
<span class=cm>on-java</span>
<span class=cm>ExtractedExamples</span>
<span class=cm>files</span>
<span class=cm>PartsOfPaths.java</span>
<span class=cm>ends with &#39;.java&#39;: false</span>
<span class=cm>Users: false : false</span>
<span class=cm>Bruce: false : false</span>
<span class=cm>Documents: false : false</span>
<span class=cm>GitHub: false : false</span>
<span class=cm>on-java: false : false</span>
<span class=cm>ExtractedExamples: false : false</span>
<span class=cm>files: false : false</span>
<span class=cm>PartsOfPaths.java: false : true</span>
<span class=cm>Starts with C:\ true</span>
<span class=cm>*/</span>
</code></pre></div> 可以通过 <strong>getName()</strong> 来索引 <strong>Path</strong> 的各个部分，直到达到上限 <strong>getNameCount()</strong>。<strong>Path</strong> 也实现了 <strong>Iterable</strong> 接口，因此我们也可以通过增强的 for-each 进行遍历。请注意，即使路径以 <strong>.java</strong> 结尾，使用 <strong>endsWith()</strong> 方法也会返回 <strong>false</strong>。这是因为使用 <strong>endsWith()</strong> 比较的是整个路径部分，而不会包含文件路径的后缀。通过使用 <strong>startsWith()</strong> 和 <strong>endsWith()</strong> 也可以完成路径的遍历。但是我们可以看到，遍历 <strong>Path</strong> 对象并不包含根路径，只有使用 <strong>startsWith()</strong> 检测根路径时才会返回 <strong>true</strong>。</p> <h3 id=_4>路径分析<a class=headerlink href=#_4 title="Permanent link">#</a></h3> <p><strong>Files</strong> 工具类包含一系列完整的方法用于获得 <strong>Path</strong> 相关的信息。</p> <p><div class=highlight><pre><span></span><code><span class=c1>// files/PathAnalysis.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>PathAnalysis</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>say</span><span class=p>(</span><span class=n>String</span> <span class=n>id</span><span class=p>,</span> <span class=n>Object</span> <span class=n>result</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>print</span><span class=p>(</span><span class=n>id</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>result</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>IOException</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&quot;os.name&quot;</span><span class=p>));</span>
        <span class=n>Path</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;PathAnalysis.java&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Exists&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Directory&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isDirectory</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Executable&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isExecutable</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Readable&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isReadable</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;RegularFile&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isRegularFile</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Writable&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isWritable</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;notExists&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>notExists</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Hidden&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isHidden</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;size&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;FileStore&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>getFileStore</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;LastModified: &quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>getLastModifiedTime</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;Owner&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>getOwner</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;ContentType&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>probeContentType</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=n>say</span><span class=p>(</span><span class=s>&quot;SymbolicLink&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>isSymbolicLink</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=k>if</span><span class=p>(</span><span class=n>Files</span><span class=p>.</span><span class=na>isSymbolicLink</span><span class=p>(</span><span class=n>p</span><span class=p>))</span>
            <span class=n>say</span><span class=p>(</span><span class=s>&quot;SymbolicLink&quot;</span><span class=p>,</span> <span class=n>Files</span><span class=p>.</span><span class=na>readSymbolicLink</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
        <span class=k>if</span><span class=p>(</span><span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>().</span><span class=na>supportedFileAttributeViews</span><span class=p>().</span><span class=na>contains</span><span class=p>(</span><span class=s>&quot;posix&quot;</span><span class=p>))</span>
            <span class=n>say</span><span class=p>(</span><span class=s>&quot;PosixFilePermissions&quot;</span><span class=p>,</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>getPosixFilePermissions</span><span class=p>(</span><span class=n>p</span><span class=p>));</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* 输出:</span>
<span class=cm>Windows 10</span>
<span class=cm>Exists: true</span>
<span class=cm>Directory: false</span>
<span class=cm>Executable: true</span>
<span class=cm>Readable: true</span>
<span class=cm>RegularFile: true</span>
<span class=cm>Writable: true</span>
<span class=cm>notExists: false</span>
<span class=cm>Hidden: false</span>
<span class=cm>size: 1631</span>
<span class=cm>FileStore: SSD (C:)</span>
<span class=cm>LastModified: : 2017-05-09T12:07:00.428366Z</span>
<span class=cm>Owner: MINDVIEWTOSHIBA\Bruce (User)</span>
<span class=cm>ContentType: null</span>
<span class=cm>SymbolicLink: false</span>
<span class=cm>*/</span>
</code></pre></div> 在调用最后一个测试方法 <strong>getPosixFilePermissions()</strong> 之前我们需要确认一下当前文件系统是否支持 <strong>Posix</strong> 接口，否则会抛出运行时异常。</p> <h3 id=paths><strong>Paths</strong>的增减修改<a class=headerlink href=#paths title="Permanent link">#</a></h3> <p>我们必须能通过对 <strong>Path</strong> 对象增加或者删除一部分来构造一个新的 <strong>Path</strong> 对象。我们使用 <strong>relativize()</strong> 移除 <strong>Path</strong> 的根路径，使用 <strong>resolve()</strong> 添加 <strong>Path</strong> 的尾路径(不一定是“可发现”的名称)。</p> <p>对于下面代码中的示例，我使用 <strong>relativize()</strong> 方法从所有的输出中移除根路径，部分原因是为了示范，部分原因是为了简化输出结果，这说明你可以使用该方法将绝对路径转为相对路径。 这个版本的代码中包含 <strong>id</strong>，以便于跟踪输出结果：</p> <p><div class=highlight><pre><span></span><code><span class=c1>// files/AddAndSubtractPaths.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>AddAndSubtractPaths</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=n>Path</span> <span class=n>base</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;..&quot;</span><span class=p>,</span> <span class=s>&quot;..&quot;</span><span class=p>,</span> <span class=s>&quot;..&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>().</span><span class=na>normalize</span><span class=p>();</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>show</span><span class=p>(</span><span class=kt>int</span> <span class=n>id</span><span class=p>,</span> <span class=n>Path</span> <span class=n>result</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=na>isAbsolute</span><span class=p>())</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;(&quot;</span> <span class=o>+</span> <span class=n>id</span> <span class=o>+</span> <span class=s>&quot;)r &quot;</span> <span class=o>+</span> <span class=n>base</span><span class=p>.</span><span class=na>relativize</span><span class=p>(</span><span class=n>result</span><span class=p>));</span>
        <span class=k>else</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;(&quot;</span> <span class=o>+</span> <span class=n>id</span> <span class=o>+</span> <span class=s>&quot;) &quot;</span> <span class=o>+</span> <span class=n>result</span><span class=p>);</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;RealPath: &quot;</span> <span class=o>+</span> <span class=n>result</span><span class=p>.</span><span class=na>toRealPath</span><span class=p>());</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&quot;os.name&quot;</span><span class=p>));</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>base</span><span class=p>);</span>
        <span class=n>Path</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;AddAndSubtractPaths.java&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>p</span><span class=p>);</span>
        <span class=n>Path</span> <span class=n>convoluted</span> <span class=o>=</span> <span class=n>p</span><span class=p>.</span><span class=na>getParent</span><span class=p>().</span><span class=na>getParent</span><span class=p>()</span>
        <span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;strings&quot;</span><span class=p>).</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;..&quot;</span><span class=p>)</span>
        <span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>getParent</span><span class=p>().</span><span class=na>getFileName</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>convoluted</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>convoluted</span><span class=p>.</span><span class=na>normalize</span><span class=p>());</span>
        <span class=n>Path</span> <span class=n>p2</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;..&quot;</span><span class=p>,</span> <span class=s>&quot;..&quot;</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=n>p2</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=n>p2</span><span class=p>.</span><span class=na>normalize</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span> <span class=n>p2</span><span class=p>.</span><span class=na>toAbsolutePath</span><span class=p>().</span><span class=na>normalize</span><span class=p>());</span>
        <span class=n>Path</span> <span class=n>p3</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;.&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=n>Path</span> <span class=n>p4</span> <span class=o>=</span> <span class=n>p3</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=n>p2</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=n>p4</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=n>p4</span><span class=p>.</span><span class=na>normalize</span><span class=p>());</span>
        <span class=n>Path</span> <span class=n>p5</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;&quot;</span><span class=p>).</span><span class=na>toAbsolutePath</span><span class=p>();</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>9</span><span class=p>,</span> <span class=n>p5</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=n>p5</span><span class=p>.</span><span class=na>resolveSibling</span><span class=p>(</span><span class=s>&quot;strings&quot;</span><span class=p>));</span>
        <span class=n>show</span><span class=p>(</span><span class=mi>11</span><span class=p>,</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;nonexistent&quot;</span><span class=p>));</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* 输出:</span>
<span class=cm>Windows 10</span>
<span class=cm>C:\Users\Bruce\Documents\GitHub</span>
<span class=cm>(1)r onjava\</span>
<span class=cm>ExtractedExamples\files\AddAndSubtractPaths.java</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files\AddAndSubtractPaths.java</span>
<span class=cm>(2)r on-java\ExtractedExamples\strings\..\files</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>(3)r on-java\ExtractedExamples\files</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>(4) ..\..</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\on-java</span>
<span class=cm>(5) ..\..</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\on-java</span>
<span class=cm>(6)r on-java</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\on-java</span>
<span class=cm>(7)r on-java\ExtractedExamples\files\.\..\..</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\on-java</span>
<span class=cm>(8)r on-java</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\on-java</span>
<span class=cm>(9)r on-java\ExtractedExamples\files</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files</span>
<span class=cm>(10)r on-java\ExtractedExamples\strings</span>
<span class=cm>RealPath: C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\strings</span>
<span class=cm>(11) nonexistent</span>
<span class=cm>java.nio.file.NoSuchFileException:</span>
<span class=cm>C:\Users\Bruce\Documents\GitHub\onjava\</span>
<span class=cm>ExtractedExamples\files\nonexistent</span>
<span class=cm>*/</span>
</code></pre></div> 我还为 <strong>toRealPath()</strong> 添加了更多的测试，这是为了扩展和规则化，防止路径不存在时抛出运行时异常。</p> <!-- Directories --> <h2 id=_5>目录<a class=headerlink href=#_5 title="Permanent link">#</a></h2> <p><strong>Files</strong> 工具类包含大部分我们需要的目录操作和文件操作方法。出于某种原因，它们没有包含删除目录树相关的方法，因此我们将实现并将其添加到 <strong>onjava</strong> 库中。</p> <p><div class=highlight><pre><span></span><code><span class=c1>// onjava/RmDir.java</span>
<span class=kn>package</span> <span class=nn>onjava</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.attribute.BasicFileAttributes</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>RmDir</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>rmdir</span><span class=p>(</span><span class=n>Path</span> <span class=n>dir</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>IOException</span> <span class=p>{</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>walkFileTree</span><span class=p>(</span><span class=n>dir</span><span class=p>,</span> <span class=k>new</span> <span class=n>SimpleFileVisitor</span><span class=o>&lt;</span><span class=n>Path</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span>
            <span class=nd>@Override</span>
            <span class=kd>public</span> <span class=n>FileVisitResult</span> <span class=nf>visitFile</span><span class=p>(</span><span class=n>Path</span> <span class=n>file</span><span class=p>,</span> <span class=n>BasicFileAttributes</span> <span class=n>attrs</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>IOException</span> <span class=p>{</span>
                <span class=n>Files</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
                <span class=k>return</span> <span class=n>FileVisitResult</span><span class=p>.</span><span class=na>CONTINUE</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=nd>@Override</span>
            <span class=kd>public</span> <span class=n>FileVisitResult</span> <span class=nf>postVisitDirectory</span><span class=p>(</span><span class=n>Path</span> <span class=n>dir</span><span class=p>,</span> <span class=n>IOException</span> <span class=n>exc</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>IOException</span> <span class=p>{</span>
                <span class=n>Files</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>dir</span><span class=p>);</span>
                <span class=k>return</span> <span class=n>FileVisitResult</span><span class=p>.</span><span class=na>CONTINUE</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>});</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> 删除目录树的方法实现依赖于 <strong>Files.walkFileTree()</strong>，"walking" 目录树意味着遍历每个子目录和文件。<em>Visitor</em> 设计模式提供了一种标准机制来访问集合中的每个对象，然后你需要提供在每个对象上执行的操作。 此操作的定义取决于实现的 <strong>FileVisitor</strong> 的四个抽象方法，包括：</p> <pre><code>1.  **preVisitDirectory()**：在访问目录中条目之前在目录上运行。 
2.  **visitFile()**：运行目录中的每一个文件。  
3.  **visitFileFailed()**：调用无法访问的文件。   
4.  **postVisitDirectory()**：在访问目录中条目之后在目录上运行，包括所有的子目录。
</code></pre> <p>为了简化，<strong>java.nio.file.SimpleFileVisitor</strong> 提供了所有方法的默认实现。这样，在我们的匿名内部类中，我们只需要重写非标准行为的方法：<strong>visitFile()</strong> 和 <strong>postVisitDirectory()</strong> 实现删除文件和删除目录。两者都应该返回标志位决定是否继续访问(这样就可以继续访问，直到找到所需要的)。 作为探索目录操作的一部分，现在我们可以有条件地删除已存在的目录。在以下例子中，<strong>makeVariant()</strong> 接受基本目录测试，并通过旋转部件列表生成不同的子目录路径。这些旋转与路径分隔符 <strong>sep</strong> 使用 <strong>String.join()</strong> 贴在一起，然后返回一个 <strong>Path</strong> 对象。</p> <p><div class=highlight><pre><span></span><code><span class=c1>// files/Directories.java</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>onjava.RmDir</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Directories</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=n>Path</span> <span class=n>test</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;test&quot;</span><span class=p>);</span>
    <span class=kd>static</span> <span class=n>String</span> <span class=n>sep</span> <span class=o>=</span> <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>().</span><span class=na>getSeparator</span><span class=p>();</span>
    <span class=kd>static</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>parts</span> <span class=o>=</span> <span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&quot;foo&quot;</span><span class=p>,</span> <span class=s>&quot;bar&quot;</span><span class=p>,</span> <span class=s>&quot;baz&quot;</span><span class=p>,</span> <span class=s>&quot;bag&quot;</span><span class=p>);</span>

    <span class=kd>static</span> <span class=n>Path</span> <span class=nf>makeVariant</span><span class=p>()</span> <span class=p>{</span>
        <span class=n>Collections</span><span class=p>.</span><span class=na>rotate</span><span class=p>(</span><span class=n>parts</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
        <span class=k>return</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;test&quot;</span><span class=p>,</span> <span class=n>String</span><span class=p>.</span><span class=na>join</span><span class=p>(</span><span class=n>sep</span><span class=p>,</span> <span class=n>parts</span><span class=p>));</span>
    <span class=p>}</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>refreshTestDir</span><span class=p>()</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=k>if</span><span class=p>(</span><span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>test</span><span class=p>))</span>
        <span class=n>RmDir</span><span class=p>.</span><span class=na>rmdir</span><span class=p>(</span><span class=n>test</span><span class=p>);</span>
        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>test</span><span class=p>))</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>createDirectory</span><span class=p>(</span><span class=n>test</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>refreshTestDir</span><span class=p>();</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>createFile</span><span class=p>(</span><span class=n>test</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;Hello.txt&quot;</span><span class=p>));</span>
        <span class=n>Path</span> <span class=n>variant</span> <span class=o>=</span> <span class=n>makeVariant</span><span class=p>();</span>
        <span class=c1>// Throws exception (too many levels):</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>Files</span><span class=p>.</span><span class=na>createDirectory</span><span class=p>(</span><span class=n>variant</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>Exception</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Nope, that doesn&#39;t work.&quot;</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=n>populateTestDir</span><span class=p>();</span>
        <span class=n>Path</span> <span class=n>tempdir</span> <span class=o>=</span> <span class=n>Files</span><span class=p>.</span><span class=na>createTempDirectory</span><span class=p>(</span><span class=n>test</span><span class=p>,</span> <span class=s>&quot;DIR_&quot;</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>createTempFile</span><span class=p>(</span><span class=n>tempdir</span><span class=p>,</span> <span class=s>&quot;pre&quot;</span><span class=p>,</span> <span class=s>&quot;.non&quot;</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>newDirectoryStream</span><span class=p>(</span><span class=n>test</span><span class=p>).</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;*********&quot;</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>test</span><span class=p>).</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>populateTestDir</span><span class=p>()</span> <span class=kd>throws</span> <span class=n>Exception</span>  <span class=p>{</span>
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>parts</span><span class=p>.</span><span class=na>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>Path</span> <span class=n>variant</span> <span class=o>=</span> <span class=n>makeVariant</span><span class=p>();</span>
            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>Files</span><span class=p>.</span><span class=na>exists</span><span class=p>(</span><span class=n>variant</span><span class=p>))</span> <span class=p>{</span>
                <span class=n>Files</span><span class=p>.</span><span class=na>createDirectories</span><span class=p>(</span><span class=n>variant</span><span class=p>);</span>
                <span class=n>Files</span><span class=p>.</span><span class=na>copy</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;Directories.java&quot;</span><span class=p>),</span>
                    <span class=n>variant</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;File.txt&quot;</span><span class=p>));</span>
                <span class=n>Files</span><span class=p>.</span><span class=na>createTempFile</span><span class=p>(</span><span class=n>variant</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=kc>null</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* 输出:</span>
<span class=cm>Nope, that doesn&#39;t work.</span>
<span class=cm>test\bag</span>
<span class=cm>test\bar</span>
<span class=cm>test\baz</span>
<span class=cm>test\DIR_5142667942049986036</span>
<span class=cm>test\foo</span>
<span class=cm>test\Hello.txt</span>
<span class=cm>*********</span>
<span class=cm>test</span>
<span class=cm>test\bag</span>
<span class=cm>test\bag\foo</span>
<span class=cm>test\bag\foo\bar</span>
<span class=cm>test\bag\foo\bar\baz</span>
<span class=cm>test\bag\foo\bar\baz\8279660869874696036.tmp</span>
<span class=cm>test\bag\foo\bar\baz\File.txt</span>
<span class=cm>test\bar</span>
<span class=cm>test\bar\baz</span>
<span class=cm>test\bar\baz\bag</span>
<span class=cm>test\bar\baz\bag\foo</span>
<span class=cm>test\bar\baz\bag\foo\1274043134240426261.tmp</span>
<span class=cm>test\bar\baz\bag\foo\File.txt</span>
<span class=cm>test\baz</span>
<span class=cm>test\baz\bag</span>
<span class=cm>test\baz\bag\foo</span>
<span class=cm>test\baz\bag\foo\bar</span>
<span class=cm>test\baz\bag\foo\bar\6130572530014544105.tmp</span>
<span class=cm>test\baz\bag\foo\bar\File.txt</span>
<span class=cm>test\DIR_5142667942049986036</span>
<span class=cm>test\DIR_5142667942049986036\pre7704286843227113253.non</span>
<span class=cm>test\foo</span>
<span class=cm>test\foo\bar</span>
<span class=cm>test\foo\bar\baz</span>
<span class=cm>test\foo\bar\baz\bag</span>
<span class=cm>test\foo\bar\baz\bag\5412864507741775436.tmp</span>
<span class=cm>test\foo\bar\baz\bag\File.txt</span>
<span class=cm>test\Hello.txt</span>
<span class=cm>*/</span>
</code></pre></div> 首先，<strong>refreshTestDir()</strong> 用于检测 <strong>test</strong> 目录是否已经存在。若存在，则使用我们新工具类 <strong>rmdir()</strong> 删除其整个目录。检查是否 <strong>exists</strong> 是多余的，但我想说明一点，因为如果你对于已经存在的目录调用 <strong>createDirectory()</strong> 将会抛出异常。<strong>createFile()</strong> 使用参数 <strong>Path</strong> 创建一个空文件; <strong>resolve()</strong> 将文件名添加到 <strong>test Path</strong> 的末尾。</p> <p>我们尝试使用 <strong>createDirectory()</strong> 来创建多级路径，但是这样会抛出异常，因为这个方法只能创建单级路径。我已经将 <strong>populateTestDir()</strong> 作为一个单独的方法，因为它将在后面的例子中被重用。对于每一个变量 <strong>variant</strong>，我们都能使用 <strong>createDirectories()</strong> 创建完整的目录路径，然后使用此文件的副本以不同的目标名称填充该终端目录。然后我们使用 <strong>createTempFile()</strong> 生成一个临时文件。</p> <p>在调用 <strong>populateTestDir()</strong> 之后，我们在 <strong>test</strong> 目录下面创建一个临时目录。请注意，<strong>createTempDirectory()</strong> 只有名称的前缀选项。与 <strong>createTempFile()</strong> 不同，我们再次使用它将临时文件放入新的临时目录中。你可以从输出中看到，如果未指定后缀，它将默认使用".tmp"作为后缀。</p> <p>为了展示结果，我们首次使用看起来很有希望的 <strong>newDirectoryStream()</strong>，但事实证明这个方法只是返回 <strong>test</strong> 目录内容的 Stream 流，并没有更多的内容。要获取目录树的全部内容的流，请使用 <strong>Files.walk()</strong>。</p> <!-- File Systems --> <h2 id=_6>文件系统<a class=headerlink href=#_6 title="Permanent link">#</a></h2> <p>为了完整起见，我们需要一种方法查找文件系统相关的其他信息。在这里，我们使用静态的 <strong>FileSystems</strong> 工具类获取"默认"的文件系统，但你同样也可以在 <strong>Path</strong> 对象上调用 <strong>getFileSystem()</strong> 以获取创建该 <strong>Path</strong> 的文件系统。你可以获得给定 <em>URI</em> 的文件系统，还可以构建新的文件系统(对于支持它的操作系统)。 <div class=highlight><pre><span></span><code><span class=c1>// files/FileSystemDemo.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>FileSystemDemo</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>show</span><span class=p>(</span><span class=n>String</span> <span class=n>id</span><span class=p>,</span> <span class=n>Object</span> <span class=n>o</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>id</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span> <span class=o>+</span> <span class=n>o</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&quot;os.name&quot;</span><span class=p>));</span>
        <span class=n>FileSystem</span> <span class=n>fsys</span> <span class=o>=</span> <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>();</span>
        <span class=k>for</span><span class=p>(</span><span class=n>FileStore</span> <span class=n>fs</span> <span class=p>:</span> <span class=n>fsys</span><span class=p>.</span><span class=na>getFileStores</span><span class=p>())</span>
            <span class=n>show</span><span class=p>(</span><span class=s>&quot;File Store&quot;</span><span class=p>,</span> <span class=n>fs</span><span class=p>);</span>
        <span class=k>for</span><span class=p>(</span><span class=n>Path</span> <span class=n>rd</span> <span class=p>:</span> <span class=n>fsys</span><span class=p>.</span><span class=na>getRootDirectories</span><span class=p>())</span>
            <span class=n>show</span><span class=p>(</span><span class=s>&quot;Root Directory&quot;</span><span class=p>,</span> <span class=n>rd</span><span class=p>);</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;Separator&quot;</span><span class=p>,</span> <span class=n>fsys</span><span class=p>.</span><span class=na>getSeparator</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;UserPrincipalLookupService&quot;</span><span class=p>,</span>
            <span class=n>fsys</span><span class=p>.</span><span class=na>getUserPrincipalLookupService</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;isOpen&quot;</span><span class=p>,</span> <span class=n>fsys</span><span class=p>.</span><span class=na>isOpen</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;isReadOnly&quot;</span><span class=p>,</span> <span class=n>fsys</span><span class=p>.</span><span class=na>isReadOnly</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;FileSystemProvider&quot;</span><span class=p>,</span> <span class=n>fsys</span><span class=p>.</span><span class=na>provider</span><span class=p>());</span>
        <span class=n>show</span><span class=p>(</span><span class=s>&quot;File Attribute Views&quot;</span><span class=p>,</span>
        <span class=n>fsys</span><span class=p>.</span><span class=na>supportedFileAttributeViews</span><span class=p>());</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* 输出:</span>
<span class=cm>Windows 10</span>
<span class=cm>File Store: SSD (C:)</span>
<span class=cm>Root Directory: C:\</span>
<span class=cm>Root Directory: D:\</span>
<span class=cm>Separator: \</span>
<span class=cm>UserPrincipalLookupService:</span>
<span class=cm>sun.nio.fs.WindowsFileSystem$LookupService$1@15db9742</span>
<span class=cm>isOpen: true</span>
<span class=cm>isReadOnly: false</span>
<span class=cm>FileSystemProvider:</span>
<span class=cm>sun.nio.fs.WindowsFileSystemProvider@6d06d69c</span>
<span class=cm>File Attribute Views: [owner, dos, acl, basic, user]</span>
<span class=cm>*/</span>
</code></pre></div> 一个 <strong>FileSystem</strong> 对象也能生成 <strong>WatchService</strong> 和 <strong>PathMatcher</strong> 对象，将会在接下来两章中详细讲解。</p> <!-- Watching a Path --> <h2 id=_7>路径监听<a class=headerlink href=#_7 title="Permanent link">#</a></h2> <p>通过 <strong>WatchService</strong> 可以设置一个进程对目录中的更改做出响应。在这个例子中，<strong>delTxtFiles()</strong> 作为一个单独的任务执行，该任务将遍历整个目录并删除以 <strong>.txt</strong> 结尾的所有文件，<strong>WatchService</strong> 会对文件删除操作做出反应：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/PathWatcher.java</span>
<span class=c1>// {ExcludeFromGradle}</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import static</span> <span class=nn>java.nio.file.StandardWatchEventKinds.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.concurrent.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>PathWatcher</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=n>Path</span> <span class=n>test</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;test&quot;</span><span class=p>);</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>delTxtFiles</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>test</span><span class=p>)</span>
            <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>f</span> <span class=o>-&gt;</span>
                <span class=n>f</span><span class=p>.</span><span class=na>toString</span><span class=p>()</span>
                <span class=p>.</span><span class=na>endsWith</span><span class=p>(</span><span class=s>&quot;.txt&quot;</span><span class=p>))</span>
                <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>f</span> <span class=o>-&gt;</span> <span class=p>{</span>
                <span class=k>try</span> <span class=p>{</span>
                    <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;deleting &quot;</span> <span class=o>+</span> <span class=n>f</span><span class=p>);</span>
                    <span class=n>Files</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>f</span><span class=p>);</span>
                <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
                    <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>});</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>refreshTestDir</span><span class=p>();</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>populateTestDir</span><span class=p>();</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>createFile</span><span class=p>(</span><span class=n>test</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;Hello.txt&quot;</span><span class=p>));</span>
        <span class=n>WatchService</span> <span class=n>watcher</span> <span class=o>=</span> <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>().</span><span class=na>newWatchService</span><span class=p>();</span>
        <span class=n>test</span><span class=p>.</span><span class=na>register</span><span class=p>(</span><span class=n>watcher</span><span class=p>,</span> <span class=n>ENTRY_DELETE</span><span class=p>);</span>
        <span class=n>Executors</span><span class=p>.</span><span class=na>newSingleThreadScheduledExecutor</span><span class=p>()</span>
        <span class=p>.</span><span class=na>schedule</span><span class=p>(</span><span class=n>PathWatcher</span><span class=p>::</span><span class=n>delTxtFiles</span><span class=p>,</span>
        <span class=mi>250</span><span class=p>,</span> <span class=n>TimeUnit</span><span class=p>.</span><span class=na>MILLISECONDS</span><span class=p>);</span>
        <span class=n>WatchKey</span> <span class=n>key</span> <span class=o>=</span> <span class=n>watcher</span><span class=p>.</span><span class=na>take</span><span class=p>();</span>
        <span class=k>for</span><span class=p>(</span><span class=n>WatchEvent</span> <span class=n>evt</span> <span class=p>:</span> <span class=n>key</span><span class=p>.</span><span class=na>pollEvents</span><span class=p>())</span> <span class=p>{</span>
            <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;evt.context(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>context</span><span class=p>()</span> <span class=o>+</span>
            <span class=s>&quot;\nevt.count(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>count</span><span class=p>()</span> <span class=o>+</span>
            <span class=s>&quot;\nevt.kind(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>kind</span><span class=p>());</span>
            <span class=n>System</span><span class=p>.</span><span class=na>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>deleting test\bag\foo\bar\baz\File.txt</span>
<span class=cm>deleting test\bar\baz\bag\foo\File.txt</span>
<span class=cm>deleting test\baz\bag\foo\bar\File.txt</span>
<span class=cm>deleting test\foo\bar\baz\bag\File.txt</span>
<span class=cm>deleting test\Hello.txt</span>
<span class=cm>evt.context(): Hello.txt</span>
<span class=cm>evt.count(): 1</span>
<span class=cm>evt.kind(): ENTRY_DELETE</span>
<span class=cm>*/</span>
</code></pre></div> <p><strong>delTxtFiles()</strong> 中的 <strong>try</strong> 代码块看起来有些多余，因为它们捕获的是同一种类型的异常，外部的 <strong>try</strong> 语句似乎已经足够了。然而出于某种原因，Java 要求两者都必须存在(这也可能是一个 bug)。还要注意的是在 <strong>filter()</strong> 中，我们必须显式地使用 <strong>f.toString()</strong> 转为字符串，否则我们调用 <strong>endsWith()</strong> 将会与整个 <strong>Path</strong> 对象进行比较，而不是路径名称字符串的一部分进行比较。</p> <p>一旦我们从 <strong>FileSystem</strong> 中得到了 <strong>WatchService</strong> 对象，我们将其注册到 <strong>test</strong> 路径以及我们感兴趣的项目的变量参数列表中，可以选择 <strong>ENTRY_CREATE</strong>，<strong>ENTRY_DELETE</strong> 或 <strong>ENTRY_MODIFY</strong>(其中创建和删除不属于修改)。</p> <p>因为接下来对 <strong>watcher.take()</strong> 的调用会在发生某些事情之前停止所有操作，所以我们希望 <strong>deltxtfiles()</strong> 能够并行运行以便生成我们感兴趣的事件。为了实现这个目的，我通过调用 <strong>Executors.newSingleThreadScheduledExecutor()</strong> 产生一个 <strong>ScheduledExecutorService</strong> 对象，然后调用 <strong>schedule()</strong> 方法传递所需函数的方法引用，并且设置在运行之前应该等待的时间。</p> <p>此时，<strong>watcher.take()</strong> 将等待并阻塞在这里。当目标事件发生时，会返回一个包含 <strong>WatchEvent</strong> 的 <strong>Watchkey</strong> 对象。展示的这三种方法是能对 <strong>WatchEvent</strong> 执行的全部操作。</p> <p>查看输出的具体内容。即使我们正在删除以 <strong>.txt</strong> 结尾的文件，在 <strong>Hello.txt</strong> 被删除之前，<strong>WatchService</strong> 也不会被触发。你可能认为，如果说"监视这个目录"，自然会包含整个目录和下面子目录，但实际上：只会监视给定的目录，而不是下面的所有内容。如果需要监视整个树目录，必须在整个树的每个子目录上放置一个 <strong>Watchservice</strong>。</p> <div class=highlight><pre><span></span><code><span class=c1>// files/TreeWatcher.java</span>
<span class=c1>// {ExcludeFromGradle}</span>
<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import static</span> <span class=nn>java.nio.file.StandardWatchEventKinds.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.concurrent.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TreeWatcher</span> <span class=p>{</span>

    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>watchDir</span><span class=p>(</span><span class=n>Path</span> <span class=n>dir</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>WatchService</span> <span class=n>watcher</span> <span class=o>=</span>
            <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>().</span><span class=na>newWatchService</span><span class=p>();</span>
            <span class=n>dir</span><span class=p>.</span><span class=na>register</span><span class=p>(</span><span class=n>watcher</span><span class=p>,</span> <span class=n>ENTRY_DELETE</span><span class=p>);</span>
            <span class=n>Executors</span><span class=p>.</span><span class=na>newSingleThreadExecutor</span><span class=p>().</span><span class=na>submit</span><span class=p>(()</span> <span class=o>-&gt;</span> <span class=p>{</span>
                <span class=k>try</span> <span class=p>{</span>
                    <span class=n>WatchKey</span> <span class=n>key</span> <span class=o>=</span> <span class=n>watcher</span><span class=p>.</span><span class=na>take</span><span class=p>();</span>
                    <span class=k>for</span><span class=p>(</span><span class=n>WatchEvent</span> <span class=n>evt</span> <span class=p>:</span> <span class=n>key</span><span class=p>.</span><span class=na>pollEvents</span><span class=p>())</span> <span class=p>{</span>
                        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span>
                        <span class=s>&quot;evt.context(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>context</span><span class=p>()</span> <span class=o>+</span>
                        <span class=s>&quot;\nevt.count(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>count</span><span class=p>()</span> <span class=o>+</span>
                        <span class=s>&quot;\nevt.kind(): &quot;</span> <span class=o>+</span> <span class=n>evt</span><span class=p>.</span><span class=na>kind</span><span class=p>());</span>
                        <span class=n>System</span><span class=p>.</span><span class=na>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
                    <span class=p>}</span>
                <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>InterruptedException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
                    <span class=k>return</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>});</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>refreshTestDir</span><span class=p>();</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>populateTestDir</span><span class=p>();</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;test&quot;</span><span class=p>))</span>
            <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>Files</span><span class=p>::</span><span class=n>isDirectory</span><span class=p>)</span>
            <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>TreeWatcher</span><span class=p>::</span><span class=n>watchDir</span><span class=p>);</span>
        <span class=n>PathWatcher</span><span class=p>.</span><span class=na>delTxtFiles</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=cm>/* Output:</span>
<span class=cm>deleting test\bag\foo\bar\baz\File.txt</span>
<span class=cm>deleting test\bar\baz\bag\foo\File.txt</span>
<span class=cm>evt.context(): File.txt</span>
<span class=cm>evt.count(): 1</span>
<span class=cm>evt.kind(): ENTRY_DELETE</span>
<span class=cm>*/</span>
</code></pre></div> <p>在 <strong>watchDir()</strong> 方法中给 <strong>WatchSevice</strong> 提供参数 <strong>ENTRY_DELETE</strong>，并启动一个独立的线程来监视该<strong>Watchservice</strong>。这里我们没有使用 <strong>schedule()</strong> 进行启动，而是使用 <strong>submit()</strong> 启动线程。我们遍历整个目录树，并将 <strong>watchDir()</strong> 应用于每个子目录。现在，当我们运行 <strong>deltxtfiles()</strong> 时，其中一个 <strong>Watchservice</strong> 会检测到每一次文件删除。</p> <!-- Finding Files --> <h2 id=_8>文件查找<a class=headerlink href=#_8 title="Permanent link">#</a></h2> <p>到目前为止，为了找到文件，我们一直使用相当粗糙的方法，在 <code>path</code> 上调用 <code>toString()</code>，然后使用 <code>string</code> 操作查看结果。事实证明，<code>java.nio.file</code> 有更好的解决方案：通过在 <code>FileSystem</code> 对象上调用 <code>getPathMatcher()</code> 获得一个 <code>PathMatcher</code>，然后传入您感兴趣的模式。模式有两个选项：<code>glob</code> 和 <code>regex</code>。<code>glob</code> 比较简单，实际上功能非常强大，因此您可以使用 <code>glob</code> 解决许多问题。如果您的问题更复杂，可以使用 <code>regex</code>，这将在接下来的 <code>Strings</code> 一章中解释。</p> <p>在这里，我们使用 <code>glob</code> 查找以 <code>.tmp</code> 或 <code>.txt</code> 结尾的所有 <code>Path</code>：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/Find.java</span>
<span class=c1>// {ExcludeFromGradle}</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Find</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>Path</span> <span class=n>test</span> <span class=o>=</span> <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;test&quot;</span><span class=p>);</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>refreshTestDir</span><span class=p>();</span>
        <span class=n>Directories</span><span class=p>.</span><span class=na>populateTestDir</span><span class=p>();</span>
        <span class=c1>// Creating a *directory*, not a file:</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>createDirectory</span><span class=p>(</span><span class=n>test</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=s>&quot;dir.tmp&quot;</span><span class=p>));</span>

        <span class=n>PathMatcher</span> <span class=n>matcher</span> <span class=o>=</span> <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>()</span>
          <span class=p>.</span><span class=na>getPathMatcher</span><span class=p>(</span><span class=s>&quot;glob:**/*.{tmp,txt}&quot;</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>test</span><span class=p>)</span>
          <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>matcher</span><span class=p>::</span><span class=n>matches</span><span class=p>)</span>
          <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;***************&quot;</span><span class=p>);</span>

        <span class=n>PathMatcher</span> <span class=n>matcher2</span> <span class=o>=</span> <span class=n>FileSystems</span><span class=p>.</span><span class=na>getDefault</span><span class=p>()</span>
          <span class=p>.</span><span class=na>getPathMatcher</span><span class=p>(</span><span class=s>&quot;glob:*.tmp&quot;</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>test</span><span class=p>)</span>
          <span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>Path</span><span class=p>::</span><span class=n>getFileName</span><span class=p>)</span>
          <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>matcher2</span><span class=p>::</span><span class=n>matches</span><span class=p>)</span>
          <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;***************&quot;</span><span class=p>);</span>

        <span class=n>Files</span><span class=p>.</span><span class=na>walk</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=c1>// Only look for files</span>
          <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>Files</span><span class=p>::</span><span class=n>isRegularFile</span><span class=p>)</span>
          <span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>Path</span><span class=p>::</span><span class=n>getFileName</span><span class=p>)</span>
          <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>matcher2</span><span class=p>::</span><span class=n>matches</span><span class=p>)</span>
          <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>test\bag\foo\bar\baz\5208762845883213974.tmp</span>
<span class=cm>test\bag\foo\bar\baz\File.txt</span>
<span class=cm>test\bar\baz\bag\foo\7918367201207778677.tmp</span>
<span class=cm>test\bar\baz\bag\foo\File.txt</span>
<span class=cm>test\baz\bag\foo\bar\8016595521026696632.tmp</span>
<span class=cm>test\baz\bag\foo\bar\File.txt</span>
<span class=cm>test\dir.tmp</span>
<span class=cm>test\foo\bar\baz\bag\5832319279813617280.tmp</span>
<span class=cm>test\foo\bar\baz\bag\File.txt</span>
<span class=cm>***************</span>
<span class=cm>5208762845883213974.tmp</span>
<span class=cm>7918367201207778677.tmp</span>
<span class=cm>8016595521026696632.tmp</span>
<span class=cm>dir.tmp</span>
<span class=cm>5832319279813617280.tmp</span>
<span class=cm>***************</span>
<span class=cm>5208762845883213974.tmp</span>
<span class=cm>7918367201207778677.tmp</span>
<span class=cm>8016595521026696632.tmp</span>
<span class=cm>5832319279813617280.tmp</span>
<span class=cm>*/</span>
</code></pre></div> <p>在 <code>matcher</code> 中，<code>glob</code> 表达式开头的 <code>**/</code> 表示“当前目录及所有子目录”，这在当你不仅仅要匹配当前目录下特定结尾的 <code>Path</code> 时非常有用。单 <code>*</code> 表示“任何东西”，然后是一个点，然后大括号表示一系列的可能性---我们正在寻找以 <code>.tmp</code> 或 <code>.txt</code> 结尾的东西。您可以在 <code>getPathMatcher()</code> 文档中找到更多详细信息。</p> <p><code>matcher2</code> 只使用 <code>*.tmp</code>，通常不匹配任何内容，但是添加 <code>map()</code> 操作会将完整路径减少到末尾的名称。</p> <p>注意，在这两种情况下，输出中都会出现 <code>dir.tmp</code>，即使它是一个目录而不是一个文件。要只查找文件，必须像在最后 <code>files.walk()</code> 中那样对其进行筛选。</p> <!-- Reading & Writing Files --> <h2 id=_9>文件读写<a class=headerlink href=#_9 title="Permanent link">#</a></h2> <p>此时，我们可以对路径和目录做任何事情。 现在让我们看一下操纵文件本身的内容。</p> <p>如果一个文件很“小”，也就是说“它运行得足够快且占用内存小”，那么 <code>java.nio.file.Files</code> 类中的实用程序将帮助你轻松读写文本和二进制文件。</p> <p><code>Files.readAllLines()</code> 一次读取整个文件（因此，“小”文件很有必要），产生一个<code>List&lt;String&gt;</code>。 对于示例文件，我们将重用<code>streams/Cheese.dat</code>：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/ListOfLines.java</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ListOfLines</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>readAllLines</span><span class=p>(</span>
        <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;../streams/Cheese.dat&quot;</span><span class=p>))</span>
        <span class=p>.</span><span class=na>stream</span><span class=p>()</span>
        <span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>line</span> <span class=o>-&gt;</span> <span class=o>!</span><span class=n>line</span><span class=p>.</span><span class=na>startsWith</span><span class=p>(</span><span class=s>&quot;//&quot;</span><span class=p>))</span>
        <span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>line</span> <span class=o>-&gt;</span>
            <span class=n>line</span><span class=p>.</span><span class=na>substring</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>line</span><span class=p>.</span><span class=na>length</span><span class=p>()</span><span class=o>/</span><span class=mi>2</span><span class=p>))</span>
        <span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>Not much of a cheese</span>
<span class=cm>Finest in the</span>
<span class=cm>And what leads you</span>
<span class=cm>Well, it&#39;s</span>
<span class=cm>It&#39;s certainly uncon</span>
<span class=cm>*/</span>
</code></pre></div> <p>跳过注释行，其余的内容每行只打印一半。 这实现起来很简单：你只需将 <code>Path</code> 传递给 <code>readAllLines()</code> （以前的 java 实现这个功能很复杂）。<code>readAllLines()</code> 有一个重载版本，包含一个 <code>Charset</code> 参数来存储文件的 Unicode 编码。</p> <p><code>Files.write()</code> 被重载以写入 <code>byte</code> 数组或任何 <code>Iterable</code> 对象（它也有 <code>Charset</code> 选项）：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/Writing.java</span>
<span class=kn>import</span> <span class=nn>java.util.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Writing</span> <span class=p>{</span>
    <span class=kd>static</span> <span class=n>Random</span> <span class=n>rand</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=p>(</span><span class=mi>47</span><span class=p>);</span>
    <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>SIZE</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>;</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=c1>// Write bytes to a file:</span>
        <span class=kt>byte</span><span class=o>[]</span> <span class=n>bytes</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>byte</span><span class=o>[</span><span class=n>SIZE</span><span class=o>]</span><span class=p>;</span>
        <span class=n>rand</span><span class=p>.</span><span class=na>nextBytes</span><span class=p>(</span><span class=n>bytes</span><span class=p>);</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;bytes.dat&quot;</span><span class=p>),</span> <span class=n>bytes</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;bytes.dat: &quot;</span> <span class=o>+</span> <span class=n>Files</span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;bytes.dat&quot;</span><span class=p>)));</span>

        <span class=c1>// Write an iterable to a file:</span>
        <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>lines</span> <span class=o>=</span> <span class=n>Files</span><span class=p>.</span><span class=na>readAllLines</span><span class=p>(</span>
          <span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;../streams/Cheese.dat&quot;</span><span class=p>));</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;Cheese.txt&quot;</span><span class=p>),</span> <span class=n>lines</span><span class=p>);</span>
        <span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Cheese.txt: &quot;</span> <span class=o>+</span> <span class=n>Files</span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;Cheese.txt&quot;</span><span class=p>)));</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>bytes.dat: 1000</span>
<span class=cm>Cheese.txt: 199</span>
<span class=cm>*/</span>
</code></pre></div> <p>我们使用 <code>Random</code> 来创建一个随机的 <code>byte</code> 数组; 你可以看到生成的文件大小是 1000。</p> <p>一个 <code>List</code> 被写入文件，任何 <code>Iterable</code> 对象也可以这么做。</p> <p>如果文件大小有问题怎么办？ 比如说：</p> <ol> <li> <p>文件太大，如果你一次性读完整个文件，你可能会耗尽内存。</p> </li> <li> <p>您只需要在文件的中途工作以获得所需的结果，因此读取整个文件会浪费时间。</p> </li> </ol> <p><code>Files.lines()</code> 方便地将文件转换为行的 <code>Stream</code>：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/ReadLineStream.java</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReadLineStream</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=p>{</span>
        <span class=n>Files</span><span class=p>.</span><span class=na>lines</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;PathInfo.java&quot;</span><span class=p>))</span>
          <span class=p>.</span><span class=na>skip</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span>
          <span class=p>.</span><span class=na>findFirst</span><span class=p>()</span>
          <span class=p>.</span><span class=na>ifPresent</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=cm>/* Output:</span>
<span class=cm>    show(&quot;RegularFile&quot;, Files.isRegularFile(p));</span>
<span class=cm>*/</span>
</code></pre></div> <p>这对本章中第一个示例代码做了流式处理，跳过 13 行，然后选择下一行并将其打印出来。</p> <p><code>Files.lines()</code> 对于把文件处理行的传入流时非常有用，但是如果你想在 <code>Stream</code> 中读取，处理或写入怎么办？这就需要稍微复杂的代码：</p> <div class=highlight><pre><span></span><code><span class=c1>// files/StreamInAndOut.java</span>
<span class=kn>import</span> <span class=nn>java.io.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.nio.file.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.stream.*</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>StreamInAndOut</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>try</span><span class=p>(</span>
          <span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>input</span> <span class=o>=</span>
            <span class=n>Files</span><span class=p>.</span><span class=na>lines</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;StreamInAndOut.java&quot;</span><span class=p>));</span>
          <span class=n>PrintWriter</span> <span class=n>output</span> <span class=o>=</span>
            <span class=k>new</span> <span class=n>PrintWriter</span><span class=p>(</span><span class=s>&quot;StreamInAndOut.txt&quot;</span><span class=p>)</span>
        <span class=p>)</span> <span class=p>{</span>
            <span class=n>input</span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>toUpperCase</span><span class=p>)</span>
              <span class=p>.</span><span class=na>forEachOrdered</span><span class=p>(</span><span class=n>output</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=n>Exception</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=p>(</span><span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>因为我们在同一个块中执行所有操作，所以这两个文件都可以在相同的 try-with-resources 语句中打开。<code>PrintWriter</code> 是一个旧式的 <code>java.io</code> 类，允许你“打印”到一个文件，所以它是这个应用的理想选择。如果你看一下 <code>StreamInAndOut.txt</code>，你会发现它里面的内容确实是大写的。</p> <!-- Summary --> <h2 id=_10>本章小结<a class=headerlink href=#_10 title="Permanent link">#</a></h2> <p>虽然本章对文件和目录操作做了相当全面的介绍，但是仍然有没被介绍的类库中的功能——一定要研究 <code>java.nio.file</code> 的 Javadocs，尤其是 <code>java.nio.file.Files</code> 这个类。</p> <p>Java 7 和 8 对于处理文件和目录的类库做了大量改进。如果您刚刚开始使用 Java，那么您很幸运。在过去，它令人非常不愉快，我确信 Java 设计者以前对于文件操作不够重视才没做简化。对于初学者来说这是一件很棒的事，对于教学者来说也一样。我不明白为什么花了这么长时间来解决这个明显的问题，但不管怎么说它被解决了，我很高兴。使用文件现在很简单，甚至很有趣，这是你以前永远想不到的。</p> <!-- 分页 --> <div style="page-break-after: always;"></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../16-Validating-Your-Code/ title="16 Validating Your Code" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 上一页 </span> 16 Validating Your Code </span> </div> </a> <a href=../18-Strings/ title="18 Strings" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 下一页 </span> 18 Strings </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../../../assets/fonts/font-awesome.css> <a href=https://leay.net target=_blank rel=noopener title=home class="md-footer-social__link fa fa-home"></a> <a href=https://github.com/hqweay target=_blank rel=noopener title=github class="md-footer-social__link fa fa-github"></a> </div> </div> </div> </footer> </div> <script src=../../../../../assets/javascripts/application.c33a9706.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../../../assets/javascripts/lunr/tinyseg.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.ja.js></script> <script src=../../../../../assets/javascripts/lunr/lunr.multi.js></script> <script>app.initialize({version:"1.1",url:{base:"../../../../.."}})</script> </body> </html>